!function(){"use strict";function e(){}function t(e,t){for(const n in t)e[n]=t[n];return e}function n(e){return e()}function l(){return Object.create(null)}function s(e){e.forEach(n)}function i(e){return"function"==typeof e}function o(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function c(t,n,l){t.$$.on_destroy.push(function(t,...n){if(null==t)return e;const l=t.subscribe(...n);return l.unsubscribe?()=>l.unsubscribe():l}(n,l))}function r(e,t,n,l){if(e){const s=a(e,t,n,l);return e[0](s)}}function a(e,n,l,s){return e[1]&&s?t(l.ctx.slice(),e[1](s(n))):l.ctx}function u(e,t,n,l,s,i,o){const c=function(e,t,n,l){if(e[2]&&l){const s=e[2](l(n));if(void 0===t.dirty)return s;if("object"==typeof s){const e=[],n=Math.max(t.dirty.length,s.length);for(let l=0;l<n;l+=1)e[l]=t.dirty[l]|s[l];return e}return t.dirty|s}return t.dirty}(t,l,s,i);if(c){const s=a(t,n,l,o);e.p(s,c)}}function f(e){return null==e?"":e}function d(e,t,n=t){return e.set(n),t}function p(t){return t&&i(t.destroy)?t.destroy:e}function h(e,t){e.appendChild(t)}function m(e,t,n){e.insertBefore(t,n||null)}function g(e){e.parentNode.removeChild(e)}function v(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function b(e){return document.createElement(e)}function $(e){return document.createTextNode(e)}function y(){return $(" ")}function w(){return $("")}function x(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function k(e){return function(t){return t.preventDefault(),e.call(this,t)}}function Q(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function _(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function E(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function M(e,t){e.value=null==t?"":t}function S(e,t,n,l){e.style.setProperty(t,n,l?"important":"")}function T(e,t){for(let n=0;n<e.options.length;n+=1){const l=e.options[n];if(l.__value===t)return void(l.selected=!0)}}function O(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function C(e,t,n){e.classList[n?"add":"remove"](t)}let j;function z(e){j=e}function L(){if(!j)throw new Error("Function called outside component initialization");return j}function F(e){L().$$.before_update.push(e)}function N(e){L().$$.on_mount.push(e)}const P=[],A=[],D=[],I=[],B=Promise.resolve();let q=!1;function H(){q||(q=!0,B.then(X))}function Y(e){D.push(e)}let J=!1;const V=new Set;function X(){if(!J){J=!0;do{for(let e=0;e<P.length;e+=1){const t=P[e];z(t),R(t.$$)}for(z(null),P.length=0;A.length;)A.pop()();for(let e=0;e<D.length;e+=1){const t=D[e];V.has(t)||(V.add(t),t())}D.length=0}while(P.length);for(;I.length;)I.pop()();q=!1,J=!1,V.clear()}}function R(e){if(null!==e.fragment){e.update(),s(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Y)}}const U=new Set;let W;function K(){W={r:0,c:[],p:W}}function Z(){W.r||s(W.c),W=W.p}function G(e,t){e&&e.i&&(U.delete(e),e.i(t))}function ee(e,t,n,l){if(e&&e.o){if(U.has(e))return;U.add(e),W.c.push((()=>{U.delete(e),l&&(n&&e.d(1),l())})),e.o(t)}}function te(e,t){const n=t.token={};function l(e,l,s,i){if(t.token!==n)return;t.resolved=i;let o=t.ctx;void 0!==s&&(o=o.slice(),o[s]=i);const c=e&&(t.current=e)(o);let r=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==l&&e&&(K(),ee(e,1,1,(()=>{t.blocks[n]===e&&(t.blocks[n]=null)})),Z())})):t.block.d(1),c.c(),G(c,1),c.m(t.mount(),t.anchor),r=!0),t.block=c,t.blocks&&(t.blocks[l]=c),r&&X()}if((s=e)&&"object"==typeof s&&"function"==typeof s.then){const n=L();if(e.then((e=>{z(n),l(t.then,1,t.value,e),z(null)}),(e=>{if(z(n),l(t.catch,2,t.error,e),z(null),!t.hasCatch)throw e})),t.current!==t.pending)return l(t.pending,0),!0}else{if(t.current!==t.then)return l(t.then,1,t.value,e),!0;t.resolved=e}var s}function ne(e,t){const n={},l={},s={$$scope:1};let i=e.length;for(;i--;){const o=e[i],c=t[i];if(c){for(const e in o)e in c||(l[e]=1);for(const e in c)s[e]||(n[e]=c[e],s[e]=1);e[i]=c}else for(const e in o)s[e]=1}for(const e in l)e in n||(n[e]=void 0);return n}function le(e){return"object"==typeof e&&null!==e?e:{}}function se(e,t,n){const l=e.$$.props[t];void 0!==l&&(e.$$.bound[l]=n,n(e.$$.ctx[l]))}function ie(e){e&&e.c()}function oe(e,t,l,o){const{fragment:c,on_mount:r,on_destroy:a,after_update:u}=e.$$;c&&c.m(t,l),o||Y((()=>{const t=r.map(n).filter(i);a?a.push(...t):s(t),e.$$.on_mount=[]})),u.forEach(Y)}function ce(e,t){const n=e.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function re(t,n,i,o,c,r,a=[-1]){const u=j;z(t);const f=t.$$={fragment:null,ctx:null,props:r,update:e,not_equal:c,bound:l(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:n.context||[]),callbacks:l(),dirty:a,skip_bound:!1};let d=!1;if(f.ctx=i?i(t,n.props||{},((e,n,...l)=>{const s=l.length?l[0]:n;return f.ctx&&c(f.ctx[e],f.ctx[e]=s)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](s),d&&function(e,t){-1===e.$$.dirty[0]&&(P.push(e),H(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),n})):[],f.update(),d=!0,s(f.before_update),f.fragment=!!o&&o(f.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);f.fragment&&f.fragment.l(e),e.forEach(g)}else f.fragment&&f.fragment.c();n.intro&&G(t.$$.fragment),oe(t,n.target,n.anchor,n.customElement),X()}z(u)}class ae{$destroy(){ce(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function ue(e){let t,n,l,s,o;const c=e[2].default,a=r(c,e,e[1],null);return{c(){t=b("div"),a&&a.c(),t.hidden=!0},m(i,c){m(i,t,c),a&&a.m(t,null),l=!0,s||(o=p(n=fe.call(null,t,e[0])),s=!0)},p(e,[t]){a&&a.p&&2&t&&u(a,c,e,e[1],t,null,null),n&&i(n.update)&&1&t&&n.update.call(null,e[0])},i(e){l||(G(a,e),l=!0)},o(e){ee(a,e),l=!1},d(e){e&&g(t),a&&a.d(e),s=!1,o()}}}function fe(e,t="body"){let n;async function l(l){if("string"==typeof(t=l)){if(n=document.querySelector(t),null===n&&(await(H(),B),n=document.querySelector(t)),null===n)throw new Error(`No element found matching css selector: "${t}"`)}else{if(!(t instanceof HTMLElement))throw new TypeError(`Unknown portal target type: ${null===t?"null":typeof t}. Allowed types: string (CSS selector) or HTMLElement.`);n=t}n.appendChild(e),e.hidden=!1}return l(t),{update:l,destroy:function(){e.parentNode&&e.parentNode.removeChild(e)}}}function de(e,t,n){let{$$slots:l={},$$scope:s}=t,{target:i="body"}=t;return e.$$set=e=>{"target"in e&&n(0,i=e.target),"$$scope"in e&&n(1,s=e.$$scope)},[i,s,l]}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function pe(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var l=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,l.get?l:{enumerable:!0,get:function(){return e[n]}})})),t}function he(e){var t={exports:{}};return e(t,t.exports),t.exports}var me=pe(Object.freeze({__proto__:null,default:class extends ae{constructor(e){super(),re(this,e,de,ue,o,{target:0})}},portal:fe}));function ge(e){let t,n;return{c(){t=b("i"),_(t,"class",n=f("icon "+e[0])+" Q2nr7df")},m(e,n){m(e,t,n)},p(e,l){1&l&&n!==(n=f("icon "+e[0])+" Q2nr7df")&&_(t,"class",n)},d(e){e&&g(t)}}}function ve(e){let t,n,l,s,i,o;const c=e[2].default,a=r(c,e,e[1],null);let f=e[0]&&ge(e);return{c(){t=b("main"),n=b("section"),a&&a.c(),l=y(),f&&f.c(),_(n,"class","Q2nr7df"),_(t,"class","Q2nr7df")},m(e,c){m(e,t,c),h(t,n),a&&a.m(n,null),h(n,l),f&&f.m(n,null),s=!0,i||(o=p(me.portal.call(null,t,"body")),i=!0)},p(e,[t]){a&&a.p&&2&t&&u(a,c,e,e[1],t,null,null),e[0]?f?f.p(e,t):(f=ge(e),f.c(),f.m(n,null)):f&&(f.d(1),f=null)},i(e){s||(G(a,e),s=!0)},o(e){ee(a,e),s=!1},d(e){e&&g(t),a&&a.d(e),f&&f.d(),i=!1,o()}}}function be(e,t,n){let{$$slots:l={},$$scope:s}=t,{icon:i="fad fa-spinner fa-pulse"}=t;return e.$$set=e=>{"icon"in e&&n(0,i=e.icon),"$$scope"in e&&n(1,s=e.$$scope)},[i,s,l]}class $e extends ae{constructor(e){super(),re(this,e,be,ve,o,{icon:0})}}const ye=[];function we(t,n=e){let l;const s=[];function i(e){if(o(t,e)&&(t=e,l)){const e=!ye.length;for(let e=0;e<s.length;e+=1){const n=s[e];n[1](),ye.push(n,t)}if(e){for(let e=0;e<ye.length;e+=2)ye[e][0](ye[e+1]);ye.length=0}}}return{set:i,update:function(e){i(e(t))},subscribe:function(o,c=e){const r=[o,c];return s.push(r),1===s.length&&(l=n(i)||e),o(t),()=>{const e=s.indexOf(r);-1!==e&&s.splice(e,1),0===s.length&&(l(),l=null)}}}}let xe=we([]);const ke=new class{info(e,t="",n="fad fa-info-circle",l=3e3){this.add("info",t,e,n,l)}success(e,t="",n="fas fa-check",l=3e3){this.add("success",t,e,n,l)}error(e,t="",n="fad fa-exclamation-circle",l=3e3){this.add("error",t,e,n,l)}add(e,t="",n,l="fad fa-user",s=3e3){let i={type:e,info:t,label:n,icon:l,hide:!1};xe.update((e=>[i,...e])),setTimeout((()=>{i.hide=!0,xe.update((e=>e))}),s),setTimeout((()=>{xe.update((e=>{let t=e.indexOf(i);return e.splice(t,1),e}))}),s+300)}},Qe=we(null),_e=we({menu:[],lists:[],defaultAvatar:"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='iso-8859-1'%3F%3E%3Csvg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 456.001 456.001' style='enable-background:new 0 0 456.001 456.001;' xml:space='preserve'%3E%3Cg%3E%3Cpath style='fill:%23E69F5F;' d='M379.893,168c0-41.334-40.667-168-104-168c-34,0-48,8-48,8s-14-8-48-8 c-63.334,0-104,126.667-104,168c0,36,20,51.333,24,64c5.405,17.117,0,40,0,40c34,27,96,32,96,32h64c0,0,62-5,96-32 c0,0-5.405-22.883,0-40C359.893,219.333,379.893,204,379.893,168z'/%3E%3Cpath style='fill:%23E09156;' d='M75.892,168c0,36,20,51.333,24,64c5.405,17.117,0,40,0,40c34,27,96,32,96,32l17.709-11.068 c-0.326-38.588-1.708-84.932-1.708-84.932l-96-72c0,0,174-56.667,112-128c0,0-14-8-48-8C116.559,0,75.892,126.667,75.892,168z'/%3E%3Cpath style='fill:%23F6B47B;' d='M387.863,414.878l-0.726-6.536c-0.287-2.586-2.616-4.449-5.201-4.161l-0.407,0.045l-7.027-56.214 c-1.529-12.228-9.943-22.492-21.634-26.389l-39.047-13.016c-5.375-1.792-11.273-0.644-15.409,2.9l-11.579-3.86 c-6.534-2.178-10.94-8.292-10.94-15.179v-25.802l34.461-14.359c17.887-7.453,29.539-24.93,29.539-44.308v-8 c13.255,0,24-10.745,24-24s-10.745-24-24-24v-16c0-22.092-17.909-40-40-40h-144c-22.092,0-40,17.909-40,40v16 c-13.255,0-24,10.745-24,24s10.745,24,24,24v8c0,19.378,11.651,36.855,29.538,44.308l34.462,14.359v25.801 c0,6.887-4.407,13.001-10.94,15.179l-11.425,3.808c-4.133-3.503-9.999-4.631-15.348-2.848l-39.047,13.016 c-11.691,3.897-20.105,14.161-21.634,26.389l-7.027,56.214l-0.407-0.045c-2.586-0.287-4.914,1.576-5.202,4.161l-0.726,6.536 c-0.287,2.585,1.576,4.914,4.161,5.201l11.702,1.3V440c0,8.837,7.164,16,16,16h40h176h40c8.837,0,16-7.163,16-16v-18.621 l11.702-1.3C386.287,419.792,388.15,417.463,387.863,414.878z'/%3E%3Cpath style='fill:%23E2A071;' d='M179.893,266.667v25.801c0,5.693-3.017,10.852-7.752,13.701 c66.923,11.563,103.75-39.499,103.752-39.503l0,0L179.893,266.667z'/%3E%3Cpath style='fill:%23FDC88E;' d='M339.893,152v-16c0-22.092-17.909-40-40-40h-144c-22.092,0-40,17.909-40,40v16 c-13.255,0-24,10.745-24,24s10.745,24,24,24v8c0,19.378,11.651,36.855,29.538,44.308l51.691,21.538 c9.75,4.063,20.208,6.154,30.77,6.154l0,0c10.562,0,21.019-2.091,30.769-6.154l51.694-21.539 c17.887-7.453,29.539-24.93,29.539-44.308v-8c13.255,0,24-10.745,24-24C363.893,162.745,353.147,152,339.893,152z'/%3E%3Cpath style='fill:%23623F33;' d='M171.893,184L171.893,184c-4.4,0-8-3.6-8-8v-8c0-4.4,3.6-8,8-8l0,0c4.4,0,8,3.6,8,8v8 C179.893,180.4,176.293,184,171.893,184z'/%3E%3Cpath style='fill:%23623F33;' d='M283.892,184L283.892,184c-4.4,0-8-3.6-8-8v-8c0-4.4,3.6-8,8-8l0,0c4.4,0,8,3.6,8,8v8 C291.892,180.4,288.292,184,283.892,184z'/%3E%3Cpath style='fill:%23E2A071;' d='M227.893,240.219c-14.223,0-27.527-3.5-36.5-9.605c-3.652-2.484-4.601-7.461-2.113-11.113 c2.48-3.648,7.461-4.598,11.113-2.113c6.289,4.277,16.57,6.832,27.5,6.832s21.211-2.555,27.5-6.832 c3.66-2.492,8.629-1.539,11.113,2.113c2.488,3.652,1.539,8.629-2.113,11.113C255.421,236.719,242.116,240.219,227.893,240.219z'/%3E%3Cpath style='fill:%23F6B47B;' d='M247.893,90c-52.333,21.833-132,46-132,46v16c-13.255,0-24,10.745-24,24s10.745,24,24,24v8 c0,19.378,11.651,36.855,29.538,44.308l51.69,21.538c2.53,1.054,5.112,1.962,7.727,2.749 c-22.756-16.647-37.933-31.207-46.857-40.761c-6.514-6.974-10.099-16.186-10.099-25.729v-60.194c100.5-33.66,112-53.91,112-53.91 L247.893,90z'/%3E%3Cpath style='fill:%23FF4F4F;' d='M316,456.001v-40h67l-8.499-67.989c-1.529-12.228-9.943-22.492-21.634-26.389l-39.047-13.016 c-6.8-2.267-14.45,0.154-18.291,6.206C281.349,337.157,256.424,352,228.001,352s-53.349-14.844-67.53-37.188 c-3.841-6.052-11.491-8.473-18.291-6.206l-39.047,13.016c-11.691,3.897-20.105,14.161-21.634,26.389l-7.609,60.872L140.001,416v40 h176V456.001z'/%3E%3Cpath style='fill:%23F23F44;' d='M140.001,422.04v-18.106c0-7.697-2.774-15.135-7.813-20.953l-44.019-50.813 c-3.552,4.497-5.93,9.93-6.669,15.843l-8.356,66.847C85.867,415.622,119.711,419.587,140.001,422.04z'/%3E%3Cpath style='fill:%23FFB94C;' d='M140.001,411.507l-65.936-7.326c-2.586-0.287-4.914,1.576-5.202,4.161l-0.726,6.536 c-0.287,2.585,1.576,4.914,4.161,5.201l67.703,7.523V411.507z'/%3E%3Cpath style='fill:%23F23F44;' d='M316,422.04v-18.106c0-7.697,2.774-15.135,7.813-20.953l44.019-50.813 c3.552,4.497,5.93,9.93,6.669,15.843l8.356,66.847C370.134,415.622,336.289,419.587,316,422.04z'/%3E%3Cpath style='fill:%23FFB94C;' d='M316,411.507l65.936-7.326c2.586-0.287,4.914,1.576,5.202,4.161l0.726,6.536 c0.287,2.585-1.576,4.914-4.161,5.201L316,427.602V411.507z'/%3E%3Cpath style='fill:%23FFB94C;' d='M227.999,408c-26.51,0-48,21.49-48,48h96C275.999,429.491,254.51,408,227.999,408z'/%3E%3Cpath style='fill:%23E69F5F;' d='M110.892,112.671V136c16.714,0,87.054-12,133.714-40c0,0,40.393,52.667,100.286,56v-40.668 c0-20.564-17.516-37.182-38.997-36.998l-156.697,1.339C127.988,75.854,110.892,92.365,110.892,112.671z'/%3E%3Cpath style='fill:%23E09156;' d='M149.2,75.673c-21.211,0.181-38.307,16.693-38.307,36.998V136c1.54,0,3.538-0.103,5.928-0.31 c8.631-2.913,75.731-26.331,107.655-60.661L149.2,75.673z'/%3E%3C/g%3E%3C/svg%3E%0A"}),Ee=we(null);class Me extends Error{constructor(e){super(),this.response=e}}class Se{constructor(e){this.id=null,this.name=null,this.avatar=null,this.id=e.id,this.name=e.name,this.avatar=e.avatar}static logout(){throw new Me(null)}static isAuthenticated(){return fetch("/api/auth").then((e=>e.json())).then((e=>{if(!1!==e){let t=new Se(e);ke.success("Authenticated",t.name),Qe.update((()=>t))}else Qe.update((()=>null))}))}static login(e,t){return fetch("/api/auth/login",{method:"post",body:JSON.stringify({login:e,password:t})}).then((e=>{if(401===e.status)throw new Me(null);if(200!==e.status)throw new Error(e.status.toString());return e.json()})).then((e=>this.isAuthenticated())).catch((e=>{if(!(e instanceof Me))throw e;ke.error("Login error","wrogin login or password")}))}}function Te(t){return{c:e,m:e,i:e,o:e,d:e}}function Oe(t){return{c:e,m:e,i:e,o:e,d:e}}function Ce(e){let t,n;return t=new $e({props:{$$slots:{default:[je]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(e,l){oe(t,e,l),n=!0},i(e){n||(G(t.$$.fragment,e),n=!0)},o(e){ee(t.$$.fragment,e),n=!1},d(e){ce(t,e)}}}function je(e){let t;return{c(){t=$("Loading")},m(e,n){m(e,t,n)},d(e){e&&g(t)}}}function ze(e){let t,n,l,i,o,c,r,a,u,f,d,p,v,Q,E,S={ctx:e,current:null,token:null,hasCatch:!1,pending:Ce,then:Oe,catch:Te,blocks:[,,,]};return te(p=e[2],S),{c(){t=b("main"),n=b("form"),l=b("input"),i=y(),o=b("input"),c=y(),r=b("button"),r.textContent="Login",a=$("\n\t\tpowered by "),u=b("b"),u.textContent="Atomino & Magic",f=y(),d=w(),S.block.c(),_(l,"type","text"),_(l,"placeholder","login"),_(l,"name","login"),_(l,"class","Qhg0mfa"),_(o,"type","password"),_(o,"placeholder","password"),_(o,"name","password"),_(o,"class","Qhg0mfa"),_(r,"type","submit"),_(r,"class","Qhg0mfa"),_(n,"class","Qhg0mfa"),_(t,"class","Qhg0mfa")},m(s,p){m(s,t,p),h(t,n),h(n,l),M(l,e[0]),h(n,i),h(n,o),M(o,e[1]),h(n,c),h(n,r),h(n,a),h(n,u),m(s,f,p),m(s,d,p),S.block.m(s,S.anchor=p),S.mount=()=>d.parentNode,S.anchor=d,v=!0,Q||(E=[x(l,"input",e[4]),x(o,"input",e[5]),x(n,"submit",k(e[3]))],Q=!0)},p(t,[n]){e=t,1&n&&l.value!==e[0]&&M(l,e[0]),2&n&&o.value!==e[1]&&M(o,e[1]),S.ctx=e,4&n&&p!==(p=e[2])&&te(p,S)},i(e){v||(G(S.block),v=!0)},o(e){for(let e=0;e<3;e+=1){ee(S.blocks[e])}v=!1},d(e){e&&g(t),e&&g(f),e&&g(d),S.block.d(e),S.token=null,S=null,Q=!1,s(E)}}}function Le(e,t,n){let l="elvis@elvis.hu",s="galaga",i=null;return[l,s,i,function(){n(2,i=Se.login(l,s))},function(){l=this.value,n(0,l)},function(){s=this.value,n(1,s)}]}class Fe extends ae{constructor(e){super(),re(this,e,Le,ze,o,{})}}var Ne;!function(e){e[e.list=0]="list",e[e.form=1]="form",e[e.custom=2]="custom",e[e.menu=3]="menu"}(Ne||(Ne={}));class Pe{constructor(e,t){this.label=e,this.icon=t,this.action=null,this.type=null,this.submenu=[]}static List(e,t,n){const l=new Pe(e,t);return l.action=()=>Ee.update((()=>n)),l.type=Pe.type.list,l}static Page(e,t,n,l=null){const s=new Pe(e,t);return s.action=()=>n.open(l),s.type=Pe.type.form,s}static Menu(e,t,n){const l=new Pe(e,t);return l.submenu=n,l.type=Pe.type.menu,l}static Custom(e,t,n){const l=new Pe(e,t);return l.action=n,l.type=Pe.type.custom,l}activate(){return"function"==typeof this.action&&this.action(),this}}function Ae(e,t,n){const l=e.slice();return l[9]=t[n],l[11]=n,l}function De(e){let t;return{c(){t=b("i"),_(t,"class","marker fa-fw fal fa-chevron-left Q3shszd"),C(t,"open",e[5][e[11]])},m(e,n){m(e,t,n)},p(e,n){32&n&&C(t,"open",e[5][e[11]])},d(e){e&&g(t)}}}function Ie(e){let t,n;return t=new Ye({props:{menu:e[9].submenu,wide:e[3],isOpen:!0===e[5][e[11]],isSubmenu:!0}}),{c(){ie(t.$$.fragment)},m(e,l){oe(t,e,l),n=!0},p(e,n){const l={};4&n&&(l.menu=e[9].submenu),8&n&&(l.wide=e[3]),32&n&&(l.isOpen=!0===e[5][e[11]]),t.$set(l)},i(e){n||(G(t.$$.fragment,e),n=!0)},o(e){ee(t.$$.fragment,e),n=!1},d(e){ce(t,e)}}}function Be(e){let t,n,l,s,i,o,c,r,a,u,d,p,v=e[9].label+"",k=e[9].type===Pe.type.menu&&De(e);function Q(){return e[7](e[9],e[11])}let M=e[9].type===Pe.type.menu&&Ie(e);return{c(){t=b("button"),n=b("i"),s=y(),i=b("span"),o=$(v),c=y(),k&&k.c(),r=y(),M&&M.c(),a=w(),_(n,"class",l=f("icon "+e[9].icon)+" Q3shszd"),_(i,"class","Q3shszd"),_(t,"class","closed Q3shszd"),C(t,"has-submenu",e[9].type===Pe.type.menu)},m(e,l){m(e,t,l),h(t,n),h(t,s),h(t,i),h(i,o),h(t,c),k&&k.m(t,null),m(e,r,l),M&&M.m(e,l),m(e,a,l),u=!0,d||(p=x(t,"click",Q),d=!0)},p(s,i){e=s,(!u||4&i&&l!==(l=f("icon "+e[9].icon)+" Q3shszd"))&&_(n,"class",l),(!u||4&i)&&v!==(v=e[9].label+"")&&E(o,v),e[9].type===Pe.type.menu?k?k.p(e,i):(k=De(e),k.c(),k.m(t,null)):k&&(k.d(1),k=null),4&i&&C(t,"has-submenu",e[9].type===Pe.type.menu),e[9].type===Pe.type.menu?M?(M.p(e,i),4&i&&G(M,1)):(M=Ie(e),M.c(),G(M,1),M.m(a.parentNode,a)):M&&(K(),ee(M,1,1,(()=>{M=null})),Z())},i(e){u||(G(M),u=!0)},o(e){ee(M),u=!1},d(e){e&&g(t),k&&k.d(),e&&g(r),M&&M.d(e),e&&g(a),d=!1,p()}}}function qe(e){let t,n,l=e[2],s=[];for(let t=0;t<l.length;t+=1)s[t]=Be(Ae(e,l,t));const i=e=>ee(s[e],1,1,(()=>{s[e]=null}));return{c(){t=b("nav");for(let e=0;e<s.length;e+=1)s[e].c();_(t,"class","Q3shszd"),C(t,"wide",e[3]),C(t,"open",e[0]),C(t,"isSubmenu",e[1])},m(l,i){m(l,t,i);for(let e=0;e<s.length;e+=1)s[e].m(t,null);e[8](t),n=!0},p(e,[n]){if(108&n){let o;for(l=e[2],o=0;o<l.length;o+=1){const i=Ae(e,l,o);s[o]?(s[o].p(i,n),G(s[o],1)):(s[o]=Be(i),s[o].c(),G(s[o],1),s[o].m(t,null))}for(K(),o=l.length;o<s.length;o+=1)i(o);Z()}8&n&&C(t,"wide",e[3]),1&n&&C(t,"open",e[0]),2&n&&C(t,"isSubmenu",e[1])},i(e){if(!n){for(let e=0;e<l.length;e+=1)G(s[e]);n=!0}},o(e){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)ee(s[e]);n=!1},d(n){n&&g(t),v(s,n),e[8](null)}}}function He(e,t,n){let l,{isOpen:s=!0}=t,{isSubmenu:i=!1}=t,{menu:o}=t,{wide:c}=t,r={};function a(e,t){e.type===Pe.type.menu?n(5,r[t]=!r[t],r):e.action()}N((()=>{n(4,l.style.height=l.scrollHeight+"px",l)}));return e.$$set=e=>{"isOpen"in e&&n(0,s=e.isOpen),"isSubmenu"in e&&n(1,i=e.isSubmenu),"menu"in e&&n(2,o=e.menu),"wide"in e&&n(3,c=e.wide)},[s,i,o,c,l,r,a,(e,t)=>a(e,t),function(e){A[e?"unshift":"push"]((()=>{l=e,n(4,l)}))}]}Pe.type=Ne;class Ye extends ae{constructor(e){super(),re(this,e,He,qe,o,{isOpen:0,isSubmenu:1,menu:2,wide:3})}}function Je(e){let t,n,l,i,o,c,r,a,u,f,d,p,v,w,k,Q=e[1].name+"";return p=new Ye({props:{menu:e[2].menu,wide:e[0]}}),{c(){t=b("main"),n=b("div"),l=b("img"),c=y(),r=b("span"),a=$(Q),u=y(),f=b("div"),f.innerHTML='<i class="fas fa-times"></i>',d=y(),ie(p.$$.fragment),l.src!==(i=e[1].avatar??e[2].defaultAvatar)&&_(l,"src",i),_(l,"alt",o=e[1].name),_(l,"class","Q3psonk"),_(r,"class","Q3psonk"),_(f,"class","logout Q3psonk"),_(n,"class","user Q3psonk"),_(t,"class","Q3psonk"),C(t,"wide",e[0])},m(s,i){m(s,t,i),h(t,n),h(n,l),h(n,c),h(n,r),h(r,a),h(n,u),h(n,f),h(t,d),oe(p,t,null),v=!0,w||(k=[x(l,"click",e[3]),x(f,"click",Se.logout)],w=!0)},p(e,[n]){(!v||6&n&&l.src!==(i=e[1].avatar??e[2].defaultAvatar))&&_(l,"src",i),(!v||2&n&&o!==(o=e[1].name))&&_(l,"alt",o),(!v||2&n)&&Q!==(Q=e[1].name+"")&&E(a,Q);const s={};4&n&&(s.menu=e[2].menu),1&n&&(s.wide=e[0]),p.$set(s),1&n&&C(t,"wide",e[0])},i(e){v||(G(p.$$.fragment,e),v=!0)},o(e){ee(p.$$.fragment,e),v=!1},d(e){e&&g(t),ce(p),w=!1,s(k)}}}function Ve(e,t,n){let l,s;c(e,Qe,(e=>n(1,l=e))),c(e,_e,(e=>n(2,s=e)));let i=localStorage.getItem("nav-panel-wide");return[i,l,s,function(){n(0,i=!i)?localStorage.setItem("nav-panel-wide","1"):localStorage.removeItem("nav-panel-wide")}]}class Xe extends ae{constructor(e){super(),re(this,e,Ve,Je,o,{})}}class Re{constructor(e,t=!0,n=!1,l=null){this.initial=!1,this.twoWay=!1,this.fields=[],this.key=null,this.label=e,this.twoWay=t,this.initial=n,this.key=l}asc(e){return this.fields.push({field:e,order:1}),this}desc(e){return this.fields.push({field:e,order:-1}),this}get(){let e=[{label:this.label,order:"asc",fields:this.key?this.key+"-asc":this.fields.map((e=>[e.field,1===e.order?"asc":"desc"])),initial:this.initial}];return this.twoWay&&e.push({label:this.label,order:"desc",fields:this.key?this.key+"-desc":this.fields.map((e=>[e.field,1===e.order?"desc":"asc"])),initial:!1}),e}}class Ue{constructor(e,t,n){this.icon=e,this.label=t,this.onClick=n}}class We{constructor(e,t,n,l,s,i,o,c){this.label=e,this.icon=t,this.actions=n,this.limit=l,this.fetcher=i,this.card=o,this.cardify=c,this.sorting=[],s.forEach((e=>this.sorting.push(...e.get())));let r=this.sorting.findIndex((e=>e.initial));this.initialSortingIndex=r>-1?r:0}static Sorting(e,t=!0,n=!1,l=null){return new Re(e,t,n,l)}static Action(e,t,n){return new Ue(e,t,n)}}class Ke{constructor(e){this.initialised=!1,this.items=[],this.count=0,this.page=1,this.pageCount=1,this.quickSearch=null,this.config=e,this.sortingIndex=e.initialSortingIndex}static create(e,t,n,l,s,i,o,c){let r=new We(e,t,n,l,s,i,o,c);return new Ke(r)}reload(){return this.loadData()}loadData(){return this.initialised=!0,this.config.fetcher.list(this.page,this.config.sorting[this.sortingIndex],this.quickSearch,{},this.config.limit).then((e=>{this.count=e.count,this.page=e.page,this.pageCount=Math.ceil(e.count/this.config.limit),this.items.length=0,this.items.push(...e.items.map((e=>this.config.cardify(e))))}))}}function Ze(e,t,n){const l=e.slice();return l[15]=t[n],l}function Ge(e,t,n){const l=e.slice();return l[18]=t[n],l[20]=n,l}function et(e,t,n){const l=e.slice();return l[21]=t[n],l}function tt(e){let t,n=e[0].config.actions,l=[];for(let t=0;t<n.length;t+=1)l[t]=nt(et(e,n,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=w()},m(e,n){for(let t=0;t<l.length;t+=1)l[t].m(e,n);m(e,t,n)},p(e,s){if(1&s){let i;for(n=e[0].config.actions,i=0;i<n.length;i+=1){const o=et(e,n,i);l[i]?l[i].p(o,s):(l[i]=nt(o),l[i].c(),l[i].m(t.parentNode,t))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(e){v(l,e),e&&g(t)}}}function nt(e){let t,n,l,s,i,o;function c(){return e[7](e[21])}return{c(){t=b("button"),n=b("i"),_(n,"class",l=f(e[21].icon)+" Qgu5wy9"),_(t,"title",s=e[21].label),_(t,"class","Qgu5wy9")},m(e,l){m(e,t,l),h(t,n),i||(o=x(t,"click",Q(c)),i=!0)},p(i,o){e=i,1&o&&l!==(l=f(e[21].icon)+" Qgu5wy9")&&_(n,"class",l),1&o&&s!==(s=e[21].label)&&_(t,"title",s)},d(e){e&&g(t),i=!1,o()}}}function lt(e){let t,n,l=("asc"===e[18].order?"▼ ":"▲ ")+e[18].label;return{c(){t=b("option"),n=$(l),t.__value=e[20],t.value=t.__value},m(e,l){m(e,t,l),h(t,n)},p(e,t){1&t&&l!==(l=("asc"===e[18].order?"▼ ":"▲ ")+e[18].label)&&E(n,l)},d(e){e&&g(t)}}}function st(e){let t,n,l;var s=e[0].config.card;function i(e){return{props:{item:e[15],list:e[2]}}}return s&&(t=new s(i(e))),{c(){t&&ie(t.$$.fragment),n=w()},m(e,s){t&&oe(t,e,s),m(e,n,s),l=!0},p(e,l){const o={};if(4&l&&(o.item=e[15]),4&l&&(o.list=e[2]),s!==(s=e[0].config.card)){if(t){K();const e=t;ee(e.$$.fragment,1,0,(()=>{ce(e,1)})),Z()}s?(t=new s(i(e)),ie(t.$$.fragment),G(t.$$.fragment,1),oe(t,n.parentNode,n)):t=null}else s&&t.$set(o)},i(e){l||(t&&G(t.$$.fragment,e),l=!0)},o(e){t&&ee(t.$$.fragment,e),l=!1},d(e){e&&g(n),t&&ce(t,e)}}}function it(e){let t,n,l,i,o,c,r,a,u,f,d,p,w,k,Q,S,O,j,z,L,F,N,P,A,D,I,B,q,H,J,V,X,R,U,W=e[0].config.label+"",te=e[2].count+"",ne=e[2].pageCount+"",le=e[0].config.actions&&tt(e),se=e[0].config.sorting,ie=[];for(let t=0;t<se.length;t+=1)ie[t]=lt(Ge(e,se,t));let oe=e[2].items,ce=[];for(let t=0;t<oe.length;t+=1)ce[t]=st(Ze(e,oe,t));const re=e=>ee(ce[e],1,1,(()=>{ce[e]=null}));return{c(){t=b("main"),n=b("header"),l=b("section"),i=b("i"),c=y(),r=b("span"),a=b("div"),u=$(W),f=y(),d=b("div"),p=$(te),w=y(),k=b("div"),le&&le.c(),Q=y(),S=b("section"),O=b("input"),j=y(),z=b("section"),L=b("button"),L.innerHTML='<i class="fas fa-chevron-left"></i>',F=y(),N=b("input"),P=y(),A=b("span"),D=$(ne),I=y(),B=b("button"),B.innerHTML='<i class="fas fa-chevron-right"></i>',q=y(),H=b("select");for(let e=0;e<ie.length;e+=1)ie[e].c();J=y(),V=b("section");for(let e=0;e<ce.length;e+=1)ce[e].c();_(i,"class",o="icon "+e[0].config.icon+" Qgu5wy9"),_(a,"class","label Qgu5wy9"),_(d,"class","count Qgu5wy9"),_(r,"class","title"),_(k,"class","buttons Qgu5wy9"),_(l,"class","info Qgu5wy9"),_(O,"type","text"),_(O,"placeholder","search"),_(O,"class","Qgu5wy9"),_(S,"class","tools search Qgu5wy9"),_(L,"class","Qgu5wy9"),_(N,"type","text"),_(N,"class","Qgu5wy9"),_(A,"class","of Qgu5wy9"),_(B,"class","Qgu5wy9"),_(H,"class","Qgu5wy9"),void 0===e[0].sortingIndex&&Y((()=>e[12].call(H))),_(z,"class","tools paging Qgu5wy9"),_(n,"class","Qgu5wy9"),_(V,"class","listing Qgu5wy9"),_(t,"class","Qgu5wy9"),C(t,"selected",e[1])},m(s,o){m(s,t,o),h(t,n),h(n,l),h(l,i),h(l,c),h(l,r),h(r,a),h(a,u),h(r,f),h(r,d),h(d,p),h(l,w),h(l,k),le&&le.m(k,null),h(n,Q),h(n,S),h(S,O),M(O,e[0].quickSearch),h(n,j),h(n,z),h(z,L),h(z,F),h(z,N),M(N,e[2].page),h(z,P),h(z,A),h(A,D),h(z,I),h(z,B),h(z,q),h(z,H);for(let e=0;e<ie.length;e+=1)ie[e].m(H,null);T(H,e[0].sortingIndex),h(t,J),h(t,V);for(let e=0;e<ce.length;e+=1)ce[e].m(V,null);X=!0,R||(U=[x(O,"input",e[8]),x(O,"input",e[4]),x(L,"click",e[9]),x(N,"input",e[10]),x(N,"input",e[5]),x(B,"click",e[11]),x(H,"change",e[12]),x(H,"input",e[6])],R=!0)},p(e,[n]){if((!X||1&n&&o!==(o="icon "+e[0].config.icon+" Qgu5wy9"))&&_(i,"class",o),(!X||1&n)&&W!==(W=e[0].config.label+"")&&E(u,W),(!X||4&n)&&te!==(te=e[2].count+"")&&E(p,te),e[0].config.actions?le?le.p(e,n):(le=tt(e),le.c(),le.m(k,null)):le&&(le.d(1),le=null),1&n&&O.value!==e[0].quickSearch&&M(O,e[0].quickSearch),4&n&&N.value!==e[2].page&&M(N,e[2].page),(!X||4&n)&&ne!==(ne=e[2].pageCount+"")&&E(D,ne),1&n){let t;for(se=e[0].config.sorting,t=0;t<se.length;t+=1){const l=Ge(e,se,t);ie[t]?ie[t].p(l,n):(ie[t]=lt(l),ie[t].c(),ie[t].m(H,null))}for(;t<ie.length;t+=1)ie[t].d(1);ie.length=se.length}if(1&n&&T(H,e[0].sortingIndex),5&n){let t;for(oe=e[2].items,t=0;t<oe.length;t+=1){const l=Ze(e,oe,t);ce[t]?(ce[t].p(l,n),G(ce[t],1)):(ce[t]=st(l),ce[t].c(),G(ce[t],1),ce[t].m(V,null))}for(K(),t=oe.length;t<ce.length;t+=1)re(t);Z()}2&n&&C(t,"selected",e[1])},i(e){if(!X){for(let e=0;e<oe.length;e+=1)G(ce[e]);X=!0}},o(e){ce=ce.filter(Boolean);for(let e=0;e<ce.length;e+=1)ee(ce[e]);X=!1},d(e){e&&g(t),le&&le.d(),v(ie,e),v(ce,e),R=!1,s(U)}}}function ot(e,t,n){let l,{selected:s=!1}=t,{list:i}=t;const o=we(i);let r,a;function u(){""!==l.page&&(d(o,l.page=isNaN(l.page)?1:l.page,l),l.page<1&&d(o,l.page=1,l),clearTimeout(a),a=setTimeout(f,250))}function f(){return i.loadData().then((()=>d(o,l=i,l)))}c(e,o,(e=>n(2,l=e))),i.reload=()=>f();return e.$$set=e=>{"selected"in e&&n(1,s=e.selected),"list"in e&&n(0,i=e.list)},e.$$.update=()=>{3&e.$$.dirty&&s&&!i.initialised&&f()},[i,s,l,o,function(){clearTimeout(r),r=setTimeout(f,250)},u,f,e=>e.onClick(i),function(){i.quickSearch=this.value,n(0,i)},()=>{d(o,l.page--,l),u()},function(){l.page=this.value,o.set(l)},()=>{d(o,l.page++,l),u()},function(){i.sortingIndex=O(this),n(0,i)}]}class ct extends ae{constructor(e){super(),re(this,e,ot,it,o,{selected:1,list:0})}}let rt=new class{constructor(){this._documents=[],this.active=we(null),this._documents=[],this.documents=we(this._documents)}has(e){return this.docIndex(e)>-1}docIndex(e){return this._documents.findIndex((t=>t.$id===e))}add(e){this._documents.push(e),this.documents.set(this._documents)}show(e){this.active.set(this._documents[this.docIndex(e)])}close(e){let t=this.docIndex(e);this._documents.length>1&&(t===this._documents.length-1?this.show(this._documents[t-1].$id):this.show(this._documents[t+1].$id)),this._documents.splice(t,1),this.documents.set(this._documents)}},at=rt.documents;class ut extends Error{constructor(e,t=""){super(e),this.info=t}}class ft{constructor(e){this._id=e}get class(){return Object.getPrototypeOf(this).constructor}static $id(e=""){return this.$idPrefix+"--"+e}static open(e=null){let t=this.$id(e);rt.has(t)||rt.add(new this(e)),rt.show(t)}static create(...e){}get icon(){return this.class.icon}get label(){return"LABEL"}get info(){return"INFO"}get component(){return Object.getPrototypeOf(this).constructor.component}get $id(){return Object.getPrototypeOf(this).constructor.$id(this.id)}get id(){return this._id}set id(e){if(e!==this._id){if(rt.has(this.class.$id(e)))throw new ut("Can not change document id","Duplicate document id: "+this.class.$id(e));this._id=e,at.update((e=>e))}}close(){rt.close(this.$id)}}function dt(e){let t,n,l;var s=e[0].component;function i(e){return{props:{doc:e[0]}}}return s&&(n=new s(i(e))),{c(){t=b("main"),n&&ie(n.$$.fragment),_(t,"class","Qh6p0ix"),C(t,"selected",e[1])},m(e,s){m(e,t,s),n&&oe(n,t,null),l=!0},p(e,[l]){const o={};if(1&l&&(o.doc=e[0]),s!==(s=e[0].component)){if(n){K();const e=n;ee(e.$$.fragment,1,0,(()=>{ce(e,1)})),Z()}s?(n=new s(i(e)),ie(n.$$.fragment),G(n.$$.fragment,1),oe(n,t,null)):n=null}else s&&n.$set(o);2&l&&C(t,"selected",e[1])},i(e){l||(n&&G(n.$$.fragment,e),l=!0)},o(e){n&&ee(n.$$.fragment,e),l=!1},d(e){e&&g(t),n&&ce(n)}}}function pt(e,t,n){let{doc:l}=t,{selected:s}=t;return e.$$set=e=>{"doc"in e&&n(0,l=e.doc),"selected"in e&&n(1,s=e.selected)},[l,s]}ft.create=function(e,t){return Object.assign(class extends ft{},{component:e,$idPrefix:t})};class ht extends ae{constructor(e){super(),re(this,e,pt,dt,o,{doc:0,selected:1})}}function mt(e){let t,n;const l=e[1].default,s=r(l,e,e[0],null);return{c(){t=b("main"),s&&s.c(),_(t,"class","Q5gptos")},m(e,l){m(e,t,l),s&&s.m(t,null),n=!0},p(e,[t]){s&&s.p&&1&t&&u(s,l,e,e[0],t,null,null)},i(e){n||(G(s,e),n=!0)},o(e){ee(s,e),n=!1},d(e){e&&g(t),s&&s.d(e)}}}function gt(e,t,n){let{$$slots:l={},$$scope:s}=t;return e.$$set=e=>{"$$scope"in e&&n(0,s=e.$$scope)},[s,l]}class vt extends ae{constructor(e){super(),re(this,e,gt,mt,o,{})}}function bt(t){let n,l,i,o,c,r,a,u,d,p,v,w,k,Q,M=t[1].info+"",S=t[1].label+"";return{c(){n=b("main"),l=b("i"),o=y(),c=b("span"),r=$(M),a=y(),u=b("i"),d=y(),p=b("span"),v=$(S),_(l,"class",i=f(t[1].icon)+" Q2qpot6"),_(c,"class","info Q2qpot6"),_(u,"class","close fas fa-times Q2qpot6"),_(p,"class","label Q2qpot6"),_(n,"title",w=t[1].label),_(n,"class","Q2qpot6"),C(n,"selected",t[0])},m(e,s){m(e,n,s),h(n,l),h(n,o),h(n,c),h(c,r),h(n,a),h(n,u),h(n,d),h(n,p),h(p,v),k||(Q=[x(u,"click",t[4]),x(n,"click",t[3])],k=!0)},p(e,[t]){2&t&&i!==(i=f(e[1].icon)+" Q2qpot6")&&_(l,"class",i),2&t&&M!==(M=e[1].info+"")&&E(r,M),2&t&&S!==(S=e[1].label+"")&&E(v,S),2&t&&w!==(w=e[1].label)&&_(n,"title",w),1&t&&C(n,"selected",e[0])},i:e,o:e,d(e){e&&g(n),k=!1,s(Q)}}}function $t(e,t,n){let{selected:l}=t,{doc:s}=t;function i(e){l&&e.close()}return e.$$set=e=>{"selected"in e&&n(0,l=e.selected),"doc"in e&&n(1,s=e.doc)},[l,s,i,function(t){!function(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e(t)))}(e,t)},()=>i(s)]}class yt extends ae{constructor(e){super(),re(this,e,$t,bt,o,{selected:0,doc:1})}}let wt={manager:rt,Doc:ft,create:ft.create.bind(ft)};function xt(e,t,n){const l=e.slice();return l[7]=t[n],l}function kt(e,t,n){const l=e.slice();return l[10]=t[n],l}function Qt(e,t,n){const l=e.slice();return l[7]=t[n],l}function _t(e){let t,n;return t=new yt({props:{doc:e[7],selected:e[7]===e[1]}}),t.$on("click",(function(){return e[6](e[7])})),{c(){ie(t.$$.fragment)},m(e,l){oe(t,e,l),n=!0},p(n,l){e=n;const s={};1&l&&(s.doc=e[7]),3&l&&(s.selected=e[7]===e[1]),t.$set(s)},i(e){n||(G(t.$$.fragment,e),n=!0)},o(e){ee(t.$$.fragment,e),n=!1},d(e){ce(t,e)}}}function Et(e){let t,n,l=e[0],s=[];for(let t=0;t<l.length;t+=1)s[t]=_t(Qt(e,l,t));const i=e=>ee(s[e],1,1,(()=>{s[e]=null}));return{c(){for(let e=0;e<s.length;e+=1)s[e].c();t=w()},m(e,l){for(let t=0;t<s.length;t+=1)s[t].m(e,l);m(e,t,l),n=!0},p(e,n){if(3&n){let o;for(l=e[0],o=0;o<l.length;o+=1){const i=Qt(e,l,o);s[o]?(s[o].p(i,n),G(s[o],1)):(s[o]=_t(i),s[o].c(),G(s[o],1),s[o].m(t.parentNode,t))}for(K(),o=l.length;o<s.length;o+=1)i(o);Z()}},i(e){if(!n){for(let e=0;e<l.length;e+=1)G(s[e]);n=!0}},o(e){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)ee(s[e]);n=!1},d(e){v(s,e),e&&g(t)}}}function Mt(e){let t,n;return t=new ct({props:{list:e[10],selected:e[10]===e[3]}}),{c(){ie(t.$$.fragment)},m(e,l){oe(t,e,l),n=!0},p(e,n){const l={};4&n&&(l.list=e[10]),12&n&&(l.selected=e[10]===e[3]),t.$set(l)},i(e){n||(G(t.$$.fragment,e),n=!0)},o(e){ee(t.$$.fragment,e),n=!1},d(e){ce(t,e)}}}function St(e){let t,n;return t=new ht({props:{doc:e[7],selected:e[7]===e[1]}}),{c(){ie(t.$$.fragment)},m(e,l){oe(t,e,l),n=!0},p(e,n){const l={};1&n&&(l.doc=e[7]),3&n&&(l.selected=e[7]===e[1]),t.$set(l)},i(e){n||(G(t.$$.fragment,e),n=!0)},o(e){ee(t.$$.fragment,e),n=!1},d(e){ce(t,e)}}}function Tt(e){let t,n,l,s,i,o,c;n=new Xe({}),s=new vt({props:{$$slots:{default:[Et]},$$scope:{ctx:e}}});let r=e[2].lists,a=[];for(let t=0;t<r.length;t+=1)a[t]=Mt(kt(e,r,t));const u=e=>ee(a[e],1,1,(()=>{a[e]=null}));let f=e[0],d=[];for(let t=0;t<f.length;t+=1)d[t]=St(xt(e,f,t));const p=e=>ee(d[e],1,1,(()=>{d[e]=null}));return{c(){t=b("main"),ie(n.$$.fragment),l=y(),ie(s.$$.fragment),i=y();for(let e=0;e<a.length;e+=1)a[e].c();o=y();for(let e=0;e<d.length;e+=1)d[e].c();_(t,"class","Q1v2avhj")},m(e,r){m(e,t,r),oe(n,t,null),h(t,l),oe(s,t,null),h(t,i);for(let e=0;e<a.length;e+=1)a[e].m(t,null);h(t,o);for(let e=0;e<d.length;e+=1)d[e].m(t,null);c=!0},p(e,[n]){const l={};if(32771&n&&(l.$$scope={dirty:n,ctx:e}),s.$set(l),12&n){let l;for(r=e[2].lists,l=0;l<r.length;l+=1){const s=kt(e,r,l);a[l]?(a[l].p(s,n),G(a[l],1)):(a[l]=Mt(s),a[l].c(),G(a[l],1),a[l].m(t,o))}for(K(),l=r.length;l<a.length;l+=1)u(l);Z()}if(3&n){let l;for(f=e[0],l=0;l<f.length;l+=1){const s=xt(e,f,l);d[l]?(d[l].p(s,n),G(d[l],1)):(d[l]=St(s),d[l].c(),G(d[l],1),d[l].m(t,null))}for(K(),l=f.length;l<d.length;l+=1)p(l);Z()}},i(e){if(!c){G(n.$$.fragment,e),G(s.$$.fragment,e);for(let e=0;e<r.length;e+=1)G(a[e]);for(let e=0;e<f.length;e+=1)G(d[e]);c=!0}},o(e){ee(n.$$.fragment,e),ee(s.$$.fragment,e),a=a.filter(Boolean);for(let e=0;e<a.length;e+=1)ee(a[e]);d=d.filter(Boolean);for(let e=0;e<d.length;e+=1)ee(d[e]);c=!1},d(e){e&&g(t),ce(n),ce(s),v(a,e),v(d,e)}}}function Ot(e,t,n){let l,s,i,o;c(e,_e,(e=>n(2,i=e))),c(e,Ee,(e=>n(3,o=e)));let r=wt.manager.active;c(e,r,(e=>n(1,s=e)));let a=wt.manager.documents;c(e,a,(e=>n(0,l=e)));return[l,s,i,o,r,a,e=>d(r,s=e,s)]}class Ct extends ae{constructor(e){super(),re(this,e,Ot,Tt,o,{})}}function jt(e,t,n){const l=e.slice();return l[1]=t[n],l}function zt(e){let t,n,l,s,i,o,c,r,a,u,d,p=e[1].label+"",v=e[1].info+"";return{c(){t=b("section"),n=b("i"),s=y(),i=b("div"),o=$(p),c=y(),r=b("div"),a=$(v),u=y(),_(n,"class",l=f("fa "+e[1].icon)+" Q1mwykiy"),_(r,"class","info Q1mwykiy"),_(i,"class","label Q1mwykiy"),_(t,"class",d=f(e[1].type)+" Q1mwykiy"),C(t,"hide",e[1].hide)},m(e,l){m(e,t,l),h(t,n),h(t,s),h(t,i),h(i,o),h(i,c),h(i,r),h(r,a),h(t,u)},p(e,s){1&s&&l!==(l=f("fa "+e[1].icon)+" Q1mwykiy")&&_(n,"class",l),1&s&&p!==(p=e[1].label+"")&&E(o,p),1&s&&v!==(v=e[1].info+"")&&E(a,v),1&s&&d!==(d=f(e[1].type)+" Q1mwykiy")&&_(t,"class",d),1&s&&C(t,"hide",e[1].hide)},d(e){e&&g(t)}}}function Lt(t){let n,l,s,i=t[0],o=[];for(let e=0;e<i.length;e+=1)o[e]=zt(jt(t,i,e));return{c(){n=b("main");for(let e=0;e<o.length;e+=1)o[e].c();_(n,"class","Q1mwykiy")},m(e,t){m(e,n,t);for(let e=0;e<o.length;e+=1)o[e].m(n,null);l||(s=p(me.portal.call(null,n,"body")),l=!0)},p(e,[t]){if(1&t){let l;for(i=e[0],l=0;l<i.length;l+=1){const s=jt(e,i,l);o[l]?o[l].p(s,t):(o[l]=zt(s),o[l].c(),o[l].m(n,null))}for(;l<o.length;l+=1)o[l].d(1);o.length=i.length}},i:e,o:e,d(e){e&&g(n),v(o,e),l=!1,s()}}}function Ft(e,t,n){let l;return c(e,xe,(e=>n(0,l=e))),[l]}class Nt extends ae{constructor(e){super(),re(this,e,Ft,Lt,o,{})}}let Pt=we([]);const At=new class{show(e,t={}){Pt.update((n=>[...n,new Dt(e,t)]))}close(e){Pt.update((t=>{let n=t.indexOf(e);return n>-1&&t.splice(n,1),t}))}};class Dt{constructor(e,t){this.Component=e,this.properties=t}close(){return()=>At.close(this)}}function It(e,t,n){const l=e.slice();return l[1]=t[n],l}function Bt(e){let n,l;const s=[e[1].properties,{close:e[1].close()}];let i={};for(let e=0;e<s.length;e+=1)i=t(i,s[e]);return n=new e[1].Component({props:i}),{c(){ie(n.$$.fragment)},m(e,t){oe(n,e,t),l=!0},p(e,t){const l=1&t?ne(s,[le(e[1].properties),{close:e[1].close()}]):{};n.$set(l)},i(e){l||(G(n.$$.fragment,e),l=!0)},o(e){ee(n.$$.fragment,e),l=!1},d(e){ce(n,e)}}}function qt(e){let t,n,l=e[0],s=[];for(let t=0;t<l.length;t+=1)s[t]=Bt(It(e,l,t));const i=e=>ee(s[e],1,1,(()=>{s[e]=null}));return{c(){for(let e=0;e<s.length;e+=1)s[e].c();t=w()},m(e,l){for(let t=0;t<s.length;t+=1)s[t].m(e,l);m(e,t,l),n=!0},p(e,[n]){if(1&n){let o;for(l=e[0],o=0;o<l.length;o+=1){const i=It(e,l,o);s[o]?(s[o].p(i,n),G(s[o],1)):(s[o]=Bt(i),s[o].c(),G(s[o],1),s[o].m(t.parentNode,t))}for(K(),o=l.length;o<s.length;o+=1)i(o);Z()}},i(e){if(!n){for(let e=0;e<l.length;e+=1)G(s[e]);n=!0}},o(e){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)ee(s[e]);n=!1},d(e){v(s,e),e&&g(t)}}}function Ht(e,t,n){let l;return c(e,Pt,(e=>n(0,l=e))),[l]}class Yt extends ae{constructor(e){super(),re(this,e,Ht,qt,o,{})}}class Jt extends Error{constructor(e){super(),this.response=e}}class Vt extends Error{constructor(e){super(),this.response=e}}class Xt extends Error{constructor(e){super(),this.response=e}}class Rt{static register(){this._registered||(window.addEventListener("unhandledrejection",(e=>this.handle(e.reason))),window.addEventListener("error",(e=>this.handle(e.error))),this._registered=!0)}static handle(e){e instanceof Me?(ke.error("Not authenticated","You must log in to continue"),fetch("/api/auth/logout").then((()=>Qe.set(null)))):e instanceof Jt?ke.error("You dont have permission for the requested resource!",e.message):e instanceof ut?ke.error(e.message,e.info):e instanceof Vt?ke.error("The requested resource can not be found!"):e instanceof Xt?ke.error("Validation Error!"):ke.error("Some unknown error occurred: ",e.message)}}function Ut(t){return{c:e,m:e,p:e,i:e,o:e,d:e}}function Wt(e){let t,n,l,s;const i=[Zt,Kt],o=[];function c(e,t){return null===e[0]?0:1}return t=c(e),n=o[t]=i[t](e),{c(){n.c(),l=w()},m(e,n){o[t].m(e,n),m(e,l,n),s=!0},p(e,s){let r=t;t=c(e),t!==r&&(K(),ee(o[r],1,1,(()=>{o[r]=null})),Z(),n=o[t],n||(n=o[t]=i[t](e),n.c()),G(n,1),n.m(l.parentNode,l))},i(e){s||(G(n),s=!0)},o(e){ee(n),s=!1},d(e){o[t].d(e),e&&g(l)}}}function Kt(e){let t,n;return t=new Ct({}),{c(){ie(t.$$.fragment)},m(e,l){oe(t,e,l),n=!0},i(e){n||(G(t.$$.fragment,e),n=!0)},o(e){ee(t.$$.fragment,e),n=!1},d(e){ce(t,e)}}}function Zt(e){let t,n;return t=new Fe({}),{c(){ie(t.$$.fragment)},m(e,l){oe(t,e,l),n=!0},i(e){n||(G(t.$$.fragment,e),n=!0)},o(e){ee(t.$$.fragment,e),n=!1},d(e){ce(t,e)}}}function Gt(e){let t,n;return t=new $e({props:{icon:"fad fa-spinner fa-spin",$$slots:{default:[en]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(e,l){oe(t,e,l),n=!0},p(e,n){const l={};8&n&&(l.$$scope={dirty:n,ctx:e}),t.$set(l)},i(e){n||(G(t.$$.fragment,e),n=!0)},o(e){ee(t.$$.fragment,e),n=!1},d(e){ce(t,e)}}}function en(e){let t;return{c(){t=$("Initializing magic...")},m(e,n){m(e,t,n)},d(e){e&&g(t)}}}function tn(e){let t,n,l,s,i,o={ctx:e,current:null,token:null,hasCatch:!1,pending:Gt,then:Wt,catch:Ut,value:2,blocks:[,,,]};return te(e[1],o),n=new Nt({}),s=new Yt({}),{c(){o.block.c(),t=y(),ie(n.$$.fragment),l=y(),ie(s.$$.fragment)},m(e,c){o.block.m(e,o.anchor=c),o.mount=()=>t.parentNode,o.anchor=t,m(e,t,c),oe(n,e,c),m(e,l,c),oe(s,e,c),i=!0},p(t,[n]){{const l=(e=t).slice();l[2]=o.resolved,o.block.p(l,n)}},i(e){i||(G(o.block),G(n.$$.fragment,e),G(s.$$.fragment,e),i=!0)},o(e){for(let e=0;e<3;e+=1){ee(o.blocks[e])}ee(n.$$.fragment,e),ee(s.$$.fragment,e),i=!1},d(e){o.block.d(e),o.token=null,o=null,e&&g(t),ce(n,e),e&&g(l),ce(s,e)}}}function nn(e,t,n){let l;c(e,Qe,(e=>n(0,l=e))),Rt.register();let s=Se.isAuthenticated();return[l,s]}Rt._registered=!1;class ln extends ae{constructor(e){super(),re(this,e,nn,tn,o,{})}}function sn(e,t,n){const l=e.slice();return l[3]=t[n],l}function on(e,t,n){const l=e.slice();return l[6]=t[n],l}function cn(e,t,n){const l=e.slice();return l[9]=t[n],l}function rn(e){let t,n,l;return{c(){t=b("img"),_(t,"alt",n=e[0].label),t.src!==(l=e[0].img)&&_(t,"src",l),_(t,"loading","lazy"),_(t,"class","Q11w6ue4")},m(e,n){m(e,t,n)},p(e,s){1&s&&n!==(n=e[0].label)&&_(t,"alt",n),1&s&&t.src!==(l=e[0].img)&&_(t,"src",l)},d(e){e&&g(t)}}}function an(e){let t,n,l,s;return{c(){t=b("span"),n=b("img"),_(n,"alt",l=e[0].label),n.src!==(s=e[0].avatar)&&_(n,"src",s),_(n,"loading","lazy"),_(n,"class","Q11w6ue4"),_(t,"class","avatar Q11w6ue4")},m(e,l){m(e,t,l),h(t,n)},p(e,t){1&t&&l!==(l=e[0].label)&&_(n,"alt",l),1&t&&n.src!==(s=e[0].avatar)&&_(n,"src",s)},d(e){e&&g(t)}}}function un(e){let t,n=e[0].icons,l=[];for(let t=0;t<n.length;t+=1)l[t]=fn(cn(e,n,t));return{c(){t=b("span");for(let e=0;e<l.length;e+=1)l[e].c();_(t,"class","icons Q11w6ue4")},m(e,n){m(e,t,n);for(let e=0;e<l.length;e+=1)l[e].m(t,null)},p(e,s){if(1&s){let i;for(n=e[0].icons,i=0;i<n.length;i+=1){const o=cn(e,n,i);l[i]?l[i].p(o,s):(l[i]=fn(o),l[i].c(),l[i].m(t,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(e){e&&g(t),v(l,e)}}}function fn(e){let t,n,l,s,i,o,c;return{c(){t=b("span"),n=b("i"),l=y(),s=b("i"),o=y(),_(n,"class","fas fa-circle fa-stack-2x"),S(n,"color","#000c"),_(s,"class",i=e[9].icon+" fa-stack-1x fa-inverse Q11w6ue4"),S(s,"color",e[9].color?e[9].color:"#fffd"),_(t,"class","fa-stack fa-2x"),S(t,"font-size","10px"),_(t,"title",c=e[9].hint)},m(e,i){m(e,t,i),h(t,n),h(t,l),h(t,s),h(t,o)},p(e,n){1&n&&i!==(i=e[9].icon+" fa-stack-1x fa-inverse Q11w6ue4")&&_(s,"class",i),1&n&&S(s,"color",e[9].color?e[9].color:"#fffd"),1&n&&c!==(c=e[9].hint)&&_(t,"title",c)},d(e){e&&g(t)}}}function dn(e){let t,n=e[0].properties,l=[];for(let t=0;t<n.length;t+=1)l[t]=pn(on(e,n,t));return{c(){t=b("span");for(let e=0;e<l.length;e+=1)l[e].c();_(t,"class","props Q11w6ue4")},m(e,n){m(e,t,n);for(let e=0;e<l.length;e+=1)l[e].m(t,null)},p(e,s){if(1&s){let i;for(n=e[0].properties,i=0;i<n.length;i+=1){const o=on(e,n,i);l[i]?l[i].p(o,s):(l[i]=pn(o),l[i].c(),l[i].m(t,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(e){e&&g(t),v(l,e)}}}function pn(e){let t,n,l,s,i,o=e[6].label+"",c=e[6].value+"";return{c(){t=b("span"),n=$(o),l=y(),s=b("span"),i=$(c),_(t,"class","label Q11w6ue4"),_(s,"class","value Q11w6ue4")},m(e,o){m(e,t,o),h(t,n),m(e,l,o),m(e,s,o),h(s,i)},p(e,t){1&t&&o!==(o=e[6].label+"")&&E(n,o),1&t&&c!==(c=e[6].value+"")&&E(i,c)},d(e){e&&g(t),e&&g(l),e&&g(s)}}}function hn(e){let t,n=e[0].actions,l=[];for(let t=0;t<n.length;t+=1)l[t]=mn(sn(e,n,t));return{c(){t=b("footer");for(let e=0;e<l.length;e+=1)l[e].c();_(t,"class","Q11w6ue4")},m(e,n){m(e,t,n);for(let e=0;e<l.length;e+=1)l[e].m(t,null)},p(e,s){if(3&s){let i;for(n=e[0].actions,i=0;i<n.length;i+=1){const o=sn(e,n,i);l[i]?l[i].p(o,s):(l[i]=mn(o),l[i].c(),l[i].m(t,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(e){e&&g(t),v(l,e)}}}function mn(e){let t,n,l,s,i,o;function c(){return e[2](e[3])}return{c(){t=b("button"),n=b("i"),_(n,"class",l=f(e[3].icon)+" Q11w6ue4"),_(t,"title",s=e[3].label),_(t,"class","Q11w6ue4")},m(e,l){m(e,t,l),h(t,n),i||(o=x(t,"click",Q(c)),i=!0)},p(i,o){e=i,1&o&&l!==(l=f(e[3].icon)+" Q11w6ue4")&&_(n,"class",l),1&o&&s!==(s=e[3].label)&&_(t,"title",s)},d(e){e&&g(t),i=!1,o()}}}function gn(t){let n,l,s,o,c,r,a,u,f,d,p,v,w,k,Q,M=t[0].label+"",S=t[0].id+"",T=t[0].img&&rn(t),O=t[0].avatar&&an(t),j=t[0].icons&&un(t),z=t[0].properties&&dn(t),L=t[0].actions&&hn(t);return{c(){n=b("main"),T&&T.c(),l=y(),s=b("header"),O&&O.c(),o=y(),c=b("span"),r=b("span"),a=$(M),u=y(),f=b("span"),d=$(S),p=y(),j&&j.c(),v=y(),z&&z.c(),w=y(),L&&L.c(),_(r,"class","label ellipsis Q11w6ue4"),_(f,"class","id Q11w6ue4"),_(c,"class","info Q11w6ue4"),_(s,"class","Q11w6ue4"),_(n,"class","Q11w6ue4"),C(n,"inactive",!t[0].active)},m(e,g){m(e,n,g),T&&T.m(n,null),h(n,l),h(n,s),O&&O.m(s,null),h(s,o),h(s,c),h(c,r),h(r,a),h(c,u),h(c,f),h(f,d),h(s,p),j&&j.m(s,null),h(n,v),z&&z.m(n,null),h(n,w),L&&L.m(n,null),k||(Q=x(n,"click",(function(){i(t[0].action)&&t[0].action.apply(this,arguments)})),k=!0)},p(e,[i]){(t=e)[0].img?T?T.p(t,i):(T=rn(t),T.c(),T.m(n,l)):T&&(T.d(1),T=null),t[0].avatar?O?O.p(t,i):(O=an(t),O.c(),O.m(s,o)):O&&(O.d(1),O=null),1&i&&M!==(M=t[0].label+"")&&E(a,M),1&i&&S!==(S=t[0].id+"")&&E(d,S),t[0].icons?j?j.p(t,i):(j=un(t),j.c(),j.m(s,null)):j&&(j.d(1),j=null),t[0].properties?z?z.p(t,i):(z=dn(t),z.c(),z.m(n,w)):z&&(z.d(1),z=null),t[0].actions?L?L.p(t,i):(L=hn(t),L.c(),L.m(n,null)):L&&(L.d(1),L=null),1&i&&C(n,"inactive",!t[0].active)},i:e,o:e,d(e){e&&g(n),T&&T.d(),O&&O.d(),j&&j.d(),z&&z.d(),L&&L.d(),k=!1,Q()}}}function vn(e,t,n){let{item:l}=t,{list:s}=t;return e.$$set=e=>{"item"in e&&n(0,l=e.item),"list"in e&&n(1,s=e.list)},[l,s,e=>e.onClick(s)]}class bn{constructor(e,t,n=null,l=null){this.icon=t,this.color=n,this.hint=l,this.icon=e+" "+t}}class $n{constructor(e,t){this.label=e,this.value=t}}class yn{constructor(e,t,n){this.icon=e,this.label=t,this.onClick=n}}class wn{constructor(e,t,n,l=!0,s=null,i=null,o=null,c=null,r=null){this.id=e,this.action=t,this.label=n,this.active=l,this.img=s,this.avatar=i,this.icons=o,this.properties=c,this.actions=r}}class xn{static Cardify(e,t,n,l=!0,s=null,i=null,o=null,c=null,r=null){return new wn(e,t,n,l,s,i,o,c,r)}static Icon(e,t,n=null,l=null){return new bn(e,t,n,l)}static Property(e,t){return new $n(e,t)}static Action(e,t,n){return new yn(e,t,n)}}function kn(e){switch(e.status){case 200:return e.json().catch((t=>{throw new ut("Some error occurred ("+e.status+")",e.url)}));case 401:throw new Me(e);case 403:throw new Jt(e);case 404:throw new Vt(e);case 422:throw new Xt(e);case 499:throw new ut(e.statusText);default:throw new ut("Some error occurred ("+e.status+")",e.url)}}xn.Component=class extends ae{constructor(e){super(),re(this,e,vn,gn,o,{item:0,list:1})}};class Qn{constructor(e){this.api=e}list(e,t,n,l,s){return fetch(this.api+"/list/"+e,{method:"POST",body:JSON.stringify({sort:t.fields,quickSearch:n,search:l,limit:s})}).then((e=>kn(e))).then((e=>new _n(e.page,e.count,e.items)))}}class _n{constructor(e,t,n){this.page=e,this.count=t,this.items=n}}function En(e){let t,n,l,s,i;const o=e[3].default,c=r(o,e,e[2],null);return{c(){t=b("section"),n=b("header"),l=$(e[0]),s=y(),c&&c.c(),_(n,"class","Qlsdj8n"),_(t,"class","Qlsdj8n"),C(t,"wide",e[1])},m(e,o){m(e,t,o),h(t,n),h(n,l),h(t,s),c&&c.m(t,null),i=!0},p(e,[n]){(!i||1&n)&&E(l,e[0]),c&&c.p&&4&n&&u(c,o,e,e[2],n,null,null),2&n&&C(t,"wide",e[1])},i(e){i||(G(c,e),i=!0)},o(e){ee(c,e),i=!1},d(e){e&&g(t),c&&c.d(e)}}}function Mn(e,t,n){let{$$slots:l={},$$scope:s}=t,{label:i}=t,{wide:o}=t;return e.$$set=e=>{"label"in e&&n(0,i=e.label),"wide"in e&&n(1,o=e.wide),"$$scope"in e&&n(2,s=e.$$scope)},[i,o,s,l]}class Sn extends ae{constructor(e){super(),re(this,e,Mn,En,o,{label:0,wide:1})}}function Tn(e){let t;return{c(){t=b("i"),_(t,"class","hint-marker fad fa-info-circle Qzqtrvy")},m(e,n){m(e,t,n)},d(e){e&&g(t)}}}function On(e){let t;return{c(){t=b("div"),_(t,"class","hint Qzqtrvy")},m(n,l){m(n,t,l),t.innerHTML=e[2]},p(e,n){4&n&&(t.innerHTML=e[2])},d(e){e&&g(t)}}}function Cn(e){let t,n,l,s,i,o,c,a,f=e[2]&&Tn();const d=e[4].default,p=r(d,e,e[3],null);let v=e[2]&&On(e);return{c(){t=b("section"),n=b("span"),f&&f.c(),l=y(),s=$(e[0]),i=y(),p&&p.c(),o=y(),v&&v.c(),c=w(),_(n,"class","label Qzqtrvy"),_(t,"class","Qzqtrvy"),C(t,"vertical",!e[1])},m(e,r){m(e,t,r),h(t,n),f&&f.m(n,null),h(n,l),h(n,s),h(t,i),p&&p.m(t,null),m(e,o,r),v&&v.m(e,r),m(e,c,r),a=!0},p(e,[i]){e[2]?f||(f=Tn(),f.c(),f.m(n,l)):f&&(f.d(1),f=null),(!a||1&i)&&E(s,e[0]),p&&p.p&&8&i&&u(p,d,e,e[3],i,null,null),2&i&&C(t,"vertical",!e[1]),e[2]?v?v.p(e,i):(v=On(e),v.c(),v.m(c.parentNode,c)):v&&(v.d(1),v=null)},i(e){a||(G(p,e),a=!0)},o(e){ee(p,e),a=!1},d(e){e&&g(t),f&&f.d(),p&&p.d(e),e&&g(o),v&&v.d(e),e&&g(c)}}}function jn(e,t,n){let{$$slots:l={},$$scope:s}=t,{label:i}=t,{inlineLabel:o}=t,{hint:c}=t;return e.$$set=e=>{"label"in e&&n(0,i=e.label),"inlineLabel"in e&&n(1,o=e.inlineLabel),"hint"in e&&n(2,c=e.hint),"$$scope"in e&&n(3,s=e.$$scope)},[i,o,c,s,l]}class zn extends ae{constructor(e){super(),re(this,e,jn,Cn,o,{label:0,inlineLabel:1,hint:2})}}function Ln(t){let n,l,s,i,o,c,r,a,u,f;return{c(){n=b("div"),l=b("i"),s=y(),i=b("b"),o=$(t[0]),c=$(" ("),r=$(t[1]),a=$(" / "),u=$(t[2]),f=$(")"),_(l,"class","fas fa-exclamation-circle Qfzgwv6"),_(n,"class","Qfzgwv6")},m(e,t){m(e,n,t),h(n,l),h(n,s),h(n,i),h(i,o),h(n,c),h(n,r),h(n,a),h(n,u),h(n,f)},p(e,[t]){1&t&&E(o,e[0]),2&t&&E(r,e[1]),4&t&&E(u,e[2])},i:e,o:e,d(e){e&&g(n)}}}function Fn(e,t,n){let{message:l}=t,{field:s}=t,{label:i}=t;return e.$$set=e=>{"message"in e&&n(0,l=e.message),"field"in e&&n(1,s=e.field),"label"in e&&n(2,i=e.label)},[l,s,i]}class Nn extends ae{constructor(e){super(),re(this,e,Fn,Ln,o,{message:0,field:1,label:2})}}function Pn(e,t,n){const l=e.slice();return l[7]=t[n],l}function An(e,t,n){const l=e.slice();return l[10]=t[n],l[11]=t,l[12]=n,l}function Dn(e,t,n){const l=e.slice();return l[13]=t[n],l}function In(e,t,n){const l=e.slice();return l[16]=t[n],l}function Bn(e){let t,n,l,s,i,o;function c(){return e[5](e[16])}return{c(){t=b("button"),n=b("i"),_(n,"class",l=f(e[16].icon)+" Q8nwlse"),t.disabled=s=!e[16].active(e[0]),_(t,"class","Q8nwlse")},m(e,l){m(e,t,l),h(t,n),i||(o=x(t,"click",c),i=!0)},p(i,o){e=i,1&o&&l!==(l=f(e[16].icon)+" Q8nwlse")&&_(n,"class",l),1&o&&s!==(s=!e[16].active(e[0]))&&(t.disabled=s)},d(e){e&&g(t),i=!1,o()}}}function qn(e){let n,l,s,i;const o=[{name:e[10].field},e[10].props];function c(t){e[6](t,e[10])}var r=e[10].component;function a(e){let n={};for(let e=0;e<o.length;e+=1)n=t(n,o[e]);return void 0!==e[1][e[10].field]&&(n.value=e[1][e[10].field]),{props:n}}return r&&(n=new r(a(e)),A.push((()=>se(n,"value",c)))),{c(){n&&ie(n.$$.fragment),s=w()},m(e,t){n&&oe(n,e,t),m(e,s,t),i=!0},p(t,i){e=t;const u=1&i?ne(o,[{name:e[10].field},le(e[10].props)]):{};var f;if(!l&&3&i&&(l=!0,u.value=e[1][e[10].field],f=()=>l=!1,I.push(f)),r!==(r=e[10].component)){if(n){K();const e=n;ee(e.$$.fragment,1,0,(()=>{ce(e,1)})),Z()}r?(n=new r(a(e)),A.push((()=>se(n,"value",c))),ie(n.$$.fragment),G(n.$$.fragment,1),oe(n,s.parentNode,s)):n=null}else r&&n.$set(u)},i(e){i||(n&&G(n.$$.fragment,e),i=!0)},o(e){n&&ee(n.$$.fragment,e),i=!1},d(e){e&&g(s),n&&ce(n,e)}}}function Hn(e){let t,n,l=e[2][e[10].field],s=[];for(let t=0;t<l.length;t+=1)s[t]=Yn(Dn(e,l,t));const i=e=>ee(s[e],1,1,(()=>{s[e]=null}));return{c(){for(let e=0;e<s.length;e+=1)s[e].c();t=w()},m(e,l){for(let t=0;t<s.length;t+=1)s[t].m(e,l);m(e,t,l),n=!0},p(e,n){if(5&n){let o;for(l=e[2][e[10].field],o=0;o<l.length;o+=1){const i=Dn(e,l,o);s[o]?(s[o].p(i,n),G(s[o],1)):(s[o]=Yn(i),s[o].c(),G(s[o],1),s[o].m(t.parentNode,t))}for(K(),o=l.length;o<s.length;o+=1)i(o);Z()}},i(e){if(!n){for(let e=0;e<l.length;e+=1)G(s[e]);n=!0}},o(e){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)ee(s[e]);n=!1},d(e){v(s,e),e&&g(t)}}}function Yn(e){let t,n;return t=new Nn({props:{message:e[13],field:e[10].field,label:e[10].label}}),{c(){ie(t.$$.fragment)},m(e,l){oe(t,e,l),n=!0},p(e,n){const l={};5&n&&(l.message=e[13]),1&n&&(l.field=e[10].field),1&n&&(l.label=e[10].label),t.$set(l)},i(e){n||(G(t.$$.fragment,e),n=!0)},o(e){ee(t.$$.fragment,e),n=!1},d(e){ce(t,e)}}}function Jn(e){let t,n,l,s;t=new zn({props:{label:e[10].label,inlineLabel:e[10].inlineLabel,hint:e[10].hint,$$slots:{default:[qn]},$$scope:{ctx:e}}});let i=e[2][e[10].field]&&Hn(e);return{c(){ie(t.$$.fragment),n=y(),i&&i.c(),l=w()},m(e,o){oe(t,e,o),m(e,n,o),i&&i.m(e,o),m(e,l,o),s=!0},p(e,n){const s={};1&n&&(s.label=e[10].label),1&n&&(s.inlineLabel=e[10].inlineLabel),1&n&&(s.hint=e[10].hint),524291&n&&(s.$$scope={dirty:n,ctx:e}),t.$set(s),e[2][e[10].field]?i?(i.p(e,n),5&n&&G(i,1)):(i=Hn(e),i.c(),G(i,1),i.m(l.parentNode,l)):i&&(K(),ee(i,1,1,(()=>{i=null})),Z())},i(e){s||(G(t.$$.fragment,e),G(i),s=!0)},o(e){ee(t.$$.fragment,e),ee(i),s=!1},d(e){ce(t,e),e&&g(n),i&&i.d(e),e&&g(l)}}}function Vn(e){let t,n,l=e[7].inputs,s=[];for(let t=0;t<l.length;t+=1)s[t]=Jn(An(e,l,t));const i=e=>ee(s[e],1,1,(()=>{s[e]=null}));return{c(){for(let e=0;e<s.length;e+=1)s[e].c();t=y()},m(e,l){for(let t=0;t<s.length;t+=1)s[t].m(e,l);m(e,t,l),n=!0},p(e,n){if(7&n){let o;for(l=e[7].inputs,o=0;o<l.length;o+=1){const i=An(e,l,o);s[o]?(s[o].p(i,n),G(s[o],1)):(s[o]=Jn(i),s[o].c(),G(s[o],1),s[o].m(t.parentNode,t))}for(K(),o=l.length;o<s.length;o+=1)i(o);Z()}},i(e){if(!n){for(let e=0;e<l.length;e+=1)G(s[e]);n=!0}},o(e){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)ee(s[e]);n=!1},d(e){v(s,e),e&&g(t)}}}function Xn(e){let t,n;return t=new Sn({props:{label:e[7].label,wide:e[7].wide,$$slots:{default:[Vn]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(e,l){oe(t,e,l),n=!0},p(e,n){const l={};1&n&&(l.label=e[7].label),1&n&&(l.wide=e[7].wide),524295&n&&(l.$$scope={dirty:n,ctx:e}),t.$set(l)},i(e){n||(G(t.$$.fragment,e),n=!0)},o(e){ee(t.$$.fragment,e),n=!1},d(e){ce(t,e)}}}function Rn(e){let t,n,l,s,i,o,c,r,a,u,f,d,p,w,x,k=e[0].label+"",Q=e[0].info+"",M=e[0].buttons,S=[];for(let t=0;t<M.length;t+=1)S[t]=Bn(In(e,M,t));let T=e[0].class.sections,O=[];for(let t=0;t<T.length;t+=1)O[t]=Xn(Pn(e,T,t));const C=e=>ee(O[e],1,1,(()=>{O[e]=null}));return{c(){t=b("header"),n=b("i"),s=y(),i=b("div"),o=b("div"),c=$(k),r=y(),a=b("div"),u=$(Q),f=y(),d=b("nav");for(let e=0;e<S.length;e+=1)S[e].c();p=y(),w=b("main");for(let e=0;e<O.length;e+=1)O[e].c();_(n,"class",l="icon "+e[0].icon+" Q8nwlse"),_(o,"class","label Q8nwlse"),_(a,"class","info Q8nwlse"),_(d,"class","nav Q8nwlse"),_(t,"class","Q8nwlse"),_(w,"class","Q8nwlse")},m(e,l){m(e,t,l),h(t,n),h(t,s),h(t,i),h(i,o),h(o,c),h(i,r),h(i,a),h(a,u),h(t,f),h(t,d);for(let e=0;e<S.length;e+=1)S[e].m(d,null);m(e,p,l),m(e,w,l);for(let e=0;e<O.length;e+=1)O[e].m(w,null);x=!0},p(e,[t]){if((!x||1&t&&l!==(l="icon "+e[0].icon+" Q8nwlse"))&&_(n,"class",l),(!x||1&t)&&k!==(k=e[0].label+"")&&E(c,k),(!x||1&t)&&Q!==(Q=e[0].info+"")&&E(u,Q),1&t){let n;for(M=e[0].buttons,n=0;n<M.length;n+=1){const l=In(e,M,n);S[n]?S[n].p(l,t):(S[n]=Bn(l),S[n].c(),S[n].m(d,null))}for(;n<S.length;n+=1)S[n].d(1);S.length=M.length}if(7&t){let n;for(T=e[0].class.sections,n=0;n<T.length;n+=1){const l=Pn(e,T,n);O[n]?(O[n].p(l,t),G(O[n],1)):(O[n]=Xn(l),O[n].c(),G(O[n],1),O[n].m(w,null))}for(K(),n=T.length;n<O.length;n+=1)C(n);Z()}},i(e){if(!x){for(let e=0;e<T.length;e+=1)G(O[e]);x=!0}},o(e){O=O.filter(Boolean);for(let e=0;e<O.length;e+=1)ee(O[e]);x=!1},d(e){e&&g(t),v(S,e),e&&g(p),e&&g(w),v(O,e)}}}function Un(e,t,n){let l,s,{doc:i}=t,o=i.item;c(e,o,(e=>n(1,l=e)));let r=i.validationErrors;c(e,r,(e=>n(2,s=e))),i.load();return e.$$set=e=>{"doc"in e&&n(0,i=e.doc)},[i,l,s,o,r,e=>e.onClick(i),function(t,n){e.$$.not_equal(l[n.field],t)&&(l[n.field]=t,o.set(l))}]}class Wn{constructor(e,t){this.label=e,this.wide=t,this.inputs=[]}add(...e){return e.forEach((e=>this.inputs.push(e))),this}}class Kn extends ft{constructor(){super(...arguments),this.validationErrors=we([]),this._item={id:null},this.item=we(this._item)}get class(){return Object.getPrototypeOf(this).constructor}static create(e,t,n,l,s,i,o,c=(e=>"id: "+e.id)){return Object.assign(class extends(this){},{$idPrefix:e,list:t,icon:n,buttons:s,label:o,sections:i,fetcher:l,info:c})}get label(){return this.class.label(this._item)}get info(){return this.class.info(this._item)}get list(){return this.class.list}get exists(){return"number"==typeof this._item.id}get buttons(){return this.class.buttons}load(){this.class.fetcher.get(this.id).then((e=>{this._item=e,this.item.set(e),this.id=e.id,at.update((e=>e))})).catch((e=>{throw this.close(),e}))}save(){this.validationErrors.set({}),this.class.fetcher.save(this.id,this._item).then((e=>ke.success("Saved successfully"))).then((e=>{this.list.reload(),this.load()})).catch((e=>{throw e instanceof Xt&&e.response.json().then((e=>{let t={};e.forEach((e=>{void 0===t[e.field]&&(t[e.field]=[]),t[e.field].push(e.message)})),this.validationErrors.set(t)})),e}))}delete(){confirm("You are about to delete:\n"+this.label+"\nAre you sure?")&&this.class.fetcher.delete(this.id).then((()=>this.close())).then((()=>this.list.reload()))}static addSection(e,t=!1){let n=new Wn(e,t);return this.sections.push(n),n}static createSection(e,t=!1){return new Wn(e,t)}}Kn.component=class extends ae{constructor(e){super(),re(this,e,Un,Rn,o,{doc:0})}},Kn.sections=[];class Zn{constructor(e){this.api=e}get(e,t){return fetch(this.api+e+"/"+t).then(kn)}upload(e,t,n){let l=new FormData;return l.append("file",t),l.append("collection",e),fetch(this.api+"upload/"+n,{method:"POST",body:l}).then(kn)}modify(e,t,n){return fetch(this.api+"modify/"+e,{method:"POST",body:JSON.stringify({filename:t,data:n})}).then(kn)}remove(e,t,n){return fetch(this.api+"delete/"+t,{method:"POST",body:JSON.stringify({filename:n,collection:e})}).then(kn)}order(e,t,n,l){return fetch(this.api+"order/"+e,{method:"POST",body:JSON.stringify({collection:t,index:l,filename:n})}).then(kn)}add(e,t,n,l){return fetch(this.api+"add/"+e,{method:"POST",body:JSON.stringify({collection:t,filename:n,from:l})}).then(kn)}}function Gn(t){let n,l,s;return{c(){n=b("input"),_(n,"type","text"),_(n,"class","Qecdhov")},m(e,i){m(e,n,i),M(n,t[0]),l||(s=x(n,"input",t[2]),l=!0)},p(e,[t]){1&t&&n.value!==e[0]&&M(n,e[0])},i:e,o:e,d(e){e&&g(n),l=!1,s()}}}function el(e,t,n){let{value:l=""}=t,{name:s=""}=t;return e.$$set=e=>{"value"in e&&n(0,l=e.value),"name"in e&&n(1,s=e.name)},[l,s,function(){l=this.value,n(0,l)}]}class tl{constructor(e,t=null){this.field=e,this.label=t,this.properties={},this.inlineLabel=!0,this.label=null!==this.label?this.label:this.field}get compact(){return this.inlineLabel=!0,this}get wide(){return this.inlineLabel=!1,this}get component(){return Object.getPrototypeOf(this).constructor.component}addHint(e){return this.hint=e,this}}class nl extends tl{}function ll(t){let n,l,s;return{c(){n=b("input"),_(n,"type","checkbox"),_(n,"class","Q91bogf")},m(e,i){m(e,n,i),n.checked=t[0],l||(s=x(n,"change",t[2]),l=!0)},p(e,[t]){1&t&&(n.checked=e[0])},i:e,o:e,d(e){e&&g(n),l=!1,s()}}}function sl(e,t,n){let{value:l=!1}=t,{name:s=""}=t;return e.$$set=e=>{"value"in e&&n(0,l=e.value),"name"in e&&n(1,s=e.name)},[l,s,function(){l=this.checked,n(0,l)}]}nl.component=class extends ae{constructor(e){super(),re(this,e,el,Gn,o,{value:0,name:1})}};class il extends tl{inline(){}}function ol(t){let n,l,i;return{c(){n=b("input"),_(n,"type","text"),_(n,"class","Qecdhov")},m(e,s){m(e,n,s),M(n,t[0]),l||(i=[x(n,"input",t[3]),x(n,"input",t[1])],l=!0)},p(e,[t]){1&t&&n.value!==e[0]&&M(n,e[0])},i:e,o:e,d(e){e&&g(n),l=!1,s(i)}}}function cl(e,t,n){let{name:l=""}=t,{value:s="0"}=t,i=s;return e.$$set=e=>{"name"in e&&n(2,l=e.name),"value"in e&&n(0,s=e.value)},[s,function(){if(""===s)return n(0,s="0");if("0-"===s||"-"===s)return n(0,s="-0");let e=parseInt(s);isNaN(e)?n(0,s=i):n(0,s=e.toString()),i=s},l,function(){s=this.value,n(0,s)}]}il.component=class extends ae{constructor(e){super(),re(this,e,sl,ll,o,{value:0,name:1})}};class rl extends tl{}function al(t){let n,l,i;return{c(){n=b("input"),_(n,"type","text"),_(n,"class","Qecdhov")},m(e,s){m(e,n,s),M(n,t[0]),l||(i=[x(n,"input",t[3]),x(n,"input",t[1])],l=!0)},p(e,[t]){1&t&&n.value!==e[0]&&M(n,e[0])},i:e,o:e,d(e){e&&g(n),l=!1,s(i)}}}function ul(e,t,n){let{name:l=""}=t,{value:s="0"}=t,i=s;return e.$$set=e=>{"name"in e&&n(2,l=e.name),"value"in e&&n(0,s=e.value)},[s,function(){if(""===s)return n(0,s="0");if("0-"===s||"-"===s)return n(0,s="-0");let e=parseFloat(s);isNaN(e)?n(0,s=i):n(0,s=e.toString()),Math.ceil(e)===e&&n(0,s+=".0"),i=s},l,function(){s=this.value,n(0,s)}]}rl.component=class extends ae{constructor(e){super(),re(this,e,cl,ol,o,{name:2,value:0})}};class fl extends tl{}function dl(e,t,n){const l=e.slice();return l[5]=t[n],l}function pl(e){let t,n,l,s,i,o,c,r,a=e[5].label+"";return{c(){t=b("label"),n=b("input"),i=y(),o=$(a),_(n,"type","checkbox"),n.value=l=e[5].value,n.checked=s=e[0].indexOf(e[5].value)>=0,_(n,"class","Q11xkb35"),_(t,"class","Q11xkb35")},m(l,s){m(l,t,s),h(t,n),h(t,i),h(t,o),c||(r=x(n,"change",e[3]),c=!0)},p(e,t){2&t&&l!==(l=e[5].value)&&(n.value=l),3&t&&s!==(s=e[0].indexOf(e[5].value)>=0)&&(n.checked=s),2&t&&a!==(a=e[5].label+"")&&E(o,a)},d(e){e&&g(t),c=!1,r()}}}function hl(t){let n,l=t[1],s=[];for(let e=0;e<l.length;e+=1)s[e]=pl(dl(t,l,e));return{c(){n=b("main");for(let e=0;e<s.length;e+=1)s[e].c();_(n,"class","Q11xkb35"),C(n,"inline",t[2])},m(e,t){m(e,n,t);for(let e=0;e<s.length;e+=1)s[e].m(n,null)},p(e,[t]){if(11&t){let i;for(l=e[1],i=0;i<l.length;i+=1){const o=dl(e,l,i);s[i]?s[i].p(o,t):(s[i]=pl(o),s[i].c(),s[i].m(n,null))}for(;i<s.length;i+=1)s[i].d(1);s.length=l.length}4&t&&C(n,"inline",e[2])},i:e,o:e,d(e){e&&g(n),v(s,e)}}}function ml(e,t,n){let{value:l=[]}=t,{options:s=[]}=t,{inline:i}=t,{name:o=""}=t;return e.$$set=e=>{"value"in e&&n(0,l=e.value),"options"in e&&n(1,s=e.options),"inline"in e&&n(2,i=e.inline),"name"in e&&n(4,o=e.name)},[l,s,i,function(e){let t=e.target.value,n=l.indexOf(t);-1===n?l.push(t):l.splice(n,1)},o]}fl.component=class extends ae{constructor(e){super(),re(this,e,ul,al,o,{name:2,value:0})}};class gl extends tl{constructor(){super(...arguments),this.props={options:[],inline:!1}}get inline(){return this.props.inline=!0,this}options(e){let t=[];if(e instanceof Array)e.forEach((e=>{"string"==typeof e?t.push({value:e,label:e}):void 0!==e.label&&void 0!==e.value?t.push({value:e.value,label:e.label}):t.push({value:Object.keys(e)[0],label:e[Object.keys(e)[0]]})}));else{Object.keys(e).forEach((n=>t.push({value:n,label:e[n]})))}return this.props.options=t,this}}function vl(e,t,n){const l=e.slice();return l[5]=t[n],l}function bl(e){let t,n,l,s,i,o,c,r,a=e[5].label+"";return{c(){t=b("label"),n=b("input"),i=y(),o=$(a),_(n,"name",e[2]),_(n,"type","radio"),n.value=l=e[5].value,n.checked=s=e[5].value===e[0],_(n,"class","Qf4zgwr"),_(t,"class","Qf4zgwr")},m(l,s){m(l,t,s),h(t,n),h(t,i),h(t,o),c||(r=x(n,"input",e[3]),c=!0)},p(e,t){4&t&&_(n,"name",e[2]),2&t&&l!==(l=e[5].value)&&(n.value=l),3&t&&s!==(s=e[5].value===e[0])&&(n.checked=s),2&t&&a!==(a=e[5].label+"")&&E(o,a)},d(e){e&&g(t),c=!1,r()}}}function $l(t){let n,l=t[1],s=[];for(let e=0;e<l.length;e+=1)s[e]=bl(vl(t,l,e));return{c(){n=b("main");for(let e=0;e<s.length;e+=1)s[e].c();_(n,"class","Qf4zgwr")},m(e,t){m(e,n,t);for(let e=0;e<s.length;e+=1)s[e].m(n,null)},p(e,[t]){if(15&t){let i;for(l=e[1],i=0;i<l.length;i+=1){const o=vl(e,l,i);s[i]?s[i].p(o,t):(s[i]=bl(o),s[i].c(),s[i].m(n,null))}for(;i<s.length;i+=1)s[i].d(1);s.length=l.length}},i:e,o:e,d(e){e&&g(n),v(s,e)}}}function yl(e,t,n){let{value:l=""}=t,{options:s=[]}=t,{inline:i}=t,{name:o=""}=t;return e.$$set=e=>{"value"in e&&n(0,l=e.value),"options"in e&&n(1,s=e.options),"inline"in e&&n(4,i=e.inline),"name"in e&&n(2,o=e.name)},[l,s,o,function(e){n(0,l=e.target.value)},i]}gl.component=class extends ae{constructor(e){super(),re(this,e,ml,hl,o,{value:0,options:1,inline:2,name:4})}};class wl extends tl{constructor(){super(...arguments),this.props={options:[],inline:!1}}get inline(){return this.props.inline=!0,this}options(e){let t=[];if(e instanceof Array)e.forEach((e=>{"string"==typeof e?t.push({value:e,label:e}):void 0!==e.label&&void 0!==e.value?t.push({value:e.value,label:e.label}):t.push({value:Object.keys(e)[0],label:e[Object.keys(e)[0]]})}));else{Object.keys(e).forEach((n=>t.push({value:n,label:e[n]})))}return this.props.options=t,this}}function xl(e,t,n){const l=e.slice();return l[5]=t[n],l}function kl(e){let t,n,l,s=e[5].label+"";return{c(){t=b("option"),n=$(s),t.__value=l=e[5].value,t.value=t.__value},m(e,l){m(e,t,l),h(t,n)},p(e,i){2&i&&s!==(s=e[5].label+"")&&E(n,s),2&i&&l!==(l=e[5].value)&&(t.__value=l,t.value=t.__value)},d(e){e&&g(t)}}}function Ql(t){let n,l,s,i=t[1],o=[];for(let e=0;e<i.length;e+=1)o[e]=kl(xl(t,i,e));return{c(){n=b("select");for(let e=0;e<o.length;e+=1)o[e].c();_(n,"name",t[2]),_(n,"class","Q34nr8x"),void 0===t[0]&&Y((()=>t[3].call(n)))},m(e,i){m(e,n,i);for(let e=0;e<o.length;e+=1)o[e].m(n,null);T(n,t[0]),l||(s=x(n,"change",t[3]),l=!0)},p(e,[t]){if(2&t){let l;for(i=e[1],l=0;l<i.length;l+=1){const s=xl(e,i,l);o[l]?o[l].p(s,t):(o[l]=kl(s),o[l].c(),o[l].m(n,null))}for(;l<o.length;l+=1)o[l].d(1);o.length=i.length}4&t&&_(n,"name",e[2]),3&t&&T(n,e[0])},i:e,o:e,d(e){e&&g(n),v(o,e),l=!1,s()}}}function _l(e,t,n){let{value:l=""}=t,{options:s=[]}=t,{name:i=""}=t;return e.$$set=e=>{"value"in e&&n(0,l=e.value),"options"in e&&n(1,s=e.options),"name"in e&&n(2,i=e.name)},[l,s,i,function(){l=O(this),n(0,l),n(1,s)}]}wl.component=class extends ae{constructor(e){super(),re(this,e,yl,$l,o,{value:0,options:1,inline:4,name:2})}};class El extends tl{constructor(){super(...arguments),this.props={options:[]}}options(e){let t=[];if(e instanceof Array)e.forEach((e=>{"string"==typeof e?t.push({value:e,label:e}):void 0!==e.label&&void 0!==e.value?t.push({value:e.value,label:e.label}):t.push({value:Object.keys(e)[0],label:e[Object.keys(e)[0]]})}));else{Object.keys(e).forEach((n=>t.push({value:n,label:e[n]})))}return this.props.options=t,this}}function Ml(t){let n,l,i,o;return{c(){n=b("div"),l=b("textarea"),_(l,"class","Q1tywl61"),C(l,"code",t[1]),_(n,"data-replicated-value",t[0]),_(n,"class","Q1tywl61"),C(n,"growing",!0),C(n,"code",t[1])},m(e,s){m(e,n,s),h(n,l),M(l,t[0]),i||(o=[x(l,"keydown",Sl),x(l,"input",t[3])],i=!0)},p(e,[t]){1&t&&M(l,e[0]),2&t&&C(l,"code",e[1]),1&t&&_(n,"data-replicated-value",e[0]),2&t&&C(n,"code",e[1])},i:e,o:e,d(e){e&&g(n),i=!1,s(o)}}}function Sl(e){let t=e.target;if(9===e.keyCode){let n=t.value,l=t.selectionStart,s=t.selectionEnd;t.value=n.substring(0,l)+"\t"+n.substring(s),t.selectionStart=t.selectionEnd=l+1,e.preventDefault()}}function Tl(e,t,n){let{value:l=""}=t,{name:s=""}=t,{code:i=!1}=t;return e.$$set=e=>{"value"in e&&n(0,l=e.value),"name"in e&&n(2,s=e.name),"code"in e&&n(1,i=e.code)},[l,i,s,function(){l=this.value,n(0,l)}]}El.component=class extends ae{constructor(e){super(),re(this,e,_l,Ql,o,{value:0,options:1,name:2})}};class Ol extends tl{constructor(){super(...arguments),this.props={code:!1}}get code(){return this.props.code=!0,this}}function Cl(t){let n,l,i,o,c;return{c(){n=b("input"),l=y(),i=b("input"),_(n,"type","text"),_(n,"maxlength","7"),_(n,"minlength","7"),_(n,"class","Q1npq0or"),_(i,"type","color"),_(i,"class","Q1npq0or")},m(e,s){m(e,n,s),M(n,t[0]),m(e,l,s),m(e,i,s),M(i,t[0]),o||(c=[x(n,"input",t[2]),x(i,"input",t[3])],o=!0)},p(e,[t]){1&t&&n.value!==e[0]&&M(n,e[0]),1&t&&M(i,e[0])},i:e,o:e,d(e){e&&g(n),e&&g(l),e&&g(i),o=!1,s(c)}}}function jl(e,t,n){let{value:l=""}=t,{name:s=""}=t;return e.$$set=e=>{"value"in e&&n(0,l=e.value),"name"in e&&n(1,s=e.name)},[l,s,function(){l=this.value,n(0,l)},function(){l=this.value,n(0,l)}]}Ol.component=class extends ae{constructor(e){super(),re(this,e,Tl,Ml,o,{value:0,name:2,code:1})}};class zl extends tl{}function Ll(t){let n,l,s;return{c(){n=b("input"),_(n,"type","time"),_(n,"class","Qecdhov")},m(e,i){m(e,n,i),M(n,t[0]),l||(s=x(n,"input",t[2]),l=!0)},p(e,[t]){1&t&&M(n,e[0])},i:e,o:e,d(e){e&&g(n),l=!1,s()}}}function Fl(e,t,n){let{value:l=""}=t,{name:s=""}=t;return e.$$set=e=>{"value"in e&&n(0,l=e.value),"name"in e&&n(1,s=e.name)},[l,s,function(){l=this.value,n(0,l)}]}zl.component=class extends ae{constructor(e){super(),re(this,e,jl,Cl,o,{value:0,name:1})}};class Nl extends tl{}function Pl(t){let n,l,i;return{c(){n=b("input"),_(n,"type","datetime-local"),_(n,"class","Qecdhov")},m(e,s){m(e,n,s),M(n,t[0]),l||(i=[x(n,"input",t[1]),x(n,"input",t[4])],l=!0)},p(e,[t]){1&t&&M(n,e[0])},i:e,o:e,d(e){e&&g(n),l=!1,s(i)}}}function Al(e,t=!1,n=!1){if(""===e||null===e)return null;if(e instanceof Date||(e=new Date(e)),isNaN(e))return null;let l;return e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2)+(t?"T":" ")+("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)+":"+("0"+e.getSeconds()).slice(-2)+(n?(l=(new Date).getTimezoneOffset())?(l>0?"-":"+")+("0"+Math.floor(Math.abs(l)/60)).slice(-2)+":"+("0"+Math.floor(Math.abs(l)%60)).slice(-2):"Z":"")}function Dl(e,t,n){let l,{value:s=""}=t,{name:i=""}=t;return e.$$set=e=>{"value"in e&&n(2,s=e.value),"name"in e&&n(3,i=e.name)},e.$$.update=()=>{4&e.$$.dirty&&n(0,l=Al(s,!0))},[l,function(e){let t=e.target.value;n(2,s=Al(t,!0,!0)),console.log(s)},s,i,function(){l=this.value,n(0,l),n(2,s)}]}Nl.component=class extends ae{constructor(e){super(),re(this,e,Fl,Ll,o,{value:0,name:1})}};class Il extends tl{}function Bl(e,t,n){const l=e.slice();return l[15]=t[n],l}function ql(e,t,n){const l=e.slice();return l[18]=t[n],l}function Hl(e){let t,n,l,s,i=e[18].value+"";function o(){return e[11](e[18])}return{c(){t=b("div"),n=$(i),_(t,"class","Q1y396tp")},m(e,i){m(e,t,i),h(t,n),l||(s=x(t,"click",o),l=!0)},p(t,l){e=t,4&l&&i!==(i=e[18].value+"")&&E(n,i)},d(e){e&&g(t),l=!1,s()}}}function Yl(e){let t,n=e[1],l=[];for(let t=0;t<n.length;t+=1)l[t]=Vl(Bl(e,n,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=w()},m(e,n){for(let t=0;t<l.length;t+=1)l[t].m(e,n);m(e,t,n)},p(e,s){if(99&s){let i;for(n=e[1],i=0;i<n.length;i+=1){const o=Bl(e,n,i);l[i]?l[i].p(o,s):(l[i]=Vl(o),l[i].c(),l[i].m(t.parentNode,t))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(e){v(l,e),e&&g(t)}}}function Jl(e){let t,n,l;function s(){return e[13](e[15])}return{c(){t=b("i"),_(t,"class","open fas fa-external-link Q1y396tp")},m(e,i){m(e,t,i),n||(l=x(t,"click",s),n=!0)},p(t,n){e=t},d(e){e&&g(t),n=!1,l()}}}function Vl(e){let t,n,l,s,i,o,c,r,a,u,f,d,p=e[15].value+"",v=e[15].id+"";function w(){return e[12](e[15])}let k=e[0]&&Jl(e);return{c(){t=b("span"),n=b("i"),l=y(),s=b("span"),i=$(p),o=$(" ("),c=$(v),r=$(")"),a=y(),k&&k.c(),u=y(),_(n,"class","remove fas fa-times Q1y396tp"),_(s,"class","Q1y396tp"),_(t,"class","Q1y396tp")},m(e,p){m(e,t,p),h(t,n),h(t,l),h(t,s),h(s,i),h(s,o),h(s,c),h(s,r),h(t,a),k&&k.m(t,null),h(t,u),f||(d=x(n,"click",w),f=!0)},p(n,l){e=n,2&l&&p!==(p=e[15].value+"")&&E(i,p),2&l&&v!==(v=e[15].id+"")&&E(c,v),e[0]?k?k.p(e,l):(k=Jl(e),k.c(),k.m(t,u)):k&&(k.d(1),k=null)},d(e){e&&g(t),k&&k.d(),f=!1,d()}}}function Xl(t){let n,l,s,i,o,c,r,a,u=t[2],f=[];for(let e=0;e<u.length;e+=1)f[e]=Hl(ql(t,u,e));let d=null!==t[1]&&Yl(t);return{c(){n=b("main"),l=b("input"),s=y(),i=b("div");for(let e=0;e<f.length;e+=1)f[e].c();o=y(),c=b("div"),d&&d.c(),_(l,"type","text"),_(l,"placeholder","search"),_(l,"class","Q1y396tp"),_(i,"class","options Q1y396tp"),_(c,"class","values Q1y396tp"),_(n,"class","Q1y396tp")},m(e,u){m(e,n,u),h(n,l),h(n,s),h(n,i);for(let e=0;e<f.length;e+=1)f[e].m(i,null);h(n,o),h(n,c),d&&d.m(c,null),r||(a=x(l,"input",t[3]),r=!0)},p(e,[t]){if(20&t){let n;for(u=e[2],n=0;n<u.length;n+=1){const l=ql(e,u,n);f[n]?f[n].p(l,t):(f[n]=Hl(l),f[n].c(),f[n].m(i,null))}for(;n<f.length;n+=1)f[n].d(1);f.length=u.length}null!==e[1]?d?d.p(e,t):(d=Yl(e),d.c(),d.m(c,null)):d&&(d.d(1),d=null)},i:e,o:e,d(e){e&&g(n),v(f,e),d&&d.d(),r=!1,a()}}}function Rl(e,t,n){let{value:l=""}=t,{api:s=""}=t,{name:i=""}=t,{Form:o=null}=t,{multi:c=!1}=t,r=[],a="",u=[];function f(e){c?(l instanceof Array||n(7,l=[]),n(7,l=[...new Set([...l,e])])):n(7,l=e)}function d(e){if(c){var t=l.indexOf(e);-1!==t&&l.splice(t,1),n(7,l=[...l])}else n(7,l="")}function p(e){o.open(e)}F((()=>{null===l&&n(7,l=[]),l!==a&&(0===l.length?n(1,r=[]):fetch(s+"/get/"+l).then((e=>e.json().then((e=>n(1,r=e))))),a=l)}));return e.$$set=e=>{"value"in e&&n(7,l=e.value),"api"in e&&n(8,s=e.api),"name"in e&&n(9,i=e.name),"Form"in e&&n(0,o=e.Form),"multi"in e&&n(10,c=e.multi)},[o,r,u,function(e){e.target.value.trim().length>=3?fetch(s+"/search/"+e.target.value).then((e=>e.json())).then((e=>n(2,u=e))):n(2,u=[])},f,d,p,l,s,i,c,e=>f(e.id),e=>d(e.id),e=>p(e.id)]}Il.component=class extends ae{constructor(e){super(),re(this,e,Dl,Pl,o,{value:2,name:3})}};class Ul extends tl{constructor(){super(...arguments),this.props={api:"",multi:!1,Form:null}}api(e){return this.props.api=e,this}form(e){return this.props.Form=e,this}get multi(){return this.props.multi=!0,this}}function Wl(t){let n,l,s,i;return{c(){n=b("button"),l=$(t[0]),_(n,"class","Q6zjvl8")},m(e,o){m(e,n,o),h(n,l),s||(i=x(n,"click",t[1]),s=!0)},p(e,[t]){1&t&&E(l,e[0])},i:e,o:e,d(e){e&&g(n),s=!1,i()}}}function Kl(e,t,n){let{value:l=""}=t,{name:s=""}=t,{Editor:i=null}=t,{buttonText:o="Open"}=t;function c(e){n(2,l=e)}return e.$$set=e=>{"value"in e&&n(2,l=e.value),"name"in e&&n(3,s=e.name),"Editor"in e&&n(4,i=e.Editor),"buttonText"in e&&n(0,o=e.buttonText)},[o,function(){At.show(i,{value:l,save:c})},l,s,i]}Ul.component=class extends ae{constructor(e){super(),re(this,e,Rl,Xl,o,{value:7,api:8,name:9,Form:0,multi:10})}};class Zl extends tl{constructor(){super(...arguments),this.props={Editor:null,buttonText:"Open Editor"}}editor(e){return this.props.Editor=e,this}buttonText(e){return this.props.buttonText=e,this}}function Gl(e,t,n){const l=e.slice();return l[8]=t[n],l}function es(e){let t,n=e[0],l=[];for(let t=0;t<n.length;t+=1)l[t]=ts(Gl(e,n,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=w()},m(e,n){for(let t=0;t<l.length;t+=1)l[t].m(e,n);m(e,t,n)},p(e,s){if(3&s){let i;for(n=e[0],i=0;i<n.length;i+=1){const o=Gl(e,n,i);l[i]?l[i].p(o,s):(l[i]=ts(o),l[i].c(),l[i].m(t.parentNode,t))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(e){v(l,e),e&&g(t)}}}function ts(e){let t,n,l,s,i,o,c,r,a,u,f,d,p=e[8].value+"",v=e[8].id+"";function w(){return e[6](e[8])}return{c(){t=b("span"),n=$(p),l=y(),s=b("i"),i=$("("),o=$(v),c=$(")"),r=y(),a=b("i"),u=y(),_(s,"class","Q10d2l6t"),_(a,"class","open fas fa-external-link Q10d2l6t"),_(t,"class","Q10d2l6t")},m(e,p){m(e,t,p),h(t,n),h(t,l),h(t,s),h(s,i),h(s,o),h(s,c),h(t,r),h(t,a),h(t,u),f||(d=x(t,"click",w),f=!0)},p(t,l){e=t,1&l&&p!==(p=e[8].value+"")&&E(n,p),1&l&&v!==(v=e[8].id+"")&&E(o,v)},d(e){e&&g(t),f=!1,d()}}}function ns(t){let n,l,s=t[0]&&es(t);return{c(){n=b("main"),l=b("div"),s&&s.c(),_(l,"class","values Q10d2l6t"),_(n,"class","Q10d2l6t")},m(e,t){m(e,n,t),h(n,l),s&&s.m(l,null)},p(e,[t]){e[0]?s?s.p(e,t):(s=es(e),s.c(),s.m(l,null)):s&&(s.d(1),s=null)},i:e,o:e,d(e){e&&g(n),s&&s.d()}}}function ls(e,t,n){let{value:l=""}=t,{api:s=""}=t,{name:i=""}=t,{Form:o=null}=t,c=[],r="";function a(e){o.open(e)}F((()=>{l!==r&&(0===l.length?n(0,c=[]):fetch(s+"/get/"+l).then((e=>e.json().then((e=>n(0,c=e))))),r=l)}));return e.$$set=e=>{"value"in e&&n(2,l=e.value),"api"in e&&n(3,s=e.api),"name"in e&&n(4,i=e.name),"Form"in e&&n(5,o=e.Form)},[c,a,l,s,i,o,e=>a(e.id)]}Zl.component=class extends ae{constructor(e){super(),re(this,e,Kl,Wl,o,{value:2,name:3,Editor:4,buttonText:0})}};class ss extends tl{constructor(){super(...arguments),this.props={api:"",Form:null}}api(e){return this.props.api=e,this}form(e){return this.props.Form=e,this}}ss.component=class extends ae{constructor(e){super(),re(this,e,ls,ns,o,{value:2,api:3,name:4,Form:5})}};class is{static create(e,t,n,l,s,i,o=(e=>"id: "+e.id)){return Object.assign(class extends Kn{},{$idPrefix:e,list:t,icon:n,buttons:s,label:i,fetcher:l,info:o,sections:[]})}}is.Doc=Kn,is.Fetcher=class{constructor(e){this.api=e,this.api=this.api+"/",this.attachment=new Zn(this.api+"attachments/")}get(e){return fetch(this.api+(null!==e?e:"blank")).then(kn)}save(e,t){return fetch(this.api+(null!==e?e:"new"),{method:"POST",body:JSON.stringify({item:t})}).then(kn)}delete(e){return fetch(this.api+e,{method:"DELETE"}).then(kn)}},is.Section=Wn,is.inputs=class{static string(e,t=null){return new nl(e,t)}static checkbox(e,t=null){return new il(e,t)}static checkboxes(e,t=null){return new gl(e,t)}static integer(e,t=null){return new rl(e,t)}static float(e,t=null){return new fl(e,t)}static radio(e,t=null){return new wl(e,t)}static time(e,t=null){return new Nl(e,t)}static select(e,t=null){return new El(e,t)}static text(e,t=null){return new Ol(e,t)}static color(e,t=null){return new zl(e,t)}static date(e,t=null){return new Il(e,t)}static datetime(e,t=null){return new Il(e,t)}static selector(e,t=null){return new Ul(e,t)}static editor(e,t=null){return new Zl(e,t)}static related(e,t=null){return new ss(e,t)}};class os{constructor(e,t,n,l=(e=>!0)){this.icon=e,this.label=t,this.onClick=n,this.active=l}}const cs=e=>({}),rs=e=>({}),as=e=>({}),us=e=>({});function fs(e){let t,n,l,s,i,o,c,a,f,d,p;const v=e[7].nav,w=r(v,e,e[9],us),x=e[7].default,k=r(x,e,e[9],null),Q=e[7].footer,M=r(Q,e,e[9],rs);return{c(){t=b("main"),n=b("header"),l=b("i"),s=y(),i=b("div"),o=$(e[1]),c=y(),w&&w.c(),a=y(),f=b("section"),k&&k.c(),d=y(),M&&M.c(),_(l,"class",e[0]),_(t,"class","modalify"),C(t,"big",e[2]),C(t,"full",e[3]),C(t,"rounded",e[4])},m(r,u){m(r,t,u),h(t,n),h(n,l),h(n,s),h(n,i),h(i,o),h(n,c),w&&w.m(n,null),h(t,a),h(t,f),k&&k.m(f,null),h(t,d),M&&M.m(t,null),e[8](t),p=!0},p(e,n){(!p||1&n)&&_(l,"class",e[0]),(!p||2&n)&&E(o,e[1]),w&&w.p&&512&n&&u(w,v,e,e[9],n,as,us),k&&k.p&&512&n&&u(k,x,e,e[9],n,null,null),M&&M.p&&512&n&&u(M,Q,e,e[9],n,cs,rs),4&n&&C(t,"big",e[2]),8&n&&C(t,"full",e[3]),16&n&&C(t,"rounded",e[4])},i(e){p||(G(w,e),G(k,e),G(M,e),p=!0)},o(e){ee(w,e),ee(k,e),ee(M,e),p=!1},d(n){n&&g(t),w&&w.d(n),k&&k.d(n),M&&M.d(n),e[8](null)}}}function ds(e){let t,n;return t=new $e({props:{icon:!1,$$slots:{default:[fs]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(e,l){oe(t,e,l),n=!0},p(e,[n]){const l={};575&n&&(l.$$scope={dirty:n,ctx:e}),t.$set(l)},i(e){n||(G(t.$$.fragment,e),n=!0)},o(e){ee(t.$$.fragment,e),n=!1},d(e){ce(t,e)}}}function ps(e,t,n){let l,{$$slots:s={},$$scope:i}=t,{icon:o="inverse fad fa-atom"}=t,{title:c="Magic"}=t,{big:r=!1}=t,{full:a=!1}=t,{rounded:u=!1}=t;return e.$$set=e=>{"icon"in e&&n(0,o=e.icon),"title"in e&&n(1,c=e.title),"big"in e&&n(2,r=e.big),"full"in e&&n(3,a=e.full),"rounded"in e&&n(4,u=e.rounded),"$$scope"in e&&n(9,i=e.$$scope)},[o,c,r,a,u,l,function(e=800){return console.log("CALLED"),new Promise((t=>{l.classList.add("shake"),setTimeout((()=>{l.classList.remove("shake"),t(this)}),e)}))},s,function(e){A[e?"unshift":"push"]((()=>{l=e,n(5,l)}))},i]}class hs extends ae{constructor(e){super(),re(this,e,ps,ds,o,{icon:0,title:1,big:2,full:3,rounded:4,shake:6})}get shake(){return this.$$.ctx[6]}}var ms=he((function(e,t){t.__esModule=!0,t.b=1,t.kb=1024,t.mb=t.kb*t.kb,t.gb=t.mb*t.kb,t.tb=t.gb*t.kb,t.pb=t.tb*t.kb,t.eb=t.pb*t.kb,t.zb=t.eb*t.kb,t.yb=t.zb*t.kb,t.units={b:t.b,kb:t.kb,mb:t.mb,gb:t.gb,tb:t.tb,pb:t.pb,eb:t.eb,zb:t.zb,yb:t.yb},t.parseFormat=/^((-|\+)?(\d+(?:\.\d+)?)) *(b|kb|mb|gb|tb|pb|eb|zb|yb)$/i,t.parseThousand=/\B(?=(\d{3})+(?!\d))/g})),gs=Object.defineProperty({formatToObject:function(e){var t=ms.parseFormat.exec(e);return{unit:t&&t[4],size:t&&parseFloat(t[1]),format:t&&t[0]}}},"__esModule",{value:!0}),vs=Object.defineProperty({toString:function(e,t){var n=void 0===t?{}:t,l=n.decimals,s=n.separator,i=void 0===s?"":s,o=n.everyThousand,c=void 0===o?"":o,r="B",a=e;return e>=0&&e<ms.kb?r="B":e>=ms.kb&&e<ms.mb?r="KB":e>=ms.mb&&e<ms.gb?r="MB":e>=ms.gb&&e<ms.tb?r="GB":e>=ms.tb&&e<ms.pb?r="TB":e>=ms.pb&&e<ms.eb?r="PB":e>=ms.eb&&e<ms.zb?r="EB":e>=ms.zb&&e<ms.yb?r="ZB":e>=ms.yb&&(r="YB"),a=e/ms.units[r.toLowerCase()],void 0!==l&&(a=a.toFixed(l)),a=""+a+i+r,""!==c&&(a=a.replace(ms.parseThousand,c)),a}},"__esModule",{value:!0}),bs=Object.defineProperty({toNumber:function(e){if(!isNaN(Number(e)))return Number(e);var t=gs.formatToObject(e);return t.unit&&t.size?ms.units[t.unit.toLowerCase()]*t.size:null}},"__esModule",{value:!0}),$s=Object.defineProperty({cbytes:function(e,t){return"number"==typeof e?vs.toString(e,t):"string"==typeof e?bs.toNumber(e):void 0}},"__esModule",{value:!0}),ys=Object.defineProperty({sizeToObject:function(e){var t=$s.cbytes(e);return gs.formatToObject(t)}},"__esModule",{value:!0}),ws=Object.defineProperty({objectToFormat:function(e,t){var n=(void 0===t?{separator:""}:t).separator;return e.format&&e.size+n+e.unit}},"__esModule",{value:!0}),xs=$s.cbytes,ks=$s.cbytes,Qs=vs.toString,_s=bs.toNumber,Es=ws.objectToFormat,Ms=gs.formatToObject,Ss=ys.sizeToObject;function Ts(e){let t,n,l,i,o,c,r,a,u,f,d,p,v,$,w,k,Q,E,M,S,T,O;return{c(){t=b("main"),n=b("div"),l=b("img"),o=y(),c=b("img"),u=y(),f=b("div"),p=y(),v=b("div"),w=y(),k=b("div"),E=y(),M=b("div"),_(l,"alt",""),_(l,"draggable","false"),_(l,"class","back Q13d6rkl"),l.src!==(i=e[0].url)&&_(l,"src",i),_(c,"alt",""),_(c,"style",r="clip: rect("+e[2].y+"px, "+(e[2].x+e[2].width)+"px, "+(e[2].y+e[2].height)+"px, "+e[2].x+"px)"),_(c,"draggable","false"),_(c,"class","front Q13d6rkl"),c.src!==(a=e[0].url)&&_(c,"src",a),_(f,"class","frame Q13d6rkl"),_(f,"style",d="top:"+e[2].y+"px;width:"+e[2].width+"px;height:"+e[2].height+"px;left:"+e[2].x+"px;"),_(v,"class","topleft Q13d6rkl"),_(v,"style",$="top:"+(e[2].y-5)+"px;left:"+(e[2].x-5)+"px;"),_(k,"class","bottomright Q13d6rkl"),_(k,"style",Q="top:"+(e[2].y+e[2].height-5)+"px;left:"+(e[2].x+e[2].width-5)+"px;"),_(M,"class","focus Q13d6rkl"),_(M,"style",S="top:"+(e[3].y-5)+"px;left:"+(e[3].x-5)+"px;"),_(n,"class","container Q13d6rkl"),_(t,"class","Q13d6rkl")},m(s,i){m(s,t,i),h(t,n),h(n,l),h(n,o),h(n,c),h(n,u),h(n,f),h(n,p),h(n,v),e[18](v),h(n,w),h(n,k),e[21](k),h(n,E),h(n,M),e[24](M),e[25](n),T||(O=[x(l,"load",e[12]),x(v,"mousedown",e[16]),x(v,"mouseup",e[17]),x(k,"mousedown",e[19]),x(k,"mouseup",e[20]),x(M,"mousedown",e[22]),x(M,"mouseup",e[23]),x(n,"mousemove",e[10])],T=!0)},p(e,t){1&t&&l.src!==(i=e[0].url)&&_(l,"src",i),4&t&&r!==(r="clip: rect("+e[2].y+"px, "+(e[2].x+e[2].width)+"px, "+(e[2].y+e[2].height)+"px, "+e[2].x+"px)")&&_(c,"style",r),1&t&&c.src!==(a=e[0].url)&&_(c,"src",a),4&t&&d!==(d="top:"+e[2].y+"px;width:"+e[2].width+"px;height:"+e[2].height+"px;left:"+e[2].x+"px;")&&_(f,"style",d),4&t&&$!==($="top:"+(e[2].y-5)+"px;left:"+(e[2].x-5)+"px;")&&_(v,"style",$),4&t&&Q!==(Q="top:"+(e[2].y+e[2].height-5)+"px;left:"+(e[2].x+e[2].width-5)+"px;")&&_(k,"style",Q),8&t&&S!==(S="top:"+(e[3].y-5)+"px;left:"+(e[3].x-5)+"px;")&&_(M,"style",S)},d(n){n&&g(t),e[18](null),e[21](null),e[24](null),e[25](null),T=!1,s(O)}}}function Os(t){let n,l,i,o,c,r;return{c(){n=b("nav"),l=b("button"),l.innerHTML='<i class="fas fa-crosshairs"></i>',i=y(),o=b("button"),o.innerHTML='<i class="fas fa-times"></i>',_(n,"slot","nav")},m(e,s){m(e,n,s),h(n,l),h(n,i),h(n,o),c||(r=[x(l,"click",t[9]),x(o,"click",t[11])],c=!0)},p:e,d(e){e&&g(n),c=!1,s(r)}}}function Cs(e){let t,n;return t=new hs({props:{icon:"inverse fad fa-image",title:"Edit image focus",$$slots:{nav:[Os],default:[Ts]},$$scope:{ctx:e}}}),e[26](t),{c(){ie(t.$$.fragment)},m(e,l){oe(t,e,l),n=!0},p(e,[n]){const l={};268435965&n&&(l.$$scope={dirty:n,ctx:e}),t.$set(l)},i(e){n||(G(t.$$.fragment,e),n=!0)},o(e){ee(t.$$.fragment,e),n=!1},d(n){e[26](null),ce(t,n)}}}function js(e,t,n){let l,s,i,{close:o}=t,{doc:c}=t,{file:r={}}=t,{reload:a=null}=t;if(null===r.safezone)s={x:10,y:10,width:r.width-20,height:r.height-20};else{let e=r.safezone,t=e.length/4;s={x:parseInt(e.substr(0,t),36),y:parseInt(e.substr(t,t),36),width:parseInt(e.substr(2*t,t),36),height:parseInt(e.substr(3*t,t),36)}}if(null===r.focus)i={x:Math.ceil(r.width/2),y:Math.ceil(r.height/2)};else{let e=r.focus,t=e.length/2;i={x:parseInt(e.substr(0,t),36),y:parseInt(e.substr(t,t),36)}}let u,f,d,p,h=1,m=null;return e.$$set=e=>{"close"in e&&n(13,o=e.close),"doc"in e&&n(14,c=e.doc),"file"in e&&n(0,r=e.file),"reload"in e&&n(15,a=e.reload)},[r,l,s,i,m,u,f,d,p,function(){n(2,s={x:10,y:10,width:r.width*h-20,height:r.height*h-20}),n(3,i={x:Math.ceil(r.width*h/2),y:Math.ceil(r.height*h/2)})},function(e){if(0===e.buttons&&n(4,m=!1),!m)return;let t=e.clientX-p.getBoundingClientRect().x,l=e.clientY-p.getBoundingClientRect().y;switch(m){case"bottomright":n(2,s.width=Math.floor(Math.max(10,t-s.x)),s),n(2,s.height=Math.floor(Math.max(10,l-s.y)),s);break;case"topleft":n(2,s.x=Math.floor(Math.min(r.width*h-10,Math.max(0,t))),s),n(2,s.y=Math.floor(Math.min(r.height*h-10,Math.max(0,l))),s);break;case"focus":n(3,i.x=Math.floor(Math.min(r.width*h,Math.max(0,t))),i),n(3,i.y=Math.floor(Math.min(r.height*h,Math.max(0,l))),i)}n(3,i.x=Math.max(Math.min(i.x,s.x+s.width),s.x),i),n(3,i.y=Math.max(Math.min(i.y,s.y+s.height),s.y),i),s.x+s.width>r.width*h&&n(2,s.width=r.width*h-s.x,s),s.y+s.height>r.height*h&&n(2,s.height=r.height*h-s.y,s)},function(){let e={safezone:Math.floor(s.x/h).toString(36).padStart(3,"0")+Math.floor(s.y/h).toString(36).padStart(3,"0")+Math.floor(s.width/h).toString(36).padStart(3,"0")+Math.floor(s.height/h).toString(36).padStart(3,"0"),focus:Math.floor(i.x/h).toString(36).padStart(3,"0")+Math.floor(i.y/h).toString(36).padStart(3,"0")};n(0,r.safezone=e.safezone,r),n(0,r.focus=e.focus,r),c.class.fetcher.attachment.modify(c.id,r.name,e).then(o).then(a)},function(){h=p.getBoundingClientRect().width/r.width,n(3,i.x*=h,i),n(3,i.y*=h,i),n(2,s.x*=h,s),n(2,s.y*=h,s),n(2,s.width*=h,s),n(2,s.height*=h,s)},o,c,a,()=>n(4,m="topleft"),()=>n(4,m=!1),function(e){A[e?"unshift":"push"]((()=>{f=e,n(6,f)}))},()=>n(4,m="bottomright"),()=>n(4,m=!1),function(e){A[e?"unshift":"push"]((()=>{d=e,n(7,d)}))},()=>n(4,m="focus"),()=>n(4,m=!1),function(e){A[e?"unshift":"push"]((()=>{u=e,n(5,u)}))},function(e){A[e?"unshift":"push"]((()=>{p=e,n(8,p)}))},function(e){A[e?"unshift":"push"]((()=>{l=e,n(1,l)}))}]}xs.cbytes=ks,xs.toString=Qs,xs.toNumber=_s,xs.objectToFormat=Es,xs.formatToObject=Ms,xs.sizeToObject=Ss;class zs extends ae{constructor(e){super(),re(this,e,js,Cs,o,{close:13,doc:14,file:0,reload:15})}}var Ls,Fs={image:"fa-file-image",pdf:"fa-file-pdf",word:"fa-file-word",powerpoint:"fa-file-powerpoint",excel:"fa-file-excel",csv:"fa-file-csv",audio:"fa-file-audio",video:"fa-file-video",archive:"fa-file-archive",code:"fa-file-code",text:"fa-file-alt",file:"fa-file"},Ns=Object.defineProperty({default:Fs},"__esModule",{value:!0}),Ps=(Ls=Ns)&&Ls.__esModule?Ls:{default:Ls};var As={gif:Ps.default.image,jpeg:Ps.default.image,jpg:Ps.default.image,png:Ps.default.image,pdf:Ps.default.pdf,doc:Ps.default.word,docx:Ps.default.word,ppt:Ps.default.powerpoint,pptx:Ps.default.powerpoint,xls:Ps.default.excel,xlsx:Ps.default.excel,csv:Ps.default.csv,aac:Ps.default.audio,mp3:Ps.default.audio,ogg:Ps.default.audio,avi:Ps.default.video,flv:Ps.default.video,mkv:Ps.default.video,mp4:Ps.default.video,gz:Ps.default.archive,zip:Ps.default.archive,css:Ps.default.code,html:Ps.default.code,js:Ps.default.code,txt:Ps.default.text},Ds=Object.defineProperty({default:As},"__esModule",{value:!0}),Is=function(e){return e&&e.__esModule?e:{default:e}}(Ns);var Bs={"image/gif":Is.default.image,"image/jpeg":Is.default.image,"image/png":Is.default.image,"application/pdf":Is.default.pdf,"application/msword":Is.default.word,"application/vnd.openxmlformats-officedocument.wordprocessingml.document":Is.default.word,"application/mspowerpoint":Is.default.powerpoint,"application/vnd.openxmlformats-officedocument.presentationml.presentation":Is.default.powerpoint,"application/msexcel":Is.default.excel,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":Is.default.excel,"text/csv":Is.default.csv,"audio/aac":Is.default.audio,"audio/wav":Is.default.audio,"audio/mpeg":Is.default.audio,"audio/mp4":Is.default.audio,"audio/ogg":Is.default.audio,"video/x-msvideo":Is.default.video,"video/mpeg":Is.default.video,"video/mp4":Is.default.video,"video/ogg":Is.default.video,"video/quicktime":Is.default.video,"video/webm":Is.default.video,"application/gzip":Is.default.archive,"application/zip":Is.default.archive,"text/css":Is.default.code,"text/html":Is.default.code,"text/javascript":Is.default.code,"application/javascript":Is.default.code,"text/plain":Is.default.text,"text/richtext":Is.default.text,"text/rtf":Is.default.text},qs=Object.defineProperty({default:Bs},"__esModule",{value:!0}),Hs=function(e){return Ys.default[e.toLowerCase()]||Js.default.file},Ys=Vs(Ds);Vs(qs);var Js=Vs(Ns);function Vs(e){return e&&e.__esModule?e:{default:e}}function Xs(e,t,n){const l=e.slice();return l[24]=t[n][0],l[25]=t[n][1],l[26]=t,l[27]=n,l}function Rs(e){let t,n,l,s,i,o=e[2].width+"",c=e[2].height+"";return{c(){t=b("div"),n=$("dimensions: "),l=$(o),s=$(" x "),i=$(c),_(t,"class","Qhud3le")},m(e,o){m(e,t,o),h(t,n),h(t,l),h(t,s),h(t,i)},p(e,t){4&t&&o!==(o=e[2].width+"")&&E(l,o),4&t&&c!==(c=e[2].height+"")&&E(i,c)},d(e){e&&g(t)}}}function Us(e){let t,n,l,i,o,c,r,a,u;function f(){e[20].call(n,e[26],e[27])}function d(){e[21].call(i,e[26],e[27])}function p(){return e[22](e[27])}return{c(){t=b("div"),n=b("input"),l=y(),i=b("input"),o=y(),c=b("i"),r=y(),_(n,"class","key Qhud3le"),_(n,"placeholder","key"),_(i,"class","value Qhud3le"),_(i,"placeholder","value"),_(c,"class","fas fa-minus-circle Qhud3le"),_(t,"class","property Qhud3le")},m(s,g){m(s,t,g),h(t,n),M(n,e[24]),h(t,l),h(t,i),M(i,e[25]),h(t,o),h(t,c),h(t,r),a||(u=[x(n,"input",f),x(i,"input",d),x(c,"click",p)],a=!0)},p(t,l){e=t,256&l&&n.value!==e[24]&&M(n,e[24]),256&l&&i.value!==e[25]&&M(i,e[25])},d(e){e&&g(t),a=!1,s(u)}}}function Ws(e){let t,n,l,i,o,c,r,a,u,f,d,p,w,k,Q,S,T,O,C,j,z,L,F,N,P,A=e[2].url+"",D=xs(e[2].size,{separator:"",decimals:1})+"",I=e[2].size.toLocaleString()+"",B=e[2].isImage&&Rs(e),q=e[8],H=[];for(let t=0;t<q.length;t+=1)H[t]=Us(Xs(e,q,t));return{c(){t=b("main"),n=b("div"),l=b("input"),i=y(),o=b("div"),c=b("input"),r=y(),a=b("div"),u=$("url: "),f=$(A),d=y(),p=b("div"),w=$("file size: "),k=$(D),Q=$(" ("),S=$(I),T=$(")"),O=y(),B&&B.c(),C=y(),j=b("div"),z=$("properties:"),L=b("i"),F=y();for(let e=0;e<H.length;e+=1)H[e].c();_(l,"placeholder","filename"),_(l,"type","text"),_(l,"class","Qhud3le"),_(n,"class","Qhud3le"),_(c,"placeholder","title"),_(c,"type","text"),_(c,"class","Qhud3le"),_(o,"class","Qhud3le"),_(a,"class","url Qhud3le"),_(p,"class","Qhud3le"),_(L,"class","fas fa-plus-circle Qhud3le"),_(j,"class","properties Qhud3le"),_(t,"class","Qhud3le")},m(s,g){m(s,t,g),h(t,n),h(n,l),M(l,e[5]),h(t,i),h(t,o),h(o,c),M(c,e[6]),h(t,r),h(t,a),h(a,u),h(a,f),h(t,d),h(t,p),h(p,w),h(p,k),h(p,Q),h(p,S),h(p,T),h(t,O),B&&B.m(t,null),h(t,C),h(t,j),h(j,z),h(j,L),h(t,F);for(let e=0;e<H.length;e+=1)H[e].m(t,null);N||(P=[x(l,"input",e[16]),x(c,"input",e[17]),x(a,"click",e[18]),x(L,"click",e[19])],N=!0)},p(e,n){if(32&n&&l.value!==e[5]&&M(l,e[5]),64&n&&c.value!==e[6]&&M(c,e[6]),4&n&&A!==(A=e[2].url+"")&&E(f,A),4&n&&D!==(D=xs(e[2].size,{separator:"",decimals:1})+"")&&E(k,D),4&n&&I!==(I=e[2].size.toLocaleString()+"")&&E(S,I),e[2].isImage?B?B.p(e,n):(B=Rs(e),B.c(),B.m(t,C)):B&&(B.d(1),B=null),1280&n){let l;for(q=e[8],l=0;l<q.length;l+=1){const s=Xs(e,q,l);H[l]?H[l].p(s,n):(H[l]=Us(s),H[l].c(),H[l].m(t,null))}for(;l<H.length;l+=1)H[l].d(1);H.length=q.length}},d(e){e&&g(t),B&&B.d(),v(H,e),N=!1,s(P)}}}function Ks(t){let n,l,s;return{c(){n=b("button"),n.innerHTML='<i class="fad fa-image"></i>'},m(e,i){m(e,n,i),l||(s=x(n,"click",t[15]),l=!0)},p:e,d(e){e&&g(n),l=!1,s()}}}function Zs(e){let t,n,l,o,c,r,a,u=e[2].isImage&&Ks(e);return{c(){t=b("nav"),u&&u.c(),n=y(),l=b("button"),l.innerHTML='<i class="fad fa-trash-alt"></i>',o=y(),c=b("button"),c.innerHTML='<i class="fas fa-times"></i>',_(t,"slot","nav")},m(s,f){m(s,t,f),u&&u.m(t,null),h(t,n),h(t,l),h(t,o),h(t,c),r||(a=[x(l,"click",e[13]),x(c,"click",(function(){i(e[0])&&e[0].apply(this,arguments)}))],r=!0)},p(l,s){(e=l)[2].isImage?u?u.p(e,s):(u=Ks(e),u.c(),u.m(t,n)):u&&(u.d(1),u=null)},d(e){e&&g(t),u&&u.d(),r=!1,s(a)}}}function Gs(t){let n,l,s,i;return{c(){n=b("footer"),l=b("button"),l.textContent="Save changes",_(l,"class","primary"),_(n,"slot","footer")},m(e,o){m(e,n,o),h(n,l),s||(i=x(l,"click",t[12]),s=!0)},p:e,d(e){e&&g(n),s=!1,i()}}}function ei(e){let t,n,l={icon:e[7],title:"File details",$$slots:{footer:[Gs],nav:[Zs],default:[Ws]},$$scope:{ctx:e}};return t=new hs({props:l}),e[23](t),{c(){ie(t.$$.fragment)},m(e,l){oe(t,e,l),n=!0},p(e,[n]){const l={};128&n&&(l.icon=e[7]),268435823&n&&(l.$$scope={dirty:n,ctx:e}),t.$set(l)},i(e){n||(G(t.$$.fragment,e),n=!0)},o(e){ee(t.$$.fragment,e),n=!1},d(n){e[23](null),ce(t,n)}}}function ti(e,t,n){let l,s,i,o,r,{collection:a=null}=t,{close:u}=t,{doc:f}=t,{file:p={}}=t,{reload:h=null}=t,m=we([]);function g(e){m.update((t=>(t.splice(e,1),t)))}function v(){m.update((e=>[...e,["",""]]))}c(e,m,(e=>n(8,s=e))),N((()=>{d(m,s="object"!=typeof p.properties||p.properties instanceof Array?[]:[...Object.entries(p.properties)],s),n(5,o=p.name),n(6,r=p.title)}));return e.$$set=e=>{"collection"in e&&n(14,a=e.collection),"close"in e&&n(0,u=e.close),"doc"in e&&n(1,f=e.doc),"file"in e&&n(2,p=e.file),"reload"in e&&n(3,h=e.reload)},e.$$.update=()=>{4&e.$$.dirty&&n(7,l="inverse fad "+Hs(p.name.split(".").pop()))},[u,f,p,h,i,o,r,l,s,m,g,v,function(){m.update((e=>e.map((e=>[e[0].trim(),e[1].trim()])))),m.update((e=>[...Object.entries(Object.fromEntries(e))]));let e={newname:o,title:r,properties:Object.fromEntries(s)};f.class.fetcher.attachment.modify(f.id,p.name,e).then(u).then(h)},function(){confirm("Remove file: "+p.name+"\nAre you sure?")&&f.class.fetcher.attachment.remove(a,f.id,p.name).then(u).then(h)},a,()=>{At.show(zs,{file:p,doc:f,reload:h})},function(){o=this.value,n(5,o)},function(){r=this.value,n(6,r)},()=>{navigator.clipboard.writeText(p.url),ke.info("URL copied to clipboard")},()=>v(),function(e,t){e[t][0]=this.value,m.set(s)},function(e,t){e[t][1]=this.value,m.set(s)},e=>g(e),function(e){A[e?"unshift":"push"]((()=>{i=e,n(4,i)}))}]}class ni extends ae{constructor(e){super(),re(this,e,ti,ei,o,{collection:14,close:0,doc:1,file:2,reload:3})}}function li(e){let t,n;return{c(){t=b("i"),_(t,"class",n=f(e[3])+" Q1fxwff1")},m(e,n){m(e,t,n)},p(e,l){8&l&&n!==(n=f(e[3])+" Q1fxwff1")&&_(t,"class",n)},d(e){e&&g(t)}}}function si(e){let t,n,l,s,i,o,c,r=e[0].width+"",a=e[0].height+"";return{c(){t=b("img"),l=y(),s=b("div"),i=$(r),o=$("x"),c=$(a),t.src!==(n=e[0].thumbnail)&&_(t,"src",n),_(t,"width","100"),_(t,"height","100"),_(t,"draggable","false"),_(s,"class","dimensions Q1fxwff1")},m(e,n){m(e,t,n),m(e,l,n),m(e,s,n),h(s,i),h(s,o),h(s,c)},p(e,l){1&l&&t.src!==(n=e[0].thumbnail)&&_(t,"src",n),1&l&&r!==(r=e[0].width+"")&&E(i,r),1&l&&a!==(a=e[0].height+"")&&E(c,a)},d(e){e&&g(t),e&&g(l),e&&g(s)}}}function ii(t){let n,l,i,o,c,r,a,u,f,d,p=t[0].name+"",v=xs(t[0].size,{separator:"",decimals:0})+"";function w(e,t){return e[0].isImage?si:li}let k=w(t),Q=k(t);return{c(){n=b("section"),l=b("div"),Q.c(),i=y(),o=b("span"),c=$(p),r=y(),a=b("span"),u=$(v),_(l,"class","preview Q1fxwff1"),_(o,"class","name Q1fxwff1"),_(a,"class","data Q1fxwff1"),_(n,"class","file Q1fxwff1"),_(n,"draggable","true"),C(n,"right",t[2]),C(n,"left",t[1])},m(e,s){m(e,n,s),h(n,l),Q.m(l,null),h(n,i),h(n,o),h(o,c),h(n,r),h(n,a),h(a,u),f||(d=[x(n,"click",t[4]),x(n,"dragleave",t[6]),x(n,"drop",t[8]),x(n,"dragstart",t[7]),x(n,"dragover",t[5])],f=!0)},p(e,[t]){k===(k=w(e))&&Q?Q.p(e,t):(Q.d(1),Q=k(e),Q&&(Q.c(),Q.m(l,null))),1&t&&p!==(p=e[0].name+"")&&E(c,p),1&t&&v!==(v=xs(e[0].size,{separator:"",decimals:0})+"")&&E(u,v),4&t&&C(n,"right",e[2]),2&t&&C(n,"left",e[1])},i:e,o:e,d(e){e&&g(n),Q.d(),f=!1,s(d)}}}function oi(e,t,n){let l,{file:s={}}=t,{doc:i=null}=t,{index:o=null}=t,{reload:c=null}=t,{collection:r=null}=t,a=!1,u=!1;return e.$$set=e=>{"file"in e&&n(0,s=e.file),"doc"in e&&n(9,i=e.doc),"index"in e&&n(10,o=e.index),"reload"in e&&n(11,c=e.reload),"collection"in e&&n(12,r=e.collection)},e.$$.update=()=>{1&e.$$.dirty&&n(3,l="fad "+Hs(s.name.split(".").pop()))},[s,a,u,l,function(){At.show(ni,{file:s,doc:i,reload:c,collection:r})},function(e){"attachment"===e.dataTransfer.types[0]&&r===e.dataTransfer.types[1]&&(e.target.clientWidth/2<e.offsetX?(n(2,u=!0),n(1,a=!1)):(n(1,a=!0),n(2,u=!1)),e.stopPropagation(),e.preventDefault())},function(e){n(1,a=!1),n(2,u=!1)},function(e){e.dataTransfer.setData("attachment","1"),e.dataTransfer.setData(r,"1"),e.dataTransfer.setData("file",s.name),e.dataTransfer.setData("collection",r)},function(e){"attachment"===e.dataTransfer.types[0]&&r===e.dataTransfer.types[1]&&(i.class.fetcher.attachment.order(i.id,r,e.dataTransfer.getData("file"),o+(u?1:0)).then(c),n(1,a=!1),n(2,u=!1))},i,o,c,r]}class ci extends ae{constructor(e){super(),re(this,e,oi,ii,o,{file:0,doc:9,index:10,reload:11,collection:12})}}function ri(e,t,n){const l=e.slice();return l[15]=t[n],l[17]=n,l}function ai(e){let t,n;return t=new ci({props:{file:e[15],doc:e[2],collection:e[0],reload:e[3],index:e[17]}}),{c(){ie(t.$$.fragment)},m(e,l){oe(t,e,l),n=!0},p(e,n){const l={};64&n&&(l.file=e[15]),4&n&&(l.doc=e[2]),1&n&&(l.collection=e[0]),8&n&&(l.reload=e[3]),t.$set(l)},i(e){n||(G(t.$$.fragment,e),n=!0)},o(e){ee(t.$$.fragment,e),n=!1},d(e){ce(t,e)}}}function ui(e){let t,n,l,i,o,c,r,a,u,f,d,p,w,Q,M,T,O=e[6],j=[];for(let t=0;t<O.length;t+=1)j[t]=ai(ri(e,O,t));const z=e=>ee(j[e],1,1,(()=>{j[e]=null}));return{c(){t=b("section"),n=b("input"),l=y(),i=b("div"),o=b("b"),c=$(e[1]),r=b("span"),a=$("("),u=$(e[0]),f=$(")"),d=b("i"),p=y(),w=b("div");for(let e=0;e<j.length;e+=1)j[e].c();n.multiple=!0,_(n,"type","file"),S(n,"display","none"),_(r,"class","Q1x3zdau"),_(d,"class","fas fa-folder-upload Q1x3zdau"),_(i,"class","block-label Q1x3zdau"),_(w,"class","files Q1x3zdau"),_(t,"class","block Q1x3zdau"),C(t,"over",e[5])},m(s,g){m(s,t,g),h(t,n),e[12](n),h(t,l),h(t,i),h(i,o),h(o,c),h(i,r),h(r,a),h(r,u),h(r,f),h(i,d),h(t,p),h(t,w);for(let e=0;e<j.length;e+=1)j[e].m(w,null);Q=!0,M||(T=[x(n,"change",e[8]),x(d,"click",e[13]),x(t,"dragover",e[9]),x(t,"drop",e[10]),x(t,"dragleave",e[14]),x(t,"dragover",k(fi))],M=!0)},p(e,[n]){if((!Q||2&n)&&E(c,e[1]),(!Q||1&n)&&E(u,e[0]),77&n){let t;for(O=e[6],t=0;t<O.length;t+=1){const l=ri(e,O,t);j[t]?(j[t].p(l,n),G(j[t],1)):(j[t]=ai(l),j[t].c(),G(j[t],1),j[t].m(w,null))}for(K(),t=O.length;t<j.length;t+=1)z(t);Z()}32&n&&C(t,"over",e[5])},i(e){if(!Q){for(let e=0;e<O.length;e+=1)G(j[e]);Q=!0}},o(e){j=j.filter(Boolean);for(let e=0;e<j.length;e+=1)ee(j[e]);Q=!1},d(n){n&&g(t),e[12](null),v(j,n),M=!1,s(T)}}}const fi=()=>{};function di(e,t,n){let l,s,{name:i=""}=t,{label:o=""}=t,{doc:r=null}=t,{reload:a=null}=t,u=we([]);c(e,u,(e=>n(6,l=e)));let{get:f=(()=>{r.class.fetcher.attachment.get(r.id,i).then((e=>d(u,l=null!=e?e:[],l)))})}=t;f();let p=!1;return e.$$set=e=>{"name"in e&&n(0,i=e.name),"label"in e&&n(1,o=e.label),"doc"in e&&n(2,r=e.doc),"reload"in e&&n(3,a=e.reload),"get"in e&&n(11,f=e.get)},[i,o,r,a,s,p,l,u,function(){let e=[];[...s.files].forEach((t=>{e.push(r.class.fetcher.attachment.upload(i,t,r.id))})),Promise.all(e).then((e=>f())).then((()=>n(4,s.value="",s)))},function(e){"attachment"===e.dataTransfer.types[0]&&e.dataTransfer.types[1]!==i&&n(5,p=!0)},function(e){p&&r.class.fetcher.attachment.add(r.id,i,e.dataTransfer.getData("file"),e.shiftKey?null:e.dataTransfer.getData("collection")).then(a),n(5,p=!1)},f,function(e){A[e?"unshift":"push"]((()=>{s=e,n(4,s)}))},()=>{s.click()},()=>n(5,p=!1)]}class pi extends ae{constructor(e){super(),re(this,e,di,ui,o,{name:0,label:1,doc:2,reload:3,get:11})}get name(){return this.$$.ctx[0]}set name(e){this.$set({name:e}),X()}get label(){return this.$$.ctx[1]}set label(e){this.$set({label:e}),X()}get doc(){return this.$$.ctx[2]}set doc(e){this.$set({doc:e}),X()}get reload(){return this.$$.ctx[3]}set reload(e){this.$set({reload:e}),X()}get get(){return this.$$.ctx[11]}set get(e){this.$set({get:e}),X()}}function hi(e,t,n){const l=e.slice();return l[10]=t[n],l[11]=t,l[12]=n,l}function mi(e){let t,n,l=e[12];const s=()=>e[8](t,l),i=()=>e[8](null,l);let o={name:e[10].name,label:e[10].label,doc:e[1],reload:e[5]};return t=new pi({props:o}),s(),{c(){ie(t.$$.fragment)},m(e,l){oe(t,e,l),n=!0},p(e,n){l!==e[12]&&(i(),l=e[12],s());const o={};4&n&&(o.name=e[10].name),4&n&&(o.label=e[10].label),2&n&&(o.doc=e[1]),t.$set(o)},i(e){n||(G(t.$$.fragment,e),n=!0)},o(e){ee(t.$$.fragment,e),n=!1},d(e){i(),ce(t,e)}}}function gi(e){let t,n,l=e[2],s=[];for(let t=0;t<l.length;t+=1)s[t]=mi(hi(e,l,t));const i=e=>ee(s[e],1,1,(()=>{s[e]=null}));return{c(){t=b("main");for(let e=0;e<s.length;e+=1)s[e].c();_(t,"class","Q1y0tsmp")},m(e,l){m(e,t,l);for(let e=0;e<s.length;e+=1)s[e].m(t,null);n=!0},p(e,n){if(54&n){let o;for(l=e[2],o=0;o<l.length;o+=1){const i=hi(e,l,o);s[o]?(s[o].p(i,n),G(s[o],1)):(s[o]=mi(i),s[o].c(),G(s[o],1),s[o].m(t,null))}for(K(),o=l.length;o<s.length;o+=1)i(o);Z()}},i(e){if(!n){for(let e=0;e<l.length;e+=1)G(s[e]);n=!0}},o(e){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)ee(s[e]);n=!1},d(e){e&&g(t),v(s,e)}}}function vi(e){let t,n,l,s;return{c(){t=b("nav"),n=b("button"),n.innerHTML='<i class="fas fa-times"></i>',_(t,"slot","nav")},m(o,c){m(o,t,c),h(t,n),l||(s=x(n,"click",(function(){i(e[0])&&e[0].apply(this,arguments)})),l=!0)},p(t,n){e=t},d(e){e&&g(t),l=!1,s()}}}function bi(e){let t,n;return t=new hs({props:{icon:"inverse fad fa-folder-open",title:"Attachments",big:!0,$$slots:{nav:[vi],default:[gi]},$$scope:{ctx:e}}}),e[9](t),{c(){ie(t.$$.fragment)},m(e,l){oe(t,e,l),n=!0},p(e,[n]){const l={};8215&n&&(l.$$scope={dirty:n,ctx:e}),t.$set(l)},i(e){n||(G(t.$$.fragment,e),n=!0)},o(e){ee(t.$$.fragment,e),n=!1},d(n){e[9](null),ce(t,n)}}}function $i(e,t,n){let l,{value:s=""}=t,{name:i=""}=t,{close:o=(()=>console.log("close"))}=t,{doc:c}=t,{categories:r=null}=t;let a=[];return e.$$set=e=>{"value"in e&&n(6,s=e.value),"name"in e&&n(7,i=e.name),"close"in e&&n(0,o=e.close),"doc"in e&&n(1,c=e.doc),"categories"in e&&n(2,r=e.categories)},[o,c,r,l,a,function(){a.forEach((e=>e.get()))},s,i,function(e,t){A[e?"unshift":"push"]((()=>{a[t]=e,n(4,a)}))},function(e){A[e?"unshift":"push"]((()=>{l=e,n(3,l)}))}]}class yi extends ae{constructor(e){super(),re(this,e,$i,bi,o,{value:6,name:7,close:0,doc:1,categories:2})}}let wi=Ke.create("Users","fad fa-users",[],100,[We.Sorting("név",!0).asc("name")],new Qn("/magic/user"),xn.Component,(e=>xn.Cardify(e.id,(()=>xi.open(e.id)),e.name,null!==e.publishDate,null,"https://picsum.photos/50/50?"+Math.random(),[],[xn.Property("created",e.created),xn.Property("updated",e.updated)],[]))),xi=is.create("user",wi,"fad fa-user",new is.Fetcher("/magic/user"),[new os("fad fa-folder-open","attachments",(e=>At.show(yi,{doc:e,categories:[{name:"avatar",label:"avatár"}]})),(e=>e.exists)),new os("fad fa-save","save",(e=>e.save())),new os("fas fa-times","delete",(e=>e.delete()),(e=>e.exists))],(e=>{var t;return null!==(t=e.name)&&void 0!==t?t:"new user"}));xi.addSection("Adatok",!1).add(is.inputs.string("name"),is.inputs.string("email"),is.inputs.select("group").options(["admin","moderator","visitor"]),is.inputs.string("setpassword"));let ki=Ke.create("Articles","fad fa-newspaper",[We.Action("fas fa-recycle",null,(e=>e.reload())),We.Action("fas fa-plus",null,(e=>Qi.open(null)))],100,[We.Sorting("publikálva",!0).asc("publishDate")],new Qn("/magic/article"),xn.Component,(e=>xn.Cardify(e.id,(()=>Qi.open(e.id)),e.title,null!==e.publishDate,"https://picsum.photos/380/120?"+Math.random(),"https://picsum.photos/50/50?"+Math.random(),[xn.Icon("fas","fa-newspaper","yellow"),xn.Icon("fas","fa-users","orangered","useresfaszaság")],[xn.Property("megjelenés",e.publishDate),xn.Property("guid",e.guid)],[xn.Action("fas fa-plus","büff",(e=>e.reload())),xn.Action("fas fa-minus","baff",(t=>console.log(e.title)))]))),Qi=is.create("article",ki,"fad fa-newspaper",new is.Fetcher("/magic/article"),[new os("fad fa-folder-open","attachments",(e=>At.show(yi,{doc:e,categories:[{name:"image",label:"kép"},{name:"avatar",label:"avatár"},{name:"file",label:"letöltés"}]})),(e=>e.exists)),new os("fad fa-save","save",(e=>e.save())),new os("fas fa-times","delete",(e=>e.delete()),(e=>e.exists))],(e=>{var t;return null!==(t=e.title)&&void 0!==t?t:"új cikk"}));Qi.addSection("Adatok",!1).add(is.inputs.string("title","cím"),is.inputs.checkbox("status"),is.inputs.datetime("publishDate"),is.inputs.selector("authorId").api("/api/user-selector").form(xi),is.inputs.color("iconColor"),is.inputs.string("icon")),Qi.addSection("Meta",!1).add(is.inputs.string("permalink"),is.inputs.string("metaKeywords"),is.inputs.text("metaDescription"),is.inputs.selector("relatedIds").api("/api/article-selector").multi.form(Qi)),Qi.addSection("Content",!0).add(is.inputs.text("lead").code.wide,is.inputs.text("body").code.wide);let _i=[Pe.List("Articles","fad fa-newspaper",ki).activate(),Pe.List("Users","fad fa-users",wi)];var Ei=he((function(e,t){!function(e){function t(e,t,n,l){if(t){if("string"==typeof e&&(e=document.querySelector(e)),document.createEvent){var s=document.createEvent("Events");s.initEvent(t,!0,!1),s.data=n,s.originalEvent=l,e.dispatchEvent(s)}}else console.error("No event was provided. You do need to provide one.")}window.navigator.pointerEnabled?(e.eventstart="pointerdown",e.eventend="pointerup",e.eventmove="pointermove",e.eventcancel="pointercancel"):window.navigator.msPointerEnabled?(e.eventstart="MSPointerDown",e.eventend="MSPointerUp",e.eventmove="MSPointerMove",e.eventcancel="MSPointerCancel"):"ontouchstart"in window?(e.eventstart="touchstart",e.eventend="touchend",e.eventmove="touchmove",e.eventcancel="touchcancel"):(e.eventstart="mousedown",e.eventend="mouseup",e.eventmove="mousemove",e.eventcancel="mouseout"),e.trigger=t,e.gestures=function(){var n=Math.abs;function l(e){return"tagName"in e?e:e.parentNode}function s(e,t,l,s){return n(e-t)>=n(l-s)?0<e-t?"left":"right":0<l-s?"up":"down"}function i(e){if(f=null,m.last)try{m&&m.el&&(t(m.el,"longtap",null,e),m={})}catch(e){}}function o(){f&&clearTimeout(f),f=null}function c(){r&&clearTimeout(r),u&&clearTimeout(u),a&&clearTimeout(a),f&&clearTimeout(f),r=u=a=f=null,m={}}var r,a,u,f,d,p,h,m={},g=150,v=20;/android/gim.test(navigator.userAgent)&&(g=200),(h=document.body).addEventListener(e.eventstart,(function(t){if(d=Date.now(),p=d-(m.last||d),"mousedown"===e.eventstart)m.el=l(t.target),"ripple"===t.target.nodeName&&(m.el=t.target.parentNode),r&&clearTimeout(r),m.x1=t.pageX,m.y1=t.pageY;else if(1===t.touches.length){if(t.target.disabled)return;m.el=l(t.touches[0].target),r&&clearTimeout(r),m.x1=t.touches[0].pageX,m.y1=t.touches[0].pageY}0<p&&450>=p&&(m.isDoubleTap=!0),m.last=d,f=setTimeout(i,750,t)})),h.addEventListener(e.eventmove,(function(t){o(),"mousemove"===e.eventmove?(m.x2=t.pageX,m.y2=t.pageY):1===t.touches.length?(m.x2=t.touches[0].pageX,m.y2=t.touches[0].pageY,m.move=!0):t.touches.length})),h.addEventListener(e.eventend,(function(e){o(),!m.el||(m.x2&&n(m.x1-m.x2)>v||m.y2&&n(m.y1-m.y2)>v?a=setTimeout((function(){if(m&&m.el){var n=s(m.x1,m.x2,m.y1,m.y2);t(m.el,"swipe",n,e),t(m.el,"swipe"+n,null,e),m={}}}),0):"last"in m&&(u=setTimeout((function(){m&&m.isDoubleTap?m&&m.el&&(t(m.el,"dbltap",null,e),e.preventDefault(),m={}):r=setTimeout((function(){r=null,m&&m.el&&!m.move?(t(m.el,"tap",null,e),m={}):c()}),g)}),0)))})),h.addEventListener("touchcancel",c)},e.disableTextSelection=function(e,t){if(e){t&&"string"==typeof e?Array.prototype.slice.call(document.querySelectorAll(e)).map((function(e){e.classList.add("disable-user-select")})):"string"==typeof e&&(e=document.querySelector(e)).classList.add("disable-user-select");var n=document.head.querySelector(".disable-user-select");n||((n=document.createElement("style")).className="disable-user-select",n.innerHTML=".disable-user-select, .disable-user-select * { user-select: none; -webkit-user-select: none; -ms-user-select: none; }",document.head.appendChild(n))}},e.enableTextSelection=function(e,t){if(t&&"string"==typeof e)Array.prototype.slice.call(document.querySelectorAll(e)).map((function(e){e.classList.remove("disable-user-select")}));else{if("string"==typeof e&&(e=document.querySelector(e)),!e)return;e.classList.remove("disable-user-select")}},Object.defineProperty(e,"__esModule",{value:!0})}(t)}));window.addEventListener("load",(()=>{Ei.gestures(),_e.update((e=>Object.assign(Object.assign({},e),{menu:_i,lists:[ki,wi]}))),new ln({target:document.body})}))}();
//# sourceMappingURL=index.js.map
