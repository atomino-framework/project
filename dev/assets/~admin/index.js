!function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function l(){return Object.create(null)}function i(t){t.forEach(n)}function s(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(e,n,l){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const l=e.subscribe(...n);return l.unsubscribe?()=>l.unsubscribe():l}(n,l))}function r(t,e,n,l){if(t){const i=a(t,e,n,l);return t[0](i)}}function a(t,n,l,i){return t[1]&&i?e(l.ctx.slice(),t[1](i(n))):l.ctx}function u(t,e,n,l,i,s,o){const c=function(t,e,n,l){if(t[2]&&l){const i=t[2](l(n));if(void 0===e.dirty)return i;if("object"==typeof i){const t=[],n=Math.max(e.dirty.length,i.length);for(let l=0;l<n;l+=1)t[l]=e.dirty[l]|i[l];return t}return e.dirty|i}return e.dirty}(e,l,i,s);if(c){const i=a(e,n,l,o);t.p(i,c)}}function f(t){return null==t?"":t}function d(t,e,n=e){return t.set(n),e}function h(e){return e&&s(e.destroy)?e.destroy:t}function p(t,e){t.appendChild(e)}function m(t,e,n){t.insertBefore(e,n||null)}function g(t){t.parentNode.removeChild(t)}function $(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function v(t){return document.createElement(t)}function b(t){return document.createTextNode(t)}function y(){return b(" ")}function x(){return b("")}function w(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function k(t){return function(e){return e.preventDefault(),t.call(this,e)}}function Q(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function _(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function E(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function M(t,e){t.value=null==e?"":e}function S(t,e,n,l){t.style.setProperty(e,n,l?"important":"")}function O(t,e){for(let n=0;n<t.options.length;n+=1){const l=t.options[n];if(l.__value===e)return void(l.selected=!0)}}function z(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function C(t,e,n){t.classList[n?"add":"remove"](e)}let T;function j(t){T=t}function F(){if(!T)throw new Error("Function called outside component initialization");return T}function L(t){F().$$.before_update.push(t)}function N(t){F().$$.on_mount.push(t)}const A=[],P=[],B=[],I=[],q=Promise.resolve();let D=!1;function H(){D||(D=!0,q.then(R))}function J(t){B.push(t)}let V=!1;const Y=new Set;function R(){if(!V){V=!0;do{for(let t=0;t<A.length;t+=1){const e=A[t];j(e),U(e.$$)}for(j(null),A.length=0;P.length;)P.pop()();for(let t=0;t<B.length;t+=1){const e=B[t];Y.has(e)||(Y.add(e),e())}B.length=0}while(A.length);for(;I.length;)I.pop()();D=!1,V=!1,Y.clear()}}function U(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(J)}}const W=new Set;let K;function X(){K={r:0,c:[],p:K}}function Z(){K.r||i(K.c),K=K.p}function G(t,e){t&&t.i&&(W.delete(t),t.i(e))}function tt(t,e,n,l){if(t&&t.o){if(W.has(t))return;W.add(t),K.c.push((()=>{W.delete(t),l&&(n&&t.d(1),l())})),t.o(e)}}function et(t,e){const n=e.token={};function l(t,l,i,s){if(e.token!==n)return;e.resolved=s;let o=e.ctx;void 0!==i&&(o=o.slice(),o[i]=s);const c=t&&(e.current=t)(o);let r=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==l&&t&&(X(),tt(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),Z())})):e.block.d(1),c.c(),G(c,1),c.m(e.mount(),e.anchor),r=!0),e.block=c,e.blocks&&(e.blocks[l]=c),r&&R()}if((i=t)&&"object"==typeof i&&"function"==typeof i.then){const n=F();if(t.then((t=>{j(n),l(e.then,1,e.value,t),j(null)}),(t=>{if(j(n),l(e.catch,2,e.error,t),j(null),!e.hasCatch)throw t})),e.current!==e.pending)return l(e.pending,0),!0}else{if(e.current!==e.then)return l(e.then,1,e.value,t),!0;e.resolved=t}var i}function nt(t,e){const n={},l={},i={$$scope:1};let s=t.length;for(;s--;){const o=t[s],c=e[s];if(c){for(const t in o)t in c||(l[t]=1);for(const t in c)i[t]||(n[t]=c[t],i[t]=1);t[s]=c}else for(const t in o)i[t]=1}for(const t in l)t in n||(n[t]=void 0);return n}function lt(t){return"object"==typeof t&&null!==t?t:{}}function it(t,e,n){const l=t.$$.props[e];void 0!==l&&(t.$$.bound[l]=n,n(t.$$.ctx[l]))}function st(t){t&&t.c()}function ot(t,e,l,o){const{fragment:c,on_mount:r,on_destroy:a,after_update:u}=t.$$;c&&c.m(e,l),o||J((()=>{const e=r.map(n).filter(s);a?a.push(...e):i(e),t.$$.on_mount=[]})),u.forEach(J)}function ct(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function rt(e,n,s,o,c,r,a=[-1]){const u=T;j(e);const f=e.$$={fragment:null,ctx:null,props:r,update:t,not_equal:c,bound:l(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:n.context||[]),callbacks:l(),dirty:a,skip_bound:!1};let d=!1;if(f.ctx=s?s(e,n.props||{},((t,n,...l)=>{const i=l.length?l[0]:n;return f.ctx&&c(f.ctx[t],f.ctx[t]=i)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](i),d&&function(t,e){-1===t.$$.dirty[0]&&(A.push(t),H(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n})):[],f.update(),d=!0,i(f.before_update),f.fragment=!!o&&o(f.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);f.fragment&&f.fragment.l(t),t.forEach(g)}else f.fragment&&f.fragment.c();n.intro&&G(e.$$.fragment),ot(e,n.target,n.anchor,n.customElement),R()}j(u)}class at{$destroy(){ct(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function ut(t,e="body"){let n;async function l(l){if("string"==typeof(e=l)){if(n=document.querySelector(e),null===n&&(await(H(),q),n=document.querySelector(e)),null===n)throw new Error(`No element found matching css selector: "${e}"`)}else{if(!(e instanceof HTMLElement))throw new TypeError(`Unknown portal target type: ${null===e?"null":typeof e}. Allowed types: string (CSS selector) or HTMLElement.`);n=e}n.appendChild(t),t.hidden=!1}return l(e),{update:l,destroy:function(){t.parentNode&&t.parentNode.removeChild(t)}}}function ft(t){let e,n;return{c(){e=v("i"),_(e,"class",n=f("icon "+t[0])+" Q2nr7df")},m(t,n){m(t,e,n)},p(t,l){1&l&&n!==(n=f("icon "+t[0])+" Q2nr7df")&&_(e,"class",n)},d(t){t&&g(e)}}}function dt(t){let e,n,l,i,s,o;const c=t[2].default,a=r(c,t,t[1],null);let f=t[0]&&ft(t);return{c(){e=v("main"),n=v("section"),a&&a.c(),l=y(),f&&f.c(),_(n,"class","Q2nr7df"),_(e,"class","Q2nr7df")},m(t,c){m(t,e,c),p(e,n),a&&a.m(n,null),p(n,l),f&&f.m(n,null),i=!0,s||(o=h(ut.call(null,e,"body")),s=!0)},p(t,[e]){a&&a.p&&(!i||2&e)&&u(a,c,t,t[1],e,null,null),t[0]?f?f.p(t,e):(f=ft(t),f.c(),f.m(n,null)):f&&(f.d(1),f=null)},i(t){i||(G(a,t),i=!0)},o(t){tt(a,t),i=!1},d(t){t&&g(e),a&&a.d(t),f&&f.d(),s=!1,o()}}}function ht(t,e,n){let{$$slots:l={},$$scope:i}=e,{icon:s="fad fa-spinner fa-pulse"}=e;return t.$$set=t=>{"icon"in t&&n(0,s=t.icon),"$$scope"in t&&n(1,i=t.$$scope)},[s,i,l]}class pt extends at{constructor(t){super(),rt(this,t,ht,dt,o,{icon:0})}}const mt=[];function gt(e,n=t){let l;const i=[];function s(t){if(o(e,t)&&(e=t,l)){const t=!mt.length;for(let t=0;t<i.length;t+=1){const n=i[t];n[1](),mt.push(n,e)}if(t){for(let t=0;t<mt.length;t+=2)mt[t][0](mt[t+1]);mt.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(o,c=t){const r=[o,c];return i.push(r),1===i.length&&(l=n(s)||t),o(e),()=>{const t=i.indexOf(r);-1!==t&&i.splice(t,1),0===i.length&&(l(),l=null)}}}}let $t=gt([]);const vt=new class{info(t,e="",n="far fa-info-circle",l=3e3){this.add("info",e,t,n,l)}success(t,e="",n="far fa-check",l=3e3){this.add("success",e,t,n,l)}error(t,e="",n="far fa-exclamation-circle",l=3e3){this.add("error",e,t,n,l)}add(t,e="",n,l="far fa-user",i=3e3){let s={type:t,info:e,label:n,icon:l,hide:!1};$t.update((t=>[s,...t])),setTimeout((()=>{s.hide=!0,$t.update((t=>t))}),i),setTimeout((()=>{$t.update((t=>{let e=t.indexOf(s);return t.splice(e,1),t}))}),i+300)}},bt=gt(null),yt=gt({menu:[],lists:[],defaultAvatar:"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='iso-8859-1'%3F%3E%3Csvg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 456.001 456.001' style='enable-background:new 0 0 456.001 456.001;' xml:space='preserve'%3E%3Cg%3E%3Cpath style='fill:%23E69F5F;' d='M379.893,168c0-41.334-40.667-168-104-168c-34,0-48,8-48,8s-14-8-48-8 c-63.334,0-104,126.667-104,168c0,36,20,51.333,24,64c5.405,17.117,0,40,0,40c34,27,96,32,96,32h64c0,0,62-5,96-32 c0,0-5.405-22.883,0-40C359.893,219.333,379.893,204,379.893,168z'/%3E%3Cpath style='fill:%23E09156;' d='M75.892,168c0,36,20,51.333,24,64c5.405,17.117,0,40,0,40c34,27,96,32,96,32l17.709-11.068 c-0.326-38.588-1.708-84.932-1.708-84.932l-96-72c0,0,174-56.667,112-128c0,0-14-8-48-8C116.559,0,75.892,126.667,75.892,168z'/%3E%3Cpath style='fill:%23F6B47B;' d='M387.863,414.878l-0.726-6.536c-0.287-2.586-2.616-4.449-5.201-4.161l-0.407,0.045l-7.027-56.214 c-1.529-12.228-9.943-22.492-21.634-26.389l-39.047-13.016c-5.375-1.792-11.273-0.644-15.409,2.9l-11.579-3.86 c-6.534-2.178-10.94-8.292-10.94-15.179v-25.802l34.461-14.359c17.887-7.453,29.539-24.93,29.539-44.308v-8 c13.255,0,24-10.745,24-24s-10.745-24-24-24v-16c0-22.092-17.909-40-40-40h-144c-22.092,0-40,17.909-40,40v16 c-13.255,0-24,10.745-24,24s10.745,24,24,24v8c0,19.378,11.651,36.855,29.538,44.308l34.462,14.359v25.801 c0,6.887-4.407,13.001-10.94,15.179l-11.425,3.808c-4.133-3.503-9.999-4.631-15.348-2.848l-39.047,13.016 c-11.691,3.897-20.105,14.161-21.634,26.389l-7.027,56.214l-0.407-0.045c-2.586-0.287-4.914,1.576-5.202,4.161l-0.726,6.536 c-0.287,2.585,1.576,4.914,4.161,5.201l11.702,1.3V440c0,8.837,7.164,16,16,16h40h176h40c8.837,0,16-7.163,16-16v-18.621 l11.702-1.3C386.287,419.792,388.15,417.463,387.863,414.878z'/%3E%3Cpath style='fill:%23E2A071;' d='M179.893,266.667v25.801c0,5.693-3.017,10.852-7.752,13.701 c66.923,11.563,103.75-39.499,103.752-39.503l0,0L179.893,266.667z'/%3E%3Cpath style='fill:%23FDC88E;' d='M339.893,152v-16c0-22.092-17.909-40-40-40h-144c-22.092,0-40,17.909-40,40v16 c-13.255,0-24,10.745-24,24s10.745,24,24,24v8c0,19.378,11.651,36.855,29.538,44.308l51.691,21.538 c9.75,4.063,20.208,6.154,30.77,6.154l0,0c10.562,0,21.019-2.091,30.769-6.154l51.694-21.539 c17.887-7.453,29.539-24.93,29.539-44.308v-8c13.255,0,24-10.745,24-24C363.893,162.745,353.147,152,339.893,152z'/%3E%3Cpath style='fill:%23623F33;' d='M171.893,184L171.893,184c-4.4,0-8-3.6-8-8v-8c0-4.4,3.6-8,8-8l0,0c4.4,0,8,3.6,8,8v8 C179.893,180.4,176.293,184,171.893,184z'/%3E%3Cpath style='fill:%23623F33;' d='M283.892,184L283.892,184c-4.4,0-8-3.6-8-8v-8c0-4.4,3.6-8,8-8l0,0c4.4,0,8,3.6,8,8v8 C291.892,180.4,288.292,184,283.892,184z'/%3E%3Cpath style='fill:%23E2A071;' d='M227.893,240.219c-14.223,0-27.527-3.5-36.5-9.605c-3.652-2.484-4.601-7.461-2.113-11.113 c2.48-3.648,7.461-4.598,11.113-2.113c6.289,4.277,16.57,6.832,27.5,6.832s21.211-2.555,27.5-6.832 c3.66-2.492,8.629-1.539,11.113,2.113c2.488,3.652,1.539,8.629-2.113,11.113C255.421,236.719,242.116,240.219,227.893,240.219z'/%3E%3Cpath style='fill:%23F6B47B;' d='M247.893,90c-52.333,21.833-132,46-132,46v16c-13.255,0-24,10.745-24,24s10.745,24,24,24v8 c0,19.378,11.651,36.855,29.538,44.308l51.69,21.538c2.53,1.054,5.112,1.962,7.727,2.749 c-22.756-16.647-37.933-31.207-46.857-40.761c-6.514-6.974-10.099-16.186-10.099-25.729v-60.194c100.5-33.66,112-53.91,112-53.91 L247.893,90z'/%3E%3Cpath style='fill:%23FF4F4F;' d='M316,456.001v-40h67l-8.499-67.989c-1.529-12.228-9.943-22.492-21.634-26.389l-39.047-13.016 c-6.8-2.267-14.45,0.154-18.291,6.206C281.349,337.157,256.424,352,228.001,352s-53.349-14.844-67.53-37.188 c-3.841-6.052-11.491-8.473-18.291-6.206l-39.047,13.016c-11.691,3.897-20.105,14.161-21.634,26.389l-7.609,60.872L140.001,416v40 h176V456.001z'/%3E%3Cpath style='fill:%23F23F44;' d='M140.001,422.04v-18.106c0-7.697-2.774-15.135-7.813-20.953l-44.019-50.813 c-3.552,4.497-5.93,9.93-6.669,15.843l-8.356,66.847C85.867,415.622,119.711,419.587,140.001,422.04z'/%3E%3Cpath style='fill:%23FFB94C;' d='M140.001,411.507l-65.936-7.326c-2.586-0.287-4.914,1.576-5.202,4.161l-0.726,6.536 c-0.287,2.585,1.576,4.914,4.161,5.201l67.703,7.523V411.507z'/%3E%3Cpath style='fill:%23F23F44;' d='M316,422.04v-18.106c0-7.697,2.774-15.135,7.813-20.953l44.019-50.813 c3.552,4.497,5.93,9.93,6.669,15.843l8.356,66.847C370.134,415.622,336.289,419.587,316,422.04z'/%3E%3Cpath style='fill:%23FFB94C;' d='M316,411.507l65.936-7.326c2.586-0.287,4.914,1.576,5.202,4.161l0.726,6.536 c0.287,2.585-1.576,4.914-4.161,5.201L316,427.602V411.507z'/%3E%3Cpath style='fill:%23FFB94C;' d='M227.999,408c-26.51,0-48,21.49-48,48h96C275.999,429.491,254.51,408,227.999,408z'/%3E%3Cpath style='fill:%23E69F5F;' d='M110.892,112.671V136c16.714,0,87.054-12,133.714-40c0,0,40.393,52.667,100.286,56v-40.668 c0-20.564-17.516-37.182-38.997-36.998l-156.697,1.339C127.988,75.854,110.892,92.365,110.892,112.671z'/%3E%3Cpath style='fill:%23E09156;' d='M149.2,75.673c-21.211,0.181-38.307,16.693-38.307,36.998V136c1.54,0,3.538-0.103,5.928-0.31 c8.631-2.913,75.731-26.331,107.655-60.661L149.2,75.673z'/%3E%3C/g%3E%3C/svg%3E%0A"}),xt=gt(null);class wt extends Error{constructor(t){super(),this.response=t}}class kt{constructor(t){this.id=null,this.name=null,this.avatar=null,this.id=t.id,this.name=t.name,this.avatar=t.avatar}static logout(){throw new wt(null)}static isAuthenticated(){return fetch("/api/auth").then((t=>t.json())).then((t=>{if(!1!==t){let e=new kt(t);vt.success("Authenticated",e.name??""),bt.update((()=>e))}else bt.update((()=>null))}))}static login(t,e){return fetch("/api/auth/login",{method:"post",body:JSON.stringify({login:t,password:e})}).then((t=>{if(401===t.status)throw new wt(null);if(200!==t.status)throw new Error(t.status.toString());return t.json()})).then((t=>this.isAuthenticated())).catch((t=>{if(!(t instanceof wt))throw t;vt.error("Login error","wrogin login or password")}))}}function Qt(e){return{c:t,m:t,i:t,o:t,d:t}}function _t(e){return{c:t,m:t,i:t,o:t,d:t}}function Et(t){let e,n;return e=new pt({props:{$$slots:{default:[Mt]},$$scope:{ctx:t}}}),{c(){st(e.$$.fragment)},m(t,l){ot(e,t,l),n=!0},i(t){n||(G(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){ct(e,t)}}}function Mt(t){let e;return{c(){e=b("Loading")},m(t,n){m(t,e,n)},d(t){t&&g(e)}}}function St(t){let e,n,l,s,o,c,r,a,u,f,d,h,$,Q,E,S={ctx:t,current:null,token:null,hasCatch:!1,pending:Et,then:_t,catch:Qt,blocks:[,,,]};return et(h=t[2],S),{c(){e=v("main"),n=v("form"),l=v("input"),s=y(),o=v("input"),c=y(),r=v("button"),r.textContent="Login",a=b("\n\t\tpowered by "),u=v("b"),u.textContent="Atomino & Magic",f=y(),d=x(),S.block.c(),_(l,"type","text"),_(l,"placeholder","login"),_(l,"name","login"),_(l,"class","Qhg0mfa"),_(o,"type","password"),_(o,"placeholder","password"),_(o,"name","password"),_(o,"class","Qhg0mfa"),_(r,"type","submit"),_(r,"class","Qhg0mfa"),_(n,"class","Qhg0mfa"),_(e,"class","Qhg0mfa")},m(i,h){m(i,e,h),p(e,n),p(n,l),M(l,t[0]),p(n,s),p(n,o),M(o,t[1]),p(n,c),p(n,r),p(n,a),p(n,u),m(i,f,h),m(i,d,h),S.block.m(i,S.anchor=h),S.mount=()=>d.parentNode,S.anchor=d,$=!0,Q||(E=[w(l,"input",t[4]),w(o,"input",t[5]),w(n,"submit",k(t[3]))],Q=!0)},p(e,[n]){t=e,1&n&&l.value!==t[0]&&M(l,t[0]),2&n&&o.value!==t[1]&&M(o,t[1]),S.ctx=t,4&n&&h!==(h=t[2])&&et(h,S)},i(t){$||(G(S.block),$=!0)},o(t){for(let t=0;t<3;t+=1){tt(S.blocks[t])}$=!1},d(t){t&&g(e),t&&g(f),t&&g(d),S.block.d(t),S.token=null,S=null,Q=!1,i(E)}}}function Ot(t,e,n){let l="elvis@elvis.hu",i="galaga",s=null;return[l,i,s,function(){n(2,s=kt.login(l,i))},function(){l=this.value,n(0,l)},function(){i=this.value,n(1,i)}]}class zt extends at{constructor(t){super(),rt(this,t,Ot,St,o,{})}}var Ct;!function(t){t[t.list=0]="list",t[t.form=1]="form",t[t.custom=2]="custom",t[t.menu=3]="menu"}(Ct||(Ct={}));class Tt{constructor(t,e){this.label=t,this.icon=e,this.action=null,this.type=null,this.submenu=[]}static List(t,e,n){const l=new Tt(t,e);return l.action=()=>xt.update((()=>n)),l.type=Tt.type.list,l}static Page(t,e,n,l=null){const i=new Tt(t,e);return i.action=()=>n.open(l),i.type=Tt.type.form,i}static Menu(t,e,n){const l=new Tt(t,e);return l.submenu=n,l.type=Tt.type.menu,l}static Custom(t,e,n){const l=new Tt(t,e);return l.action=n,l.type=Tt.type.custom,l}activate(){return"function"==typeof this.action&&this.action(),this}}function jt(t,e,n){const l=t.slice();return l[9]=e[n],l[11]=n,l}function Ft(t){let e;return{c(){e=v("i"),_(e,"class","marker fa-fw fal fa-chevron-left Q3shszd"),C(e,"open",t[5][t[11]])},m(t,n){m(t,e,n)},p(t,n){32&n&&C(e,"open",t[5][t[11]])},d(t){t&&g(e)}}}function Lt(t){let e,n;return e=new Bt({props:{menu:t[9].submenu,wide:t[3],isOpen:!0===t[5][t[11]],isSubmenu:!0}}),{c(){st(e.$$.fragment)},m(t,l){ot(e,t,l),n=!0},p(t,n){const l={};4&n&&(l.menu=t[9].submenu),8&n&&(l.wide=t[3]),32&n&&(l.isOpen=!0===t[5][t[11]]),e.$set(l)},i(t){n||(G(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){ct(e,t)}}}function Nt(t){let e,n,l,i,s,o,c,r,a,u,d,h,$=t[9].label+"",k=t[9].type===Tt.type.menu&&Ft(t);function Q(){return t[7](t[9],t[11])}let M=t[9].type===Tt.type.menu&&Lt(t);return{c(){e=v("button"),n=v("i"),i=y(),s=v("span"),o=b($),c=y(),k&&k.c(),r=y(),M&&M.c(),a=x(),_(n,"class",l=f("icon "+t[9].icon)+" Q3shszd"),_(s,"class","Q3shszd"),_(e,"class","closed Q3shszd"),C(e,"has-submenu",t[9].type===Tt.type.menu)},m(t,l){m(t,e,l),p(e,n),p(e,i),p(e,s),p(s,o),p(e,c),k&&k.m(e,null),m(t,r,l),M&&M.m(t,l),m(t,a,l),u=!0,d||(h=w(e,"click",Q),d=!0)},p(i,s){t=i,(!u||4&s&&l!==(l=f("icon "+t[9].icon)+" Q3shszd"))&&_(n,"class",l),(!u||4&s)&&$!==($=t[9].label+"")&&E(o,$),t[9].type===Tt.type.menu?k?k.p(t,s):(k=Ft(t),k.c(),k.m(e,null)):k&&(k.d(1),k=null),4&s&&C(e,"has-submenu",t[9].type===Tt.type.menu),t[9].type===Tt.type.menu?M?(M.p(t,s),4&s&&G(M,1)):(M=Lt(t),M.c(),G(M,1),M.m(a.parentNode,a)):M&&(X(),tt(M,1,1,(()=>{M=null})),Z())},i(t){u||(G(M),u=!0)},o(t){tt(M),u=!1},d(t){t&&g(e),k&&k.d(),t&&g(r),M&&M.d(t),t&&g(a),d=!1,h()}}}function At(t){let e,n,l=t[2],i=[];for(let e=0;e<l.length;e+=1)i[e]=Nt(jt(t,l,e));const s=t=>tt(i[t],1,1,(()=>{i[t]=null}));return{c(){e=v("nav");for(let t=0;t<i.length;t+=1)i[t].c();_(e,"class","Q3shszd"),C(e,"wide",t[3]),C(e,"open",t[0]),C(e,"isSubmenu",t[1])},m(l,s){m(l,e,s);for(let t=0;t<i.length;t+=1)i[t].m(e,null);t[8](e),n=!0},p(t,[n]){if(108&n){let o;for(l=t[2],o=0;o<l.length;o+=1){const s=jt(t,l,o);i[o]?(i[o].p(s,n),G(i[o],1)):(i[o]=Nt(s),i[o].c(),G(i[o],1),i[o].m(e,null))}for(X(),o=l.length;o<i.length;o+=1)s(o);Z()}8&n&&C(e,"wide",t[3]),1&n&&C(e,"open",t[0]),2&n&&C(e,"isSubmenu",t[1])},i(t){if(!n){for(let t=0;t<l.length;t+=1)G(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)tt(i[t]);n=!1},d(n){n&&g(e),$(i,n),t[8](null)}}}function Pt(t,e,n){let l,{isOpen:i=!0}=e,{isSubmenu:s=!1}=e,{menu:o}=e,{wide:c}=e,r={};function a(t,e){t.type===Tt.type.menu?n(5,r[e]=!r[e],r):t.action()}N((()=>{n(4,l.style.height=l.scrollHeight+"px",l)}));return t.$$set=t=>{"isOpen"in t&&n(0,i=t.isOpen),"isSubmenu"in t&&n(1,s=t.isSubmenu),"menu"in t&&n(2,o=t.menu),"wide"in t&&n(3,c=t.wide)},[i,s,o,c,l,r,a,(t,e)=>a(t,e),function(t){P[t?"unshift":"push"]((()=>{l=t,n(4,l)}))}]}Tt.type=Ct;class Bt extends at{constructor(t){super(),rt(this,t,Pt,At,o,{isOpen:0,isSubmenu:1,menu:2,wide:3})}}function It(t){let e,n,l,s,o,c,r,a,u,f,d,h,$,x,k,Q=t[1].name+"";return h=new Bt({props:{menu:t[2].menu,wide:t[0]}}),{c(){e=v("main"),n=v("div"),l=v("img"),c=y(),r=v("span"),a=b(Q),u=y(),f=v("div"),f.innerHTML='<i class="fas fa-times"></i>',d=y(),st(h.$$.fragment),l.src!==(s=t[1].avatar??t[2].defaultAvatar)&&_(l,"src",s),_(l,"alt",o=t[1].name),_(l,"class","Q3psonk"),_(r,"class","Q3psonk"),_(f,"class","logout Q3psonk"),_(n,"class","user Q3psonk"),_(e,"class","Q3psonk"),C(e,"wide",t[0])},m(i,s){m(i,e,s),p(e,n),p(n,l),p(n,c),p(n,r),p(r,a),p(n,u),p(n,f),p(e,d),ot(h,e,null),$=!0,x||(k=[w(l,"click",t[3]),w(f,"click",kt.logout)],x=!0)},p(t,[n]){(!$||6&n&&l.src!==(s=t[1].avatar??t[2].defaultAvatar))&&_(l,"src",s),(!$||2&n&&o!==(o=t[1].name))&&_(l,"alt",o),(!$||2&n)&&Q!==(Q=t[1].name+"")&&E(a,Q);const i={};4&n&&(i.menu=t[2].menu),1&n&&(i.wide=t[0]),h.$set(i),1&n&&C(e,"wide",t[0])},i(t){$||(G(h.$$.fragment,t),$=!0)},o(t){tt(h.$$.fragment,t),$=!1},d(t){t&&g(e),ct(h),x=!1,i(k)}}}function qt(t,e,n){let l,i;c(t,bt,(t=>n(1,l=t))),c(t,yt,(t=>n(2,i=t)));let s=localStorage.getItem("nav-panel-wide");return[s,l,i,function(){n(0,s=!s)?localStorage.setItem("nav-panel-wide","1"):localStorage.removeItem("nav-panel-wide")}]}class Dt extends at{constructor(t){super(),rt(this,t,qt,It,o,{})}}class Ht{constructor(t,e=!0,n=!1,l=null){this.initial=!1,this.twoWay=!1,this.fields=[],this.key=null,this.label=t,this.twoWay=e,this.initial=n,this.key=l}asc(t){return this.fields.push({field:t,order:1}),this}desc(t){return this.fields.push({field:t,order:-1}),this}get(){let t=[{label:this.label,order:"asc",fields:this.key?this.key+"-asc":this.fields.map((t=>[t.field,1===t.order?"asc":"desc"])),initial:this.initial}];return this.twoWay&&t.push({label:this.label,order:"desc",fields:this.key?this.key+"-desc":this.fields.map((t=>[t.field,1===t.order?"desc":"asc"])),initial:!1}),t}}class Jt{constructor(t,e,n){this.icon=t,this.label=e,this.onClick=n}}class Vt{constructor(t,e,n,l,i,s,o,c){this.label=t,this.icon=e,this.actions=n,this.limit=l,this.fetcher=s,this.card=o,this.cardify=c,this.sorting=[],i.forEach((t=>this.sorting.push(...t.get())));let r=this.sorting.findIndex((t=>t.initial));this.initialSortingIndex=r>-1?r:0}static Sorting(t,e=!0,n=!1,l=null){return new Ht(t,e,n,l)}static Action(t,e,n){return new Jt(t,e,n)}}class Yt extends Error{constructor(t){super(),this.response=t}}class Rt extends Error{constructor(t,e=""){super(t),this.info=e}}class Ut extends Error{constructor(t){super(),this.response=t}}class Wt extends Error{constructor(t){super(),this.response=t}}function Kt(t){switch(t.status){case 200:return t.json().catch((e=>{throw new Rt("Some error occurred ("+t.status+")",t.url)}));case 401:throw new wt(t);case 403:throw new Yt(t);case 404:throw new Ut(t);case 422:throw new Wt(t);case 499:throw new Rt(t.statusText);default:throw new Rt("Some error occurred ("+t.status+")",t.url)}}class Xt{constructor(t){this.api=t}list(t,e,n,l,i){return fetch(this.api+"/list/"+t,{method:"POST",body:JSON.stringify({sort:e.fields,quickSearch:n,search:l,limit:i})}).then((t=>Kt(t))).then((t=>new Zt(t.page,t.count,t.items)))}}class Zt{constructor(t,e,n){this.page=t,this.count=e,this.items=n}}class Gt{constructor(t){this.initialised=!1,this.items=[],this.count=0,this.page=1,this.pageCount=1,this.quickSearch=null,this.config=t,this.sortingIndex=t.initialSortingIndex}static create(t,e,n,l,i,s){"string"==typeof i&&(i=new Xt(i));let o=new Vt(t,e,[],n,l,i,s.component,s.cardify);return new Gt(o)}addAction(t){null===this.config.actions&&(this.config.actions=[]),this.config.actions.push(t)}reload(){return this.loadData()}loadData(){return this.initialised=!0,this.config.fetcher.list(this.page,this.config.sorting[this.sortingIndex],this.quickSearch,{},this.config.limit).then((t=>{this.count=t.count,this.page=t.page,this.pageCount=Math.ceil(t.count/this.config.limit),this.items.length=0,this.items.push(...t.items.map((t=>this.config.cardify(t))))}))}}function te(t,e,n){const l=t.slice();return l[15]=e[n],l}function ee(t,e,n){const l=t.slice();return l[18]=e[n],l[20]=n,l}function ne(t,e,n){const l=t.slice();return l[21]=e[n],l}function le(t){let e,n=t[0].config.actions,l=[];for(let e=0;e<n.length;e+=1)l[e]=ie(ne(t,n,e));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=x()},m(t,n){for(let e=0;e<l.length;e+=1)l[e].m(t,n);m(t,e,n)},p(t,i){if(1&i){let s;for(n=t[0].config.actions,s=0;s<n.length;s+=1){const o=ne(t,n,s);l[s]?l[s].p(o,i):(l[s]=ie(o),l[s].c(),l[s].m(e.parentNode,e))}for(;s<l.length;s+=1)l[s].d(1);l.length=n.length}},d(t){$(l,t),t&&g(e)}}}function ie(t){let e,n,l,i,s,o;function c(){return t[7](t[21])}return{c(){e=v("button"),n=v("i"),_(n,"class",l=f(t[21].icon)+" Qgu5wy9"),_(e,"title",i=t[21].label),_(e,"class","Qgu5wy9")},m(t,l){m(t,e,l),p(e,n),s||(o=w(e,"click",Q(c)),s=!0)},p(s,o){t=s,1&o&&l!==(l=f(t[21].icon)+" Qgu5wy9")&&_(n,"class",l),1&o&&i!==(i=t[21].label)&&_(e,"title",i)},d(t){t&&g(e),s=!1,o()}}}function se(t){let e,n,l=("asc"===t[18].order?"▼ ":"▲ ")+t[18].label;return{c(){e=v("option"),n=b(l),e.__value=t[20],e.value=e.__value},m(t,l){m(t,e,l),p(e,n)},p(t,e){1&e&&l!==(l=("asc"===t[18].order?"▼ ":"▲ ")+t[18].label)&&E(n,l)},d(t){t&&g(e)}}}function oe(t){let e,n,l;var i=t[0].config.card;function s(t){return{props:{item:t[15],list:t[2]}}}return i&&(e=new i(s(t))),{c(){e&&st(e.$$.fragment),n=x()},m(t,i){e&&ot(e,t,i),m(t,n,i),l=!0},p(t,l){const o={};if(4&l&&(o.item=t[15]),4&l&&(o.list=t[2]),i!==(i=t[0].config.card)){if(e){X();const t=e;tt(t.$$.fragment,1,0,(()=>{ct(t,1)})),Z()}i?(e=new i(s(t)),st(e.$$.fragment),G(e.$$.fragment,1),ot(e,n.parentNode,n)):e=null}else i&&e.$set(o)},i(t){l||(e&&G(e.$$.fragment,t),l=!0)},o(t){e&&tt(e.$$.fragment,t),l=!1},d(t){t&&g(n),e&&ct(e,t)}}}function ce(t){let e,n,l,s,o,c,r,a,u,f,d,h,x,k,Q,S,z,T,j,F,L,N,A,P,B,I,q,D,H,V,Y,R,U,W,K=t[0].config.label+"",et=t[2].count+"",nt=t[2].pageCount+"",lt=t[0].config.actions&&le(t),it=t[0].config.sorting,st=[];for(let e=0;e<it.length;e+=1)st[e]=se(ee(t,it,e));let ot=t[2].items,ct=[];for(let e=0;e<ot.length;e+=1)ct[e]=oe(te(t,ot,e));const rt=t=>tt(ct[t],1,1,(()=>{ct[t]=null}));return{c(){e=v("main"),n=v("header"),l=v("section"),s=v("i"),c=y(),r=v("span"),a=v("div"),u=b(K),f=y(),d=v("div"),h=b(et),x=y(),k=v("div"),lt&&lt.c(),Q=y(),S=v("section"),z=v("input"),T=y(),j=v("section"),F=v("button"),F.innerHTML='<i class="fas fa-chevron-left"></i>',L=y(),N=v("input"),A=y(),P=v("span"),B=b(nt),I=y(),q=v("button"),q.innerHTML='<i class="fas fa-chevron-right"></i>',D=y(),H=v("select");for(let t=0;t<st.length;t+=1)st[t].c();V=y(),Y=v("section");for(let t=0;t<ct.length;t+=1)ct[t].c();_(s,"class",o="icon "+t[0].config.icon+" Qgu5wy9"),_(a,"class","label Qgu5wy9"),_(d,"class","count Qgu5wy9"),_(r,"class","title"),_(k,"class","buttons Qgu5wy9"),_(l,"class","info Qgu5wy9"),_(z,"type","text"),_(z,"placeholder","search"),_(z,"class","Qgu5wy9"),_(S,"class","tools search Qgu5wy9"),_(F,"class","Qgu5wy9"),_(N,"type","text"),_(N,"class","Qgu5wy9"),_(P,"class","of Qgu5wy9"),_(q,"class","Qgu5wy9"),_(H,"class","Qgu5wy9"),void 0===t[0].sortingIndex&&J((()=>t[12].call(H))),_(j,"class","tools paging Qgu5wy9"),_(n,"class","Qgu5wy9"),_(Y,"class","listing Qgu5wy9"),_(e,"class","Qgu5wy9"),C(e,"selected",t[1])},m(i,o){m(i,e,o),p(e,n),p(n,l),p(l,s),p(l,c),p(l,r),p(r,a),p(a,u),p(r,f),p(r,d),p(d,h),p(l,x),p(l,k),lt&&lt.m(k,null),p(n,Q),p(n,S),p(S,z),M(z,t[0].quickSearch),p(n,T),p(n,j),p(j,F),p(j,L),p(j,N),M(N,t[2].page),p(j,A),p(j,P),p(P,B),p(j,I),p(j,q),p(j,D),p(j,H);for(let t=0;t<st.length;t+=1)st[t].m(H,null);O(H,t[0].sortingIndex),p(e,V),p(e,Y);for(let t=0;t<ct.length;t+=1)ct[t].m(Y,null);R=!0,U||(W=[w(z,"input",t[8]),w(z,"input",t[4]),w(F,"click",t[9]),w(N,"input",t[10]),w(N,"input",t[5]),w(q,"click",t[11]),w(H,"change",t[12]),w(H,"input",t[6])],U=!0)},p(t,[n]){if((!R||1&n&&o!==(o="icon "+t[0].config.icon+" Qgu5wy9"))&&_(s,"class",o),(!R||1&n)&&K!==(K=t[0].config.label+"")&&E(u,K),(!R||4&n)&&et!==(et=t[2].count+"")&&E(h,et),t[0].config.actions?lt?lt.p(t,n):(lt=le(t),lt.c(),lt.m(k,null)):lt&&(lt.d(1),lt=null),1&n&&z.value!==t[0].quickSearch&&M(z,t[0].quickSearch),4&n&&N.value!==t[2].page&&M(N,t[2].page),(!R||4&n)&&nt!==(nt=t[2].pageCount+"")&&E(B,nt),1&n){let e;for(it=t[0].config.sorting,e=0;e<it.length;e+=1){const l=ee(t,it,e);st[e]?st[e].p(l,n):(st[e]=se(l),st[e].c(),st[e].m(H,null))}for(;e<st.length;e+=1)st[e].d(1);st.length=it.length}if(1&n&&O(H,t[0].sortingIndex),5&n){let e;for(ot=t[2].items,e=0;e<ot.length;e+=1){const l=te(t,ot,e);ct[e]?(ct[e].p(l,n),G(ct[e],1)):(ct[e]=oe(l),ct[e].c(),G(ct[e],1),ct[e].m(Y,null))}for(X(),e=ot.length;e<ct.length;e+=1)rt(e);Z()}2&n&&C(e,"selected",t[1])},i(t){if(!R){for(let t=0;t<ot.length;t+=1)G(ct[t]);R=!0}},o(t){ct=ct.filter(Boolean);for(let t=0;t<ct.length;t+=1)tt(ct[t]);R=!1},d(t){t&&g(e),lt&&lt.d(),$(st,t),$(ct,t),U=!1,i(W)}}}function re(t,e,n){let l,{selected:i=!1}=e,{list:s}=e;const o=gt(s);let r,a;function u(){""!==l.page&&(d(o,l.page=isNaN(l.page)?1:l.page,l),l.page<1&&d(o,l.page=1,l),clearTimeout(a),a=setTimeout(f,250))}function f(){return s.loadData().then((()=>d(o,l=s,l)))}c(t,o,(t=>n(2,l=t))),s.reload=()=>f();return t.$$set=t=>{"selected"in t&&n(1,i=t.selected),"list"in t&&n(0,s=t.list)},t.$$.update=()=>{3&t.$$.dirty&&i&&!s.initialised&&f()},[s,i,l,o,function(){clearTimeout(r),r=setTimeout(f,250)},u,f,t=>t.onClick(s),function(){s.quickSearch=this.value,n(0,s)},()=>{d(o,l.page--,l),u()},function(){l.page=this.value,o.set(l)},()=>{d(o,l.page++,l),u()},function(){s.sortingIndex=z(this),n(0,s)}]}class ae extends at{constructor(t){super(),rt(this,t,re,ce,o,{selected:1,list:0})}}let ue=new class{constructor(){this._documents=[],this.active=gt(null),this._documents=[],this.documents=gt(this._documents)}has(t){return this.docIndex(t)>-1}docIndex(t){return this._documents.findIndex((e=>e.$id===t))}add(t){this._documents.push(t),this.documents.set(this._documents)}show(t){this.active.set(this._documents[this.docIndex(t)])}close(t){let e=this.docIndex(t);this._documents.length>1&&(e===this._documents.length-1?this.show(this._documents[e-1].$id):this.show(this._documents[e+1].$id)),this._documents.splice(e,1),this.documents.set(this._documents)}},fe=ue.documents;class de{constructor(t){this._id=t}get class(){return Object.getPrototypeOf(this).constructor}static $id(t=null){return this.$idPrefix+"--"+t??""}static open(t=null){let e=this.$id(t);ue.has(e)||ue.add(new this(t)),ue.show(e)}static create(...t){}get icon(){return this.class.icon}get label(){return"LABEL"}get info(){return"INFO"}get component(){return Object.getPrototypeOf(this).constructor.component}get $id(){return Object.getPrototypeOf(this).constructor.$id(this.id)}get id(){return this._id}set id(t){if(t!==this._id){if(ue.has(this.class.$id(t)))throw new Rt("Can not change document id","Duplicate document id: "+this.class.$id(t));this._id=t,fe.update((t=>t))}}close(){ue.close(this.$id)}}function he(t){let e,n,l;var i=t[0].component;function s(t){return{props:{doc:t[0]}}}return i&&(n=new i(s(t))),{c(){e=v("main"),n&&st(n.$$.fragment),_(e,"class","Qh6p0ix"),C(e,"selected",t[1])},m(t,i){m(t,e,i),n&&ot(n,e,null),l=!0},p(t,[l]){const o={};if(1&l&&(o.doc=t[0]),i!==(i=t[0].component)){if(n){X();const t=n;tt(t.$$.fragment,1,0,(()=>{ct(t,1)})),Z()}i?(n=new i(s(t)),st(n.$$.fragment),G(n.$$.fragment,1),ot(n,e,null)):n=null}else i&&n.$set(o);2&l&&C(e,"selected",t[1])},i(t){l||(n&&G(n.$$.fragment,t),l=!0)},o(t){n&&tt(n.$$.fragment,t),l=!1},d(t){t&&g(e),n&&ct(n)}}}function pe(t,e,n){let{doc:l}=e,{selected:i}=e;return t.$$set=t=>{"doc"in t&&n(0,l=t.doc),"selected"in t&&n(1,i=t.selected)},[l,i]}de.create=function(t,e){return Object.assign(class extends de{},{component:t,$idPrefix:e})};class me extends at{constructor(t){super(),rt(this,t,pe,he,o,{doc:0,selected:1})}}function ge(t){let e,n;const l=t[1].default,i=r(l,t,t[0],null);return{c(){e=v("main"),i&&i.c(),_(e,"class","Q5gptos")},m(t,l){m(t,e,l),i&&i.m(e,null),n=!0},p(t,[e]){i&&i.p&&(!n||1&e)&&u(i,l,t,t[0],e,null,null)},i(t){n||(G(i,t),n=!0)},o(t){tt(i,t),n=!1},d(t){t&&g(e),i&&i.d(t)}}}function $e(t,e,n){let{$$slots:l={},$$scope:i}=e;return t.$$set=t=>{"$$scope"in t&&n(0,i=t.$$scope)},[i,l]}class ve extends at{constructor(t){super(),rt(this,t,$e,ge,o,{})}}function be(e){let n,l,s,o,c,r,a,u,d,h,$,x,k,Q,M=e[1].info+"",S=e[1].label+"";return{c(){n=v("main"),l=v("i"),o=y(),c=v("span"),r=b(M),a=y(),u=v("i"),d=y(),h=v("span"),$=b(S),_(l,"class",s=f(e[1].icon)+" Q2qpot6"),_(c,"class","info Q2qpot6"),_(u,"class","close fas fa-times Q2qpot6"),_(h,"class","label Q2qpot6"),_(n,"title",x=e[1].label),_(n,"class","Q2qpot6"),C(n,"selected",e[0])},m(t,i){m(t,n,i),p(n,l),p(n,o),p(n,c),p(c,r),p(n,a),p(n,u),p(n,d),p(n,h),p(h,$),k||(Q=[w(u,"click",e[4]),w(n,"click",e[3])],k=!0)},p(t,[e]){2&e&&s!==(s=f(t[1].icon)+" Q2qpot6")&&_(l,"class",s),2&e&&M!==(M=t[1].info+"")&&E(r,M),2&e&&S!==(S=t[1].label+"")&&E($,S),2&e&&x!==(x=t[1].label)&&_(n,"title",x),1&e&&C(n,"selected",t[0])},i:t,o:t,d(t){t&&g(n),k=!1,i(Q)}}}function ye(t,e,n){let{selected:l}=e,{doc:i}=e;function s(t){l&&t.close()}return t.$$set=t=>{"selected"in t&&n(0,l=t.selected),"doc"in t&&n(1,i=t.doc)},[l,i,s,function(e){!function(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t(e)))}(t,e)},()=>s(i)]}class xe extends at{constructor(t){super(),rt(this,t,ye,be,o,{selected:0,doc:1})}}let we={manager:ue,Doc:de,create:de.create.bind(de)};function ke(t,e,n){const l=t.slice();return l[7]=e[n],l}function Qe(t,e,n){const l=t.slice();return l[10]=e[n],l}function _e(t,e,n){const l=t.slice();return l[7]=e[n],l}function Ee(t){let e,n;return e=new xe({props:{doc:t[7],selected:t[7]===t[1]}}),e.$on("click",(function(){return t[6](t[7])})),{c(){st(e.$$.fragment)},m(t,l){ot(e,t,l),n=!0},p(n,l){t=n;const i={};1&l&&(i.doc=t[7]),3&l&&(i.selected=t[7]===t[1]),e.$set(i)},i(t){n||(G(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){ct(e,t)}}}function Me(t){let e,n,l=t[0],i=[];for(let e=0;e<l.length;e+=1)i[e]=Ee(_e(t,l,e));const s=t=>tt(i[t],1,1,(()=>{i[t]=null}));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=x()},m(t,l){for(let e=0;e<i.length;e+=1)i[e].m(t,l);m(t,e,l),n=!0},p(t,n){if(3&n){let o;for(l=t[0],o=0;o<l.length;o+=1){const s=_e(t,l,o);i[o]?(i[o].p(s,n),G(i[o],1)):(i[o]=Ee(s),i[o].c(),G(i[o],1),i[o].m(e.parentNode,e))}for(X(),o=l.length;o<i.length;o+=1)s(o);Z()}},i(t){if(!n){for(let t=0;t<l.length;t+=1)G(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)tt(i[t]);n=!1},d(t){$(i,t),t&&g(e)}}}function Se(t){let e,n;return e=new ae({props:{list:t[10],selected:t[10]===t[3]}}),{c(){st(e.$$.fragment)},m(t,l){ot(e,t,l),n=!0},p(t,n){const l={};4&n&&(l.list=t[10]),12&n&&(l.selected=t[10]===t[3]),e.$set(l)},i(t){n||(G(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){ct(e,t)}}}function Oe(t){let e,n;return e=new me({props:{doc:t[7],selected:t[7]===t[1]}}),{c(){st(e.$$.fragment)},m(t,l){ot(e,t,l),n=!0},p(t,n){const l={};1&n&&(l.doc=t[7]),3&n&&(l.selected=t[7]===t[1]),e.$set(l)},i(t){n||(G(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){ct(e,t)}}}function ze(t){let e,n,l,i,s,o,c;n=new Dt({}),i=new ve({props:{$$slots:{default:[Me]},$$scope:{ctx:t}}});let r=t[2].lists,a=[];for(let e=0;e<r.length;e+=1)a[e]=Se(Qe(t,r,e));const u=t=>tt(a[t],1,1,(()=>{a[t]=null}));let f=t[0],d=[];for(let e=0;e<f.length;e+=1)d[e]=Oe(ke(t,f,e));const h=t=>tt(d[t],1,1,(()=>{d[t]=null}));return{c(){e=v("main"),st(n.$$.fragment),l=y(),st(i.$$.fragment),s=y();for(let t=0;t<a.length;t+=1)a[t].c();o=y();for(let t=0;t<d.length;t+=1)d[t].c();_(e,"class","Q1v2avhj")},m(t,r){m(t,e,r),ot(n,e,null),p(e,l),ot(i,e,null),p(e,s);for(let t=0;t<a.length;t+=1)a[t].m(e,null);p(e,o);for(let t=0;t<d.length;t+=1)d[t].m(e,null);c=!0},p(t,[n]){const l={};if(32771&n&&(l.$$scope={dirty:n,ctx:t}),i.$set(l),12&n){let l;for(r=t[2].lists,l=0;l<r.length;l+=1){const i=Qe(t,r,l);a[l]?(a[l].p(i,n),G(a[l],1)):(a[l]=Se(i),a[l].c(),G(a[l],1),a[l].m(e,o))}for(X(),l=r.length;l<a.length;l+=1)u(l);Z()}if(3&n){let l;for(f=t[0],l=0;l<f.length;l+=1){const i=ke(t,f,l);d[l]?(d[l].p(i,n),G(d[l],1)):(d[l]=Oe(i),d[l].c(),G(d[l],1),d[l].m(e,null))}for(X(),l=f.length;l<d.length;l+=1)h(l);Z()}},i(t){if(!c){G(n.$$.fragment,t),G(i.$$.fragment,t);for(let t=0;t<r.length;t+=1)G(a[t]);for(let t=0;t<f.length;t+=1)G(d[t]);c=!0}},o(t){tt(n.$$.fragment,t),tt(i.$$.fragment,t),a=a.filter(Boolean);for(let t=0;t<a.length;t+=1)tt(a[t]);d=d.filter(Boolean);for(let t=0;t<d.length;t+=1)tt(d[t]);c=!1},d(t){t&&g(e),ct(n),ct(i),$(a,t),$(d,t)}}}function Ce(t,e,n){let l,i,s,o;c(t,yt,(t=>n(2,s=t))),c(t,xt,(t=>n(3,o=t)));let r=we.manager.active;c(t,r,(t=>n(1,i=t)));let a=we.manager.documents;c(t,a,(t=>n(0,l=t)));return[l,i,s,o,r,a,t=>d(r,i=t,i)]}class Te extends at{constructor(t){super(),rt(this,t,Ce,ze,o,{})}}function je(t,e,n){const l=t.slice();return l[1]=e[n],l}function Fe(t){let e,n,l,i,s,o,c,r,a,u,d,h=t[1].label+"",$=t[1].info+"";return{c(){e=v("section"),n=v("i"),i=y(),s=v("div"),o=b(h),c=y(),r=v("div"),a=b($),u=y(),_(n,"class",l=f("fa "+t[1].icon)+" Q1mwykiy"),_(r,"class","info Q1mwykiy"),_(s,"class","label Q1mwykiy"),_(e,"class",d=f(t[1].type)+" Q1mwykiy"),C(e,"hide",t[1].hide)},m(t,l){m(t,e,l),p(e,n),p(e,i),p(e,s),p(s,o),p(s,c),p(s,r),p(r,a),p(e,u)},p(t,i){1&i&&l!==(l=f("fa "+t[1].icon)+" Q1mwykiy")&&_(n,"class",l),1&i&&h!==(h=t[1].label+"")&&E(o,h),1&i&&$!==($=t[1].info+"")&&E(a,$),1&i&&d!==(d=f(t[1].type)+" Q1mwykiy")&&_(e,"class",d),1&i&&C(e,"hide",t[1].hide)},d(t){t&&g(e)}}}function Le(e){let n,l,i,s=e[0],o=[];for(let t=0;t<s.length;t+=1)o[t]=Fe(je(e,s,t));return{c(){n=v("main");for(let t=0;t<o.length;t+=1)o[t].c();_(n,"class","Q1mwykiy")},m(t,e){m(t,n,e);for(let t=0;t<o.length;t+=1)o[t].m(n,null);l||(i=h(ut.call(null,n,"body")),l=!0)},p(t,[e]){if(1&e){let l;for(s=t[0],l=0;l<s.length;l+=1){const i=je(t,s,l);o[l]?o[l].p(i,e):(o[l]=Fe(i),o[l].c(),o[l].m(n,null))}for(;l<o.length;l+=1)o[l].d(1);o.length=s.length}},i:t,o:t,d(t){t&&g(n),$(o,t),l=!1,i()}}}function Ne(t,e,n){let l;return c(t,$t,(t=>n(0,l=t))),[l]}class Ae extends at{constructor(t){super(),rt(this,t,Ne,Le,o,{})}}let Pe=gt([]);const Be=new class{show(t,e={}){Pe.update((n=>[...n,new Ie(t,e)]))}close(t){Pe.update((e=>{let n=e.indexOf(t);return n>-1&&e.splice(n,1),e}))}};class Ie{constructor(t,e){this.Component=t,this.properties=e}close(){return()=>Be.close(this)}}function qe(t,e,n){const l=t.slice();return l[1]=e[n],l}function De(t){let n,l;const i=[t[1].properties,{close:t[1].close()}];let s={};for(let t=0;t<i.length;t+=1)s=e(s,i[t]);return n=new t[1].Component({props:s}),{c(){st(n.$$.fragment)},m(t,e){ot(n,t,e),l=!0},p(t,e){const l=1&e?nt(i,[lt(t[1].properties),{close:t[1].close()}]):{};n.$set(l)},i(t){l||(G(n.$$.fragment,t),l=!0)},o(t){tt(n.$$.fragment,t),l=!1},d(t){ct(n,t)}}}function He(t){let e,n,l=t[0],i=[];for(let e=0;e<l.length;e+=1)i[e]=De(qe(t,l,e));const s=t=>tt(i[t],1,1,(()=>{i[t]=null}));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=x()},m(t,l){for(let e=0;e<i.length;e+=1)i[e].m(t,l);m(t,e,l),n=!0},p(t,[n]){if(1&n){let o;for(l=t[0],o=0;o<l.length;o+=1){const s=qe(t,l,o);i[o]?(i[o].p(s,n),G(i[o],1)):(i[o]=De(s),i[o].c(),G(i[o],1),i[o].m(e.parentNode,e))}for(X(),o=l.length;o<i.length;o+=1)s(o);Z()}},i(t){if(!n){for(let t=0;t<l.length;t+=1)G(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)tt(i[t]);n=!1},d(t){$(i,t),t&&g(e)}}}function Je(t,e,n){let l;return c(t,Pe,(t=>n(0,l=t))),[l]}class Ve extends at{constructor(t){super(),rt(this,t,Je,He,o,{})}}class Ye{static register(){this._registered||(window.addEventListener("unhandledrejection",(t=>this.handle(t.reason))),window.addEventListener("error",(t=>this.handle(t.error))),this._registered=!0)}static handle(t){t instanceof wt?(vt.error("Not authenticated","You must log in to continue"),fetch("/api/auth/logout").then((()=>bt.set(null)))):t instanceof Yt?vt.error("You dont have permission for the requested resource!",t.message):t instanceof Rt?vt.error(t.message,t.info):t instanceof Ut?vt.error("The requested resource can not be found!"):t instanceof Wt?vt.error("Validation Error!"):vt.error("Some unknown error occurred: ",t.message)}}function Re(e){return{c:t,m:t,p:t,i:t,o:t,d:t}}function Ue(t){let e,n,l,i;const s=[Ke,We],o=[];function c(t,e){return null===t[0]?0:1}return e=c(t),n=o[e]=s[e](t),{c(){n.c(),l=x()},m(t,n){o[e].m(t,n),m(t,l,n),i=!0},p(t,i){let r=e;e=c(t),e!==r&&(X(),tt(o[r],1,1,(()=>{o[r]=null})),Z(),n=o[e],n||(n=o[e]=s[e](t),n.c()),G(n,1),n.m(l.parentNode,l))},i(t){i||(G(n),i=!0)},o(t){tt(n),i=!1},d(t){o[e].d(t),t&&g(l)}}}function We(t){let e,n;return e=new Te({}),{c(){st(e.$$.fragment)},m(t,l){ot(e,t,l),n=!0},i(t){n||(G(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){ct(e,t)}}}function Ke(t){let e,n;return e=new zt({}),{c(){st(e.$$.fragment)},m(t,l){ot(e,t,l),n=!0},i(t){n||(G(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){ct(e,t)}}}function Xe(t){let e,n;return e=new pt({props:{icon:"fad fa-spinner fa-spin",$$slots:{default:[Ze]},$$scope:{ctx:t}}}),{c(){st(e.$$.fragment)},m(t,l){ot(e,t,l),n=!0},p(t,n){const l={};8&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(G(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){ct(e,t)}}}function Ze(t){let e;return{c(){e=b("Initializing magic...")},m(t,n){m(t,e,n)},d(t){t&&g(e)}}}function Ge(t){let e,n,l,i,s,o={ctx:t,current:null,token:null,hasCatch:!1,pending:Xe,then:Ue,catch:Re,value:2,blocks:[,,,]};return et(t[1],o),n=new Ae({}),i=new Ve({}),{c(){o.block.c(),e=y(),st(n.$$.fragment),l=y(),st(i.$$.fragment)},m(t,c){o.block.m(t,o.anchor=c),o.mount=()=>e.parentNode,o.anchor=e,m(t,e,c),ot(n,t,c),m(t,l,c),ot(i,t,c),s=!0},p(e,[n]){!function(t,e,n){const l=e.slice(),{resolved:i}=t;t.current===t.then&&(l[t.value]=i),t.current===t.catch&&(l[t.error]=i),t.block.p(l,n)}(o,t=e,n)},i(t){s||(G(o.block),G(n.$$.fragment,t),G(i.$$.fragment,t),s=!0)},o(t){for(let t=0;t<3;t+=1){tt(o.blocks[t])}tt(n.$$.fragment,t),tt(i.$$.fragment,t),s=!1},d(t){o.block.d(t),o.token=null,o=null,t&&g(e),ct(n,t),t&&g(l),ct(i,t)}}}function tn(t,e,n){let l;c(t,bt,(t=>n(0,l=t))),Ye.register();let i=kt.isAuthenticated();return[l,i]}Ye._registered=!1;class en extends at{constructor(t){super(),rt(this,t,tn,Ge,o,{})}}function nn(t,e,n){const l=t.slice();return l[3]=e[n],l}function ln(t,e,n){const l=t.slice();return l[6]=e[n],l}function sn(t,e,n){const l=t.slice();return l[9]=e[n],l}function on(t){let e,n,l;return{c(){e=v("img"),_(e,"alt",n=t[0].label),e.src!==(l=t[0].img)&&_(e,"src",l),_(e,"loading","lazy"),_(e,"class","Q11w6ue4")},m(t,n){m(t,e,n)},p(t,i){1&i&&n!==(n=t[0].label)&&_(e,"alt",n),1&i&&e.src!==(l=t[0].img)&&_(e,"src",l)},d(t){t&&g(e)}}}function cn(t){let e,n,l,i;return{c(){e=v("span"),n=v("img"),_(n,"alt",l=t[0].label),n.src!==(i=t[0].avatar)&&_(n,"src",i),_(n,"loading","lazy"),_(n,"class","Q11w6ue4"),_(e,"class","avatar Q11w6ue4")},m(t,l){m(t,e,l),p(e,n)},p(t,e){1&e&&l!==(l=t[0].label)&&_(n,"alt",l),1&e&&n.src!==(i=t[0].avatar)&&_(n,"src",i)},d(t){t&&g(e)}}}function rn(t){let e,n=t[0].icons,l=[];for(let e=0;e<n.length;e+=1)l[e]=an(sn(t,n,e));return{c(){e=v("span");for(let t=0;t<l.length;t+=1)l[t].c();_(e,"class","icons Q11w6ue4")},m(t,n){m(t,e,n);for(let t=0;t<l.length;t+=1)l[t].m(e,null)},p(t,i){if(1&i){let s;for(n=t[0].icons,s=0;s<n.length;s+=1){const o=sn(t,n,s);l[s]?l[s].p(o,i):(l[s]=an(o),l[s].c(),l[s].m(e,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=n.length}},d(t){t&&g(e),$(l,t)}}}function an(t){let e,n,l,i,s,o,c;return{c(){e=v("span"),n=v("i"),l=y(),i=v("i"),o=y(),_(n,"class","fas fa-circle fa-stack-2x"),S(n,"color","#000c"),_(i,"class",s=t[9].icon+" fa-stack-1x fa-inverse Q11w6ue4"),S(i,"color",t[9].color?t[9].color:"#fffd"),_(e,"class","fa-stack fa-2x"),S(e,"font-size","10px"),_(e,"title",c=t[9].hint)},m(t,s){m(t,e,s),p(e,n),p(e,l),p(e,i),p(e,o)},p(t,n){1&n&&s!==(s=t[9].icon+" fa-stack-1x fa-inverse Q11w6ue4")&&_(i,"class",s),1&n&&S(i,"color",t[9].color?t[9].color:"#fffd"),1&n&&c!==(c=t[9].hint)&&_(e,"title",c)},d(t){t&&g(e)}}}function un(t){let e,n=t[0].properties,l=[];for(let e=0;e<n.length;e+=1)l[e]=fn(ln(t,n,e));return{c(){e=v("span");for(let t=0;t<l.length;t+=1)l[t].c();_(e,"class","props Q11w6ue4")},m(t,n){m(t,e,n);for(let t=0;t<l.length;t+=1)l[t].m(e,null)},p(t,i){if(1&i){let s;for(n=t[0].properties,s=0;s<n.length;s+=1){const o=ln(t,n,s);l[s]?l[s].p(o,i):(l[s]=fn(o),l[s].c(),l[s].m(e,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=n.length}},d(t){t&&g(e),$(l,t)}}}function fn(t){let e,n,l,i,s,o=t[6].label+"",c=t[6].value+"";return{c(){e=v("span"),n=b(o),l=y(),i=v("span"),s=b(c),_(e,"class","label Q11w6ue4"),_(i,"class","value Q11w6ue4")},m(t,o){m(t,e,o),p(e,n),m(t,l,o),m(t,i,o),p(i,s)},p(t,e){1&e&&o!==(o=t[6].label+"")&&E(n,o),1&e&&c!==(c=t[6].value+"")&&E(s,c)},d(t){t&&g(e),t&&g(l),t&&g(i)}}}function dn(t){let e,n=t[0].actions,l=[];for(let e=0;e<n.length;e+=1)l[e]=hn(nn(t,n,e));return{c(){e=v("footer");for(let t=0;t<l.length;t+=1)l[t].c();_(e,"class","Q11w6ue4")},m(t,n){m(t,e,n);for(let t=0;t<l.length;t+=1)l[t].m(e,null)},p(t,i){if(3&i){let s;for(n=t[0].actions,s=0;s<n.length;s+=1){const o=nn(t,n,s);l[s]?l[s].p(o,i):(l[s]=hn(o),l[s].c(),l[s].m(e,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=n.length}},d(t){t&&g(e),$(l,t)}}}function hn(t){let e,n,l,i,s,o;function c(){return t[2](t[3])}return{c(){e=v("button"),n=v("i"),_(n,"class",l=f(t[3].icon)+" Q11w6ue4"),_(e,"title",i=t[3].label),_(e,"class","Q11w6ue4")},m(t,l){m(t,e,l),p(e,n),s||(o=w(e,"click",Q(c)),s=!0)},p(s,o){t=s,1&o&&l!==(l=f(t[3].icon)+" Q11w6ue4")&&_(n,"class",l),1&o&&i!==(i=t[3].label)&&_(e,"title",i)},d(t){t&&g(e),s=!1,o()}}}function pn(e){let n,l,i,o,c,r,a,u,f,d,h,$,x,k,Q,M=e[0].label+"",S=e[0].id+"",O=e[0].img&&on(e),z=e[0].avatar&&cn(e),T=e[0].icons&&rn(e),j=e[0].properties&&un(e),F=e[0].actions&&dn(e);return{c(){n=v("main"),O&&O.c(),l=y(),i=v("header"),z&&z.c(),o=y(),c=v("span"),r=v("span"),a=b(M),u=y(),f=v("span"),d=b(S),h=y(),T&&T.c(),$=y(),j&&j.c(),x=y(),F&&F.c(),_(r,"class","label ellipsis Q11w6ue4"),_(f,"class","id Q11w6ue4"),_(c,"class","info Q11w6ue4"),_(i,"class","Q11w6ue4"),_(n,"class","Q11w6ue4"),C(n,"inactive",!e[0].active)},m(t,g){m(t,n,g),O&&O.m(n,null),p(n,l),p(n,i),z&&z.m(i,null),p(i,o),p(i,c),p(c,r),p(r,a),p(c,u),p(c,f),p(f,d),p(i,h),T&&T.m(i,null),p(n,$),j&&j.m(n,null),p(n,x),F&&F.m(n,null),k||(Q=w(n,"click",(function(){s(e[0].action)&&e[0].action.apply(this,arguments)})),k=!0)},p(t,[s]){(e=t)[0].img?O?O.p(e,s):(O=on(e),O.c(),O.m(n,l)):O&&(O.d(1),O=null),e[0].avatar?z?z.p(e,s):(z=cn(e),z.c(),z.m(i,o)):z&&(z.d(1),z=null),1&s&&M!==(M=e[0].label+"")&&E(a,M),1&s&&S!==(S=e[0].id+"")&&E(d,S),e[0].icons?T?T.p(e,s):(T=rn(e),T.c(),T.m(i,null)):T&&(T.d(1),T=null),e[0].properties?j?j.p(e,s):(j=un(e),j.c(),j.m(n,x)):j&&(j.d(1),j=null),e[0].actions?F?F.p(e,s):(F=dn(e),F.c(),F.m(n,null)):F&&(F.d(1),F=null),1&s&&C(n,"inactive",!e[0].active)},i:t,o:t,d(t){t&&g(n),O&&O.d(),z&&z.d(),T&&T.d(),j&&j.d(),F&&F.d(),k=!1,Q()}}}function mn(t,e,n){let{item:l}=e,{list:i}=e;return t.$$set=t=>{"item"in t&&n(0,l=t.item),"list"in t&&n(1,i=t.list)},[l,i,t=>t.onClick(i)]}class gn{constructor(t,e,n=null,l=null){this.icon=e,this.color=n,this.hint=l,this.icon=t+" "+e}}class $n{constructor(t,e){this.label=t,this.value=e}}class vn{constructor(t,e,n){this.icon=t,this.label=e,this.onClick=n}}class bn{constructor(t,e,n,l=!0,i=null,s=null,o=null,c=null,r=null){this.id=t,this.action=e,this.label=n,this.active=l,this.img=i,this.avatar=s,this.icons=o,this.properties=c,this.actions=r}}class yn{static Cardify(t,e,n,l=!0,i=null,s=null,o=null,c=null,r=[]){return new bn(t,e,n,l,i,s,o,c,r)}static Icon(t,e,n=null,l=null){return new gn(t,e,n,l)}static Property(t,e){return new $n(t,e)}static Action(t,e,n){return new vn(t,e,n)}}function xn(t){let e,n,l,i,s;const o=t[3].default,c=r(o,t,t[2],null);return{c(){e=v("section"),n=v("header"),l=b(t[0]),i=y(),c&&c.c(),_(n,"class","Qlsdj8n"),_(e,"class","Qlsdj8n"),C(e,"wide",t[1])},m(t,o){m(t,e,o),p(e,n),p(n,l),p(e,i),c&&c.m(e,null),s=!0},p(t,[n]){(!s||1&n)&&E(l,t[0]),c&&c.p&&(!s||4&n)&&u(c,o,t,t[2],n,null,null),2&n&&C(e,"wide",t[1])},i(t){s||(G(c,t),s=!0)},o(t){tt(c,t),s=!1},d(t){t&&g(e),c&&c.d(t)}}}function wn(t,e,n){let{$$slots:l={},$$scope:i}=e,{label:s}=e,{wide:o}=e;return t.$$set=t=>{"label"in t&&n(0,s=t.label),"wide"in t&&n(1,o=t.wide),"$$scope"in t&&n(2,i=t.$$scope)},[s,o,i,l]}yn.Component=class extends at{constructor(t){super(),rt(this,t,mn,pn,o,{item:0,list:1})}};class kn extends at{constructor(t){super(),rt(this,t,wn,xn,o,{label:0,wide:1})}}function Qn(t){let e;return{c(){e=v("i"),_(e,"class","hint-marker fad fa-info-circle Qzqtrvy")},m(t,n){m(t,e,n)},d(t){t&&g(e)}}}function _n(t){let e;return{c(){e=v("div"),_(e,"class","hint Qzqtrvy")},m(n,l){m(n,e,l),e.innerHTML=t[2]},p(t,n){4&n&&(e.innerHTML=t[2])},d(t){t&&g(e)}}}function En(t){let e,n,l,i,s,o,c,a,f=t[2]&&Qn();const d=t[4].default,h=r(d,t,t[3],null);let $=t[2]&&_n(t);return{c(){e=v("section"),n=v("span"),f&&f.c(),l=y(),i=b(t[0]),s=y(),h&&h.c(),o=y(),$&&$.c(),c=x(),_(n,"class","label Qzqtrvy"),_(e,"class","Qzqtrvy"),C(e,"vertical",!t[1])},m(t,r){m(t,e,r),p(e,n),f&&f.m(n,null),p(n,l),p(n,i),p(e,s),h&&h.m(e,null),m(t,o,r),$&&$.m(t,r),m(t,c,r),a=!0},p(t,[s]){t[2]?f||(f=Qn(),f.c(),f.m(n,l)):f&&(f.d(1),f=null),(!a||1&s)&&E(i,t[0]),h&&h.p&&(!a||8&s)&&u(h,d,t,t[3],s,null,null),2&s&&C(e,"vertical",!t[1]),t[2]?$?$.p(t,s):($=_n(t),$.c(),$.m(c.parentNode,c)):$&&($.d(1),$=null)},i(t){a||(G(h,t),a=!0)},o(t){tt(h,t),a=!1},d(t){t&&g(e),f&&f.d(),h&&h.d(t),t&&g(o),$&&$.d(t),t&&g(c)}}}function Mn(t,e,n){let{$$slots:l={},$$scope:i}=e,{label:s}=e,{inlineLabel:o}=e,{hint:c}=e;return t.$$set=t=>{"label"in t&&n(0,s=t.label),"inlineLabel"in t&&n(1,o=t.inlineLabel),"hint"in t&&n(2,c=t.hint),"$$scope"in t&&n(3,i=t.$$scope)},[s,o,c,i,l]}class Sn extends at{constructor(t){super(),rt(this,t,Mn,En,o,{label:0,inlineLabel:1,hint:2})}}function On(e){let n,l,i,s,o,c,r,a,u,f;return{c(){n=v("div"),l=v("i"),i=y(),s=v("b"),o=b(e[0]),c=b(" ("),r=b(e[1]),a=b(" / "),u=b(e[2]),f=b(")"),_(l,"class","fas fa-exclamation-circle Qfzgwv6"),_(n,"class","Qfzgwv6")},m(t,e){m(t,n,e),p(n,l),p(n,i),p(n,s),p(s,o),p(n,c),p(n,r),p(n,a),p(n,u),p(n,f)},p(t,[e]){1&e&&E(o,t[0]),2&e&&E(r,t[1]),4&e&&E(u,t[2])},i:t,o:t,d(t){t&&g(n)}}}function zn(t,e,n){let{message:l}=e,{field:i}=e,{label:s}=e;return t.$$set=t=>{"message"in t&&n(0,l=t.message),"field"in t&&n(1,i=t.field),"label"in t&&n(2,s=t.label)},[l,i,s]}class Cn extends at{constructor(t){super(),rt(this,t,zn,On,o,{message:0,field:1,label:2})}}function Tn(t,e,n){const l=t.slice();return l[7]=e[n],l}function jn(t,e,n){const l=t.slice();return l[10]=e[n],l[11]=e,l[12]=n,l}function Fn(t,e,n){const l=t.slice();return l[13]=e[n],l}function Ln(t,e,n){const l=t.slice();return l[16]=e[n],l}function Nn(t){let e,n,l,i,s,o;function c(){return t[5](t[16])}return{c(){e=v("button"),n=v("i"),_(n,"class",l=f(t[16].icon)+" Q8nwlse"),e.disabled=i=!t[16].active(t[0]),_(e,"class","Q8nwlse")},m(t,l){m(t,e,l),p(e,n),s||(o=w(e,"click",c),s=!0)},p(s,o){t=s,1&o&&l!==(l=f(t[16].icon)+" Q8nwlse")&&_(n,"class",l),1&o&&i!==(i=!t[16].active(t[0]))&&(e.disabled=i)},d(t){t&&g(e),s=!1,o()}}}function An(t){let n,l,i,s;const o=[{name:t[10].field},t[10].props];function c(e){t[6](e,t[10])}var r=t[10].component;function a(t){let n={};for(let t=0;t<o.length;t+=1)n=e(n,o[t]);return void 0!==t[1][t[10].field]&&(n.value=t[1][t[10].field]),{props:n}}return r&&(n=new r(a(t)),P.push((()=>it(n,"value",c)))),{c(){n&&st(n.$$.fragment),i=x()},m(t,e){n&&ot(n,t,e),m(t,i,e),s=!0},p(e,s){t=e;const u=1&s?nt(o,[{name:t[10].field},lt(t[10].props)]):{};var f;if(!l&&3&s&&(l=!0,u.value=t[1][t[10].field],f=()=>l=!1,I.push(f)),r!==(r=t[10].component)){if(n){X();const t=n;tt(t.$$.fragment,1,0,(()=>{ct(t,1)})),Z()}r?(n=new r(a(t)),P.push((()=>it(n,"value",c))),st(n.$$.fragment),G(n.$$.fragment,1),ot(n,i.parentNode,i)):n=null}else r&&n.$set(u)},i(t){s||(n&&G(n.$$.fragment,t),s=!0)},o(t){n&&tt(n.$$.fragment,t),s=!1},d(t){t&&g(i),n&&ct(n,t)}}}function Pn(t){let e,n,l=t[2][t[10].field],i=[];for(let e=0;e<l.length;e+=1)i[e]=Bn(Fn(t,l,e));const s=t=>tt(i[t],1,1,(()=>{i[t]=null}));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=x()},m(t,l){for(let e=0;e<i.length;e+=1)i[e].m(t,l);m(t,e,l),n=!0},p(t,n){if(5&n){let o;for(l=t[2][t[10].field],o=0;o<l.length;o+=1){const s=Fn(t,l,o);i[o]?(i[o].p(s,n),G(i[o],1)):(i[o]=Bn(s),i[o].c(),G(i[o],1),i[o].m(e.parentNode,e))}for(X(),o=l.length;o<i.length;o+=1)s(o);Z()}},i(t){if(!n){for(let t=0;t<l.length;t+=1)G(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)tt(i[t]);n=!1},d(t){$(i,t),t&&g(e)}}}function Bn(t){let e,n;return e=new Cn({props:{message:t[13],field:t[10].field,label:t[10].label}}),{c(){st(e.$$.fragment)},m(t,l){ot(e,t,l),n=!0},p(t,n){const l={};5&n&&(l.message=t[13]),1&n&&(l.field=t[10].field),1&n&&(l.label=t[10].label),e.$set(l)},i(t){n||(G(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){ct(e,t)}}}function In(t){let e,n,l,i;e=new Sn({props:{label:t[10].label,inlineLabel:t[10].inlineLabel,hint:t[10].hint,$$slots:{default:[An]},$$scope:{ctx:t}}});let s=t[2][t[10].field]&&Pn(t);return{c(){st(e.$$.fragment),n=y(),s&&s.c(),l=x()},m(t,o){ot(e,t,o),m(t,n,o),s&&s.m(t,o),m(t,l,o),i=!0},p(t,n){const i={};1&n&&(i.label=t[10].label),1&n&&(i.inlineLabel=t[10].inlineLabel),1&n&&(i.hint=t[10].hint),524291&n&&(i.$$scope={dirty:n,ctx:t}),e.$set(i),t[2][t[10].field]?s?(s.p(t,n),5&n&&G(s,1)):(s=Pn(t),s.c(),G(s,1),s.m(l.parentNode,l)):s&&(X(),tt(s,1,1,(()=>{s=null})),Z())},i(t){i||(G(e.$$.fragment,t),G(s),i=!0)},o(t){tt(e.$$.fragment,t),tt(s),i=!1},d(t){ct(e,t),t&&g(n),s&&s.d(t),t&&g(l)}}}function qn(t){let e,n,l=t[7].inputs,i=[];for(let e=0;e<l.length;e+=1)i[e]=In(jn(t,l,e));const s=t=>tt(i[t],1,1,(()=>{i[t]=null}));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=y()},m(t,l){for(let e=0;e<i.length;e+=1)i[e].m(t,l);m(t,e,l),n=!0},p(t,n){if(7&n){let o;for(l=t[7].inputs,o=0;o<l.length;o+=1){const s=jn(t,l,o);i[o]?(i[o].p(s,n),G(i[o],1)):(i[o]=In(s),i[o].c(),G(i[o],1),i[o].m(e.parentNode,e))}for(X(),o=l.length;o<i.length;o+=1)s(o);Z()}},i(t){if(!n){for(let t=0;t<l.length;t+=1)G(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)tt(i[t]);n=!1},d(t){$(i,t),t&&g(e)}}}function Dn(t){let e,n;return e=new kn({props:{label:t[7].label,wide:t[7].wide,$$slots:{default:[qn]},$$scope:{ctx:t}}}),{c(){st(e.$$.fragment)},m(t,l){ot(e,t,l),n=!0},p(t,n){const l={};1&n&&(l.label=t[7].label),1&n&&(l.wide=t[7].wide),524295&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(G(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){ct(e,t)}}}function Hn(t){let e,n,l,i,s,o,c,r,a,u,f,d,h,x,w,k=t[0].label+"",Q=t[0].info+"",M=t[0].buttons,S=[];for(let e=0;e<M.length;e+=1)S[e]=Nn(Ln(t,M,e));let O=t[0].class.sections,z=[];for(let e=0;e<O.length;e+=1)z[e]=Dn(Tn(t,O,e));const C=t=>tt(z[t],1,1,(()=>{z[t]=null}));return{c(){e=v("header"),n=v("i"),i=y(),s=v("div"),o=v("div"),c=b(k),r=y(),a=v("div"),u=b(Q),f=y(),d=v("nav");for(let t=0;t<S.length;t+=1)S[t].c();h=y(),x=v("main");for(let t=0;t<z.length;t+=1)z[t].c();_(n,"class",l="icon "+t[0].icon+" Q8nwlse"),_(o,"class","label Q8nwlse"),_(a,"class","info Q8nwlse"),_(d,"class","nav Q8nwlse"),_(e,"class","Q8nwlse"),_(x,"class","Q8nwlse")},m(t,l){m(t,e,l),p(e,n),p(e,i),p(e,s),p(s,o),p(o,c),p(s,r),p(s,a),p(a,u),p(e,f),p(e,d);for(let t=0;t<S.length;t+=1)S[t].m(d,null);m(t,h,l),m(t,x,l);for(let t=0;t<z.length;t+=1)z[t].m(x,null);w=!0},p(t,[e]){if((!w||1&e&&l!==(l="icon "+t[0].icon+" Q8nwlse"))&&_(n,"class",l),(!w||1&e)&&k!==(k=t[0].label+"")&&E(c,k),(!w||1&e)&&Q!==(Q=t[0].info+"")&&E(u,Q),1&e){let n;for(M=t[0].buttons,n=0;n<M.length;n+=1){const l=Ln(t,M,n);S[n]?S[n].p(l,e):(S[n]=Nn(l),S[n].c(),S[n].m(d,null))}for(;n<S.length;n+=1)S[n].d(1);S.length=M.length}if(7&e){let n;for(O=t[0].class.sections,n=0;n<O.length;n+=1){const l=Tn(t,O,n);z[n]?(z[n].p(l,e),G(z[n],1)):(z[n]=Dn(l),z[n].c(),G(z[n],1),z[n].m(x,null))}for(X(),n=O.length;n<z.length;n+=1)C(n);Z()}},i(t){if(!w){for(let t=0;t<O.length;t+=1)G(z[t]);w=!0}},o(t){z=z.filter(Boolean);for(let t=0;t<z.length;t+=1)tt(z[t]);w=!1},d(t){t&&g(e),$(S,t),t&&g(h),t&&g(x),$(z,t)}}}function Jn(t,e,n){let l,i,{doc:s}=e,o=s.item;c(t,o,(t=>n(1,l=t)));let r=s.validationErrors;c(t,r,(t=>n(2,i=t))),s.load();return t.$$set=t=>{"doc"in t&&n(0,s=t.doc)},[s,l,i,o,r,t=>t.onClick(s),function(e,n){t.$$.not_equal(l[n.field],e)&&(l[n.field]=e,o.set(l))}]}class Vn{constructor(t,e){this.label=t,this.wide=e,this.inputs=[]}add(...t){return t.forEach((t=>this.inputs.push(t))),this}}class Yn extends de{constructor(){super(...arguments),this.validationErrors=gt([]),this._item={id:null},this.item=gt(this._item)}get class(){return Object.getPrototypeOf(this).constructor}static create(t,e,n,l,i,s,o,c=(t=>"id: "+t.id)){return Object.assign(class extends(this){},{$idPrefix:t,list:e,icon:n,buttons:i,label:o,sections:s,fetcher:l,info:c})}get label(){return this.class.label(this._item)}get info(){return this.class.info(this._item)}get list(){return this.class.list}get exists(){return"number"==typeof this._item.id}get buttons(){return this.class.buttons}static addAction(t){this.buttons.push(t)}load(){this.class.fetcher.get(this.id).then((t=>{this._item=t,this.item.set(t),this.id=t.id,fe.update((t=>t))})).catch((t=>{throw this.close(),t}))}save(){this.validationErrors.set({}),this.class.fetcher.save(this.id,this._item).then((t=>{vt.success("Saved successfully"),this.id=t.id,this.list.reload(),this.load()})).catch((t=>{throw t instanceof Wt&&t.response.json().then((t=>{let e={};t.forEach((t=>{void 0===e[t.field]&&(e[t.field]=[]),e[t.field].push(t.message)})),this.validationErrors.set(e)})),t}))}delete(){confirm("You are about to delete:\n"+this.label+"\nAre you sure?")&&this.class.fetcher.delete(this.id).then((()=>this.close())).then((()=>this.list.reload()))}static addSection(t,e=!1){let n=new Vn(t,e);return this.sections.push(n),n}static createSection(t,e=!1){return new Vn(t,e)}}Yn.component=class extends at{constructor(t){super(),rt(this,t,Jn,Hn,o,{doc:0})}},Yn.sections=[];class Rn{constructor(t){this.api=t,this.api=this.api+"/",this.attachment=new Un(this.api+"attachments/")}get(t){return fetch(this.api+(null!==t?t:"blank")).then(Kt)}save(t,e){return fetch(this.api+(null!==t?t:"new"),{method:"POST",body:JSON.stringify({item:e})}).then(Kt)}delete(t){return fetch(this.api+t,{method:"DELETE"}).then(Kt)}}class Un{constructor(t){this.api=t}get(t,e){return fetch(this.api+t+"/"+e).then(Kt)}upload(t,e,n){let l=new FormData;return l.append("file",e),l.append("collection",t),fetch(this.api+"upload/"+n,{method:"POST",body:l}).then(Kt)}modify(t,e,n){return fetch(this.api+"modify/"+t,{method:"POST",body:JSON.stringify({filename:e,data:n})}).then(Kt)}remove(t,e,n){return fetch(this.api+"delete/"+e,{method:"POST",body:JSON.stringify({filename:n,collection:t})}).then(Kt)}order(t,e,n,l){return fetch(this.api+"order/"+t,{method:"POST",body:JSON.stringify({collection:e,index:l,filename:n})}).then(Kt)}add(t,e,n,l){return fetch(this.api+"add/"+t,{method:"POST",body:JSON.stringify({collection:e,filename:n,from:l})}).then(Kt)}}function Wn(e){let n,l,i;return{c(){n=v("input"),_(n,"type","text"),_(n,"class","Qecdhov")},m(t,s){m(t,n,s),M(n,e[0]),l||(i=w(n,"input",e[2]),l=!0)},p(t,[e]){1&e&&n.value!==t[0]&&M(n,t[0])},i:t,o:t,d(t){t&&g(n),l=!1,i()}}}function Kn(t,e,n){let{value:l=""}=e;return t.$$set=t=>{"value"in t&&n(0,l=t.value)},[l,"",function(){l=this.value,n(0,l)}]}class Xn{constructor(t,e=null){this.field=t,this.label=e,this.hint=null,this.properties={},this.inlineLabel=!0,"object"==typeof t?(this.label=this.label??t.label,this.field=t.field):this.label=null!==this.label?this.label:this.field.toString()}get compact(){return this.inlineLabel=!0,this}get wide(){return this.inlineLabel=!1,this}get component(){return Object.getPrototypeOf(this).constructor.component}addHint(t){return this.hint=t,this}}class Zn extends Xn{}function Gn(e){let n,l,i;return{c(){n=v("input"),_(n,"type","checkbox"),_(n,"class","Q91bogf")},m(t,s){m(t,n,s),n.checked=e[0],l||(i=w(n,"change",e[2]),l=!0)},p(t,[e]){1&e&&(n.checked=t[0])},i:t,o:t,d(t){t&&g(n),l=!1,i()}}}function tl(t,e,n){let{value:l=!1}=e;return t.$$set=t=>{"value"in t&&n(0,l=t.value)},t.$$.update=()=>{1&t.$$.dirty&&n(0,l=l??!1)},[l,"",function(){l=this.checked,n(0,l)}]}Zn.component=class extends at{constructor(t){super(),rt(this,t,Kn,Wn,o,{value:0,name:1})}get name(){return this.$$.ctx[1]}};class el extends Xn{inline(){}}function nl(e){let n,l,s;return{c(){n=v("input"),_(n,"type","text"),_(n,"class","Qecdhov")},m(t,i){m(t,n,i),M(n,e[0]),l||(s=[w(n,"input",e[3]),w(n,"input",e[1])],l=!0)},p(t,[e]){1&e&&n.value!==t[0]&&M(n,t[0])},i:t,o:t,d(t){t&&g(n),l=!1,i(s)}}}function ll(t,e,n){let{value:l="0"}=e,i=l;return t.$$set=t=>{"value"in t&&n(0,l=t.value)},[l,function(){if(""===l)return n(0,l="0");if("0-"===l||"-"===l)return n(0,l="-0");let t=parseInt(l);isNaN(t)?n(0,l=i):n(0,l=t.toString()),i=l},"",function(){l=this.value,n(0,l)}]}el.component=class extends at{constructor(t){super(),rt(this,t,tl,Gn,o,{value:0,name:1})}get name(){return this.$$.ctx[1]}};class il extends Xn{}function sl(e){let n,l,s;return{c(){n=v("input"),_(n,"type","text"),_(n,"class","Qecdhov")},m(t,i){m(t,n,i),M(n,e[0]),l||(s=[w(n,"input",e[3]),w(n,"input",e[1])],l=!0)},p(t,[e]){1&e&&n.value!==t[0]&&M(n,t[0])},i:t,o:t,d(t){t&&g(n),l=!1,i(s)}}}function ol(t,e,n){let{value:l="0"}=e,i=l;return t.$$set=t=>{"value"in t&&n(0,l=t.value)},[l,function(){if(""===l)return n(0,l="0");if("0-"===l||"-"===l)return n(0,l="-0");let t=parseFloat(l);isNaN(t)?n(0,l=i):n(0,l=t.toString()),Math.ceil(t)===t&&n(0,l+=".0"),i=l},"",function(){l=this.value,n(0,l)}]}il.component=class extends at{constructor(t){super(),rt(this,t,ll,nl,o,{name:2,value:0})}get name(){return this.$$.ctx[2]}};class cl extends Xn{}function rl(t,e,n){const l=t.slice();return l[5]=e[n],l}function al(t){let e,n,l,i,s,o,c,r,a=t[5].label+"";return{c(){e=v("label"),n=v("input"),s=y(),o=b(a),_(n,"type","checkbox"),n.value=l=t[5].value,n.checked=i=t[0].indexOf(t[5].value)>=0,_(n,"class","Q11xkb35"),_(e,"class","Q11xkb35")},m(l,i){m(l,e,i),p(e,n),p(e,s),p(e,o),c||(r=w(n,"change",t[3]),c=!0)},p(t,e){2&e&&l!==(l=t[5].value)&&(n.value=l),3&e&&i!==(i=t[0].indexOf(t[5].value)>=0)&&(n.checked=i),2&e&&a!==(a=t[5].label+"")&&E(o,a)},d(t){t&&g(e),c=!1,r()}}}function ul(e){let n,l=e[1],i=[];for(let t=0;t<l.length;t+=1)i[t]=al(rl(e,l,t));return{c(){n=v("main");for(let t=0;t<i.length;t+=1)i[t].c();_(n,"class","Q11xkb35"),C(n,"inline",e[2])},m(t,e){m(t,n,e);for(let t=0;t<i.length;t+=1)i[t].m(n,null)},p(t,[e]){if(11&e){let s;for(l=t[1],s=0;s<l.length;s+=1){const o=rl(t,l,s);i[s]?i[s].p(o,e):(i[s]=al(o),i[s].c(),i[s].m(n,null))}for(;s<i.length;s+=1)i[s].d(1);i.length=l.length}4&e&&C(n,"inline",t[2])},i:t,o:t,d(t){t&&g(n),$(i,t)}}}function fl(t,e,n){let{value:l=[]}=e,{options:i=[]}=e,{inline:s}=e;return t.$$set=t=>{"value"in t&&n(0,l=t.value),"options"in t&&n(1,i=t.options),"inline"in t&&n(2,s=t.inline)},[l,i,s,function(t){let e=t.target.value,n=l.indexOf(e);-1===n?l.push(e):l.splice(n,1)},""]}cl.component=class extends at{constructor(t){super(),rt(this,t,ol,sl,o,{name:2,value:0})}get name(){return this.$$.ctx[2]}};class dl extends Xn{constructor(){super(...arguments),this.props={options:[],inline:!1}}get inline(){return this.props.inline=!0,this}options(t){let e=[];if(t instanceof Array)t.forEach((t=>{"string"==typeof t?e.push({value:t,label:t}):void 0!==t.label&&void 0!==t.value?e.push({value:t.value,label:t.label}):e.push({value:Object.keys(t)[0],label:t[Object.keys(t)[0]]})}));else{Object.keys(t).forEach((n=>e.push({value:n,label:t[n]})))}return this.props.options=e,this}}function hl(t,e,n){const l=t.slice();return l[4]=e[n],l}function pl(t){let e,n,l,i,s,o,c,r,a=t[4].label+"";return{c(){e=v("label"),n=v("input"),s=y(),o=b(a),_(n,"name",t[2]),_(n,"type","radio"),n.value=l=t[4].value,n.checked=i=t[4].value===t[0],_(n,"class","Qf4zgwr"),_(e,"class","Qf4zgwr")},m(l,i){m(l,e,i),p(e,n),p(e,s),p(e,o),c||(r=w(n,"input",t[3]),c=!0)},p(t,e){2&e&&l!==(l=t[4].value)&&(n.value=l),3&e&&i!==(i=t[4].value===t[0])&&(n.checked=i),2&e&&a!==(a=t[4].label+"")&&E(o,a)},d(t){t&&g(e),c=!1,r()}}}function ml(e){let n,l=e[1],i=[];for(let t=0;t<l.length;t+=1)i[t]=pl(hl(e,l,t));return{c(){n=v("main");for(let t=0;t<i.length;t+=1)i[t].c();_(n,"class","Qf4zgwr")},m(t,e){m(t,n,e);for(let t=0;t<i.length;t+=1)i[t].m(n,null)},p(t,[e]){if(15&e){let s;for(l=t[1],s=0;s<l.length;s+=1){const o=hl(t,l,s);i[s]?i[s].p(o,e):(i[s]=pl(o),i[s].c(),i[s].m(n,null))}for(;s<i.length;s+=1)i[s].d(1);i.length=l.length}},i:t,o:t,d(t){t&&g(n),$(i,t)}}}function gl(t,e,n){let{value:l=""}=e,{options:i=[]}=e;return t.$$set=t=>{"value"in t&&n(0,l=t.value),"options"in t&&n(1,i=t.options)},[l,i,"",function(t){n(0,l=t.target.value)}]}dl.component=class extends at{constructor(t){super(),rt(this,t,fl,ul,o,{value:0,options:1,inline:2,name:4})}get name(){return this.$$.ctx[4]}};class $l extends Xn{constructor(){super(...arguments),this.props={options:[],inline:!1}}get inline(){return this.props.inline=!0,this}options(t){let e=[];if(t instanceof Array)t.forEach((t=>{"string"==typeof t?e.push({value:t,label:t}):void 0!==t.label&&void 0!==t.value?e.push({value:t.value,label:t.label}):e.push({value:Object.keys(t)[0],label:t[Object.keys(t)[0]]})}));else{Object.keys(t).forEach((n=>e.push({value:n,label:t[n]})))}return this.props.options=e,this}}function vl(t,e,n){const l=t.slice();return l[5]=e[n],l}function bl(t){let e,n,l,i=t[5].label+"";return{c(){e=v("option"),n=b(i),e.__value=l=t[5].value,e.value=e.__value},m(t,l){m(t,e,l),p(e,n)},p(t,s){2&s&&i!==(i=t[5].label+"")&&E(n,i),2&s&&l!==(l=t[5].value)&&(e.__value=l,e.value=e.__value)},d(t){t&&g(e)}}}function yl(e){let n,l,i,s=e[1],o=[];for(let t=0;t<s.length;t+=1)o[t]=bl(vl(e,s,t));return{c(){n=v("select");for(let t=0;t<o.length;t+=1)o[t].c();_(n,"name",e[2]),_(n,"class","Q34nr8x"),void 0===e[0]&&J((()=>e[3].call(n)))},m(t,s){m(t,n,s);for(let t=0;t<o.length;t+=1)o[t].m(n,null);O(n,e[0]),l||(i=w(n,"change",e[3]),l=!0)},p(t,[e]){if(2&e){let l;for(s=t[1],l=0;l<s.length;l+=1){const i=vl(t,s,l);o[l]?o[l].p(i,e):(o[l]=bl(i),o[l].c(),o[l].m(n,null))}for(;l<o.length;l+=1)o[l].d(1);o.length=s.length}3&e&&O(n,t[0])},i:t,o:t,d(t){t&&g(n),$(o,t),l=!1,i()}}}function xl(t,e,n){let{value:l=""}=e,{options:i=[]}=e;return t.$$set=t=>{"value"in t&&n(0,l=t.value),"options"in t&&n(1,i=t.options)},[l,i,"",function(){l=z(this),n(0,l),n(1,i)}]}$l.component=class extends at{constructor(t){super(),rt(this,t,gl,ml,o,{value:0,options:1,name:2})}get name(){return this.$$.ctx[2]}};class wl extends Xn{constructor(){super(...arguments),this.props={options:[]}}options(t){let e=[];if(t instanceof Array)t.forEach((t=>{"string"==typeof t?e.push({value:t,label:t}):void 0!==t.label&&void 0!==t.value?e.push({value:t.value,label:t.label}):e.push({value:Object.keys(t)[0],label:t[Object.keys(t)[0]]})}));else{Object.keys(t).forEach((n=>e.push({value:n,label:t[n]})))}return this.props.options=e,this}}function kl(e){let n,l,s,o;return{c(){n=v("div"),l=v("textarea"),_(l,"class","Q1tywl61"),C(l,"code",e[1]),_(n,"data-replicated-value",e[0]),_(n,"class","Q1tywl61"),C(n,"growing",!0),C(n,"code",e[1])},m(t,i){m(t,n,i),p(n,l),M(l,e[0]),s||(o=[w(l,"keydown",Ql),w(l,"input",e[3])],s=!0)},p(t,[e]){1&e&&M(l,t[0]),2&e&&C(l,"code",t[1]),1&e&&_(n,"data-replicated-value",t[0]),2&e&&C(n,"code",t[1])},i:t,o:t,d(t){t&&g(n),s=!1,i(o)}}}function Ql(t){let e=t.target;if(9===t.keyCode){let n=e.value,l=e.selectionStart,i=e.selectionEnd;e.value=n.substring(0,l)+"\t"+n.substring(i),e.selectionStart=e.selectionEnd=l+1,t.preventDefault()}}function _l(t,e,n){let{value:l=""}=e;let{code:i=!1}=e;return t.$$set=t=>{"value"in t&&n(0,l=t.value),"code"in t&&n(1,i=t.code)},[l,i,"",function(){l=this.value,n(0,l)}]}wl.component=class extends at{constructor(t){super(),rt(this,t,xl,yl,o,{value:0,options:1,name:2})}get name(){return this.$$.ctx[2]}};class El extends Xn{constructor(){super(...arguments),this.props={code:!1}}get code(){return this.props.code=!0,this}}function Ml(e){let n,l,s,o,c;return{c(){n=v("input"),l=y(),s=v("input"),_(n,"type","text"),_(n,"maxlength","7"),_(n,"minlength","7"),_(n,"class","Q1npq0or"),_(s,"type","color"),_(s,"class","Q1npq0or")},m(t,i){m(t,n,i),M(n,e[0]),m(t,l,i),m(t,s,i),M(s,e[0]),o||(c=[w(n,"input",e[2]),w(s,"input",e[3])],o=!0)},p(t,[e]){1&e&&n.value!==t[0]&&M(n,t[0]),1&e&&M(s,t[0])},i:t,o:t,d(t){t&&g(n),t&&g(l),t&&g(s),o=!1,i(c)}}}function Sl(t,e,n){let{value:l=""}=e;return t.$$set=t=>{"value"in t&&n(0,l=t.value)},[l,"",function(){l=this.value,n(0,l)},function(){l=this.value,n(0,l)}]}El.component=class extends at{constructor(t){super(),rt(this,t,_l,kl,o,{value:0,name:2,code:1})}get name(){return this.$$.ctx[2]}};class Ol extends Xn{}function zl(e){let n,l,i;return{c(){n=v("input"),_(n,"type","time"),_(n,"class","Qecdhov")},m(t,s){m(t,n,s),M(n,e[0]),l||(i=w(n,"input",e[2]),l=!0)},p(t,[e]){1&e&&M(n,t[0])},i:t,o:t,d(t){t&&g(n),l=!1,i()}}}function Cl(t,e,n){let{value:l=""}=e;return t.$$set=t=>{"value"in t&&n(0,l=t.value)},[l,"",function(){l=this.value,n(0,l)}]}Ol.component=class extends at{constructor(t){super(),rt(this,t,Sl,Ml,o,{value:0,name:1})}get name(){return this.$$.ctx[1]}};class Tl extends Xn{}function jl(e){let n,l,s;return{c(){n=v("input"),_(n,"type","datetime-local"),_(n,"class","Qecdhov")},m(t,i){m(t,n,i),M(n,e[0]),l||(s=[w(n,"input",e[1]),w(n,"input",e[4])],l=!0)},p(t,[e]){1&e&&M(n,t[0])},i:t,o:t,d(t){t&&g(n),l=!1,i(s)}}}function Fl(t,e=!1,n=!1){if(""===t||null===t)return null;if(t instanceof Date||(t=new Date(t)),isNaN(t))return null;let l;return t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2)+(e?"T":" ")+("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)+":"+("0"+t.getSeconds()).slice(-2)+(n?(l=(new Date).getTimezoneOffset())?(l>0?"-":"+")+("0"+Math.floor(Math.abs(l)/60)).slice(-2)+":"+("0"+Math.floor(Math.abs(l)%60)).slice(-2):"Z":"")}function Ll(t,e,n){let l,{value:i=""}=e;return t.$$set=t=>{"value"in t&&n(2,i=t.value)},t.$$.update=()=>{4&t.$$.dirty&&n(0,l=Fl(i,!0))},[l,function(t){let e=t.target.value;n(2,i=Fl(e,!0,!0)??""),console.log(i)},i,"",function(){l=this.value,n(0,l),n(2,i)}]}Tl.component=class extends at{constructor(t){super(),rt(this,t,Cl,zl,o,{value:0,name:1})}get name(){return this.$$.ctx[1]}};class Nl extends Xn{}function Al(t,e,n){const l=t.slice();return l[15]=e[n],l}function Pl(t,e,n){const l=t.slice();return l[18]=e[n],l}function Bl(t){let e,n,l,i,s=t[18].value+"";function o(){return t[11](t[18])}return{c(){e=v("div"),n=b(s),_(e,"class","Qy0x57")},m(t,s){m(t,e,s),p(e,n),l||(i=w(e,"click",o),l=!0)},p(e,l){t=e,4&l&&s!==(s=t[18].value+"")&&E(n,s)},d(t){t&&g(e),l=!1,i()}}}function Il(t){let e,n=t[1],l=[];for(let e=0;e<n.length;e+=1)l[e]=Dl(Al(t,n,e));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=x()},m(t,n){for(let e=0;e<l.length;e+=1)l[e].m(t,n);m(t,e,n)},p(t,i){if(99&i){let s;for(n=t[1],s=0;s<n.length;s+=1){const o=Al(t,n,s);l[s]?l[s].p(o,i):(l[s]=Dl(o),l[s].c(),l[s].m(e.parentNode,e))}for(;s<l.length;s+=1)l[s].d(1);l.length=n.length}},d(t){$(l,t),t&&g(e)}}}function ql(t){let e,n,l;function i(){return t[13](t[15])}return{c(){e=v("i"),_(e,"class","open fas fa-external-link-alt Qy0x57")},m(t,s){m(t,e,s),n||(l=w(e,"click",i),n=!0)},p(e,n){t=e},d(t){t&&g(e),n=!1,l()}}}function Dl(t){let e,n,l,i,s,o,c,r,a,u,f,d,h=t[15].value+"",$=t[15].id+"";function x(){return t[12](t[15])}let k=t[0]&&ql(t);return{c(){e=v("span"),n=v("i"),l=y(),i=v("span"),s=b(h),o=b(" ("),c=b($),r=b(")"),a=y(),k&&k.c(),u=y(),_(n,"class","remove fas fa-times Qy0x57"),_(i,"class","Qy0x57"),_(e,"class","Qy0x57")},m(t,h){m(t,e,h),p(e,n),p(e,l),p(e,i),p(i,s),p(i,o),p(i,c),p(i,r),p(e,a),k&&k.m(e,null),p(e,u),f||(d=w(n,"click",x),f=!0)},p(n,l){t=n,2&l&&h!==(h=t[15].value+"")&&E(s,h),2&l&&$!==($=t[15].id+"")&&E(c,$),t[0]?k?k.p(t,l):(k=ql(t),k.c(),k.m(e,u)):k&&(k.d(1),k=null)},d(t){t&&g(e),k&&k.d(),f=!1,d()}}}function Hl(e){let n,l,i,s,o,c,r,a,u=e[2],f=[];for(let t=0;t<u.length;t+=1)f[t]=Bl(Pl(e,u,t));let d=null!==e[1]&&Il(e);return{c(){n=v("main"),l=v("input"),i=y(),s=v("div");for(let t=0;t<f.length;t+=1)f[t].c();o=y(),c=v("div"),d&&d.c(),_(l,"type","text"),_(l,"placeholder","search"),_(l,"class","Qy0x57"),_(s,"class","options Qy0x57"),_(c,"class","values Qy0x57"),_(n,"class","Qy0x57")},m(t,u){m(t,n,u),p(n,l),p(n,i),p(n,s);for(let t=0;t<f.length;t+=1)f[t].m(s,null);p(n,o),p(n,c),d&&d.m(c,null),r||(a=w(l,"input",e[3]),r=!0)},p(t,[e]){if(20&e){let n;for(u=t[2],n=0;n<u.length;n+=1){const l=Pl(t,u,n);f[n]?f[n].p(l,e):(f[n]=Bl(l),f[n].c(),f[n].m(s,null))}for(;n<f.length;n+=1)f[n].d(1);f.length=u.length}null!==t[1]?d?d.p(t,e):(d=Il(t),d.c(),d.m(c,null)):d&&(d.d(1),d=null)},i:t,o:t,d(t){t&&g(n),$(f,t),d&&d.d(),r=!1,a()}}}function Jl(t,e,n){let{value:l=""}=e,{api:i=""}=e;let{Form:s=null}=e,{multi:o=!1}=e,c=[],r="",a=[];function u(t){o?(l instanceof Array||n(7,l=[]),n(7,l=[...new Set([...l,t])])):n(7,l=t)}function f(t){if(o){let e=l.indexOf(t);-1!==e&&l.splice(e,1),n(7,l=[...l])}else n(7,l="")}function d(t){s.open(t)}L((()=>{null===l&&n(7,l=[]),l!==r&&(0===l.length?n(1,c=[]):fetch(i+"/get/"+l).then((t=>t.json().then((t=>n(1,c=t))))),r=l)}));return t.$$set=t=>{"value"in t&&n(7,l=t.value),"api"in t&&n(8,i=t.api),"Form"in t&&n(0,s=t.Form),"multi"in t&&n(10,o=t.multi)},[s,c,a,function(t){t.target.value.trim().length>=3?fetch(i+"/search/"+t.target.value).then((t=>t.json())).then((t=>n(2,a=t))):n(2,a=[])},u,f,d,l,i,"",o,t=>u(t.id),t=>f(t.id),t=>d(t.id)]}Nl.component=class extends at{constructor(t){super(),rt(this,t,Ll,jl,o,{value:2,name:3})}get name(){return this.$$.ctx[3]}};class Vl extends Xn{constructor(){super(...arguments),this.props={api:"",multi:!1,Form:null}}api(t){return this.props.api=t,this}form(t){return this.props.Form=t,this}get multi(){return this.props.multi=!0,this}}function Yl(e){let n,l,i,s;return{c(){n=v("button"),l=b(e[0]),_(n,"class","Q6zjvl8")},m(t,o){m(t,n,o),p(n,l),i||(s=w(n,"click",e[1]),i=!0)},p(t,[e]){1&e&&E(l,t[0])},i:t,o:t,d(t){t&&g(n),i=!1,s()}}}function Rl(t,e,n){let{value:l=""}=e;let{Editor:i=null}=e,{buttonText:s="Open"}=e;function o(t){n(2,l=t)}return t.$$set=t=>{"value"in t&&n(2,l=t.value),"Editor"in t&&n(4,i=t.Editor),"buttonText"in t&&n(0,s=t.buttonText)},[s,function(){Be.show(i,{value:l,save:o})},l,"",i]}Vl.component=class extends at{constructor(t){super(),rt(this,t,Jl,Hl,o,{value:7,api:8,name:9,Form:0,multi:10})}get name(){return this.$$.ctx[9]}};class Ul extends Xn{constructor(){super(...arguments),this.props={Editor:null,buttonText:"Open Editor"}}editor(t){return this.props.Editor=t,this}buttonText(t){return this.props.buttonText=t,this}}function Wl(t,e,n){const l=t.slice();return l[8]=e[n],l}function Kl(t){let e,n=t[0],l=[];for(let e=0;e<n.length;e+=1)l[e]=Xl(Wl(t,n,e));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=x()},m(t,n){for(let e=0;e<l.length;e+=1)l[e].m(t,n);m(t,e,n)},p(t,i){if(3&i){let s;for(n=t[0],s=0;s<n.length;s+=1){const o=Wl(t,n,s);l[s]?l[s].p(o,i):(l[s]=Xl(o),l[s].c(),l[s].m(e.parentNode,e))}for(;s<l.length;s+=1)l[s].d(1);l.length=n.length}},d(t){$(l,t),t&&g(e)}}}function Xl(t){let e,n,l,i,s,o,c,r,a,u,f,d,h=t[8].value+"",$=t[8].id+"";function x(){return t[6](t[8])}return{c(){e=v("span"),n=b(h),l=y(),i=v("i"),s=b("("),o=b($),c=b(")"),r=y(),a=v("i"),u=y(),_(i,"class","Q10d2l6t"),_(a,"class","open fas fa-external-link Q10d2l6t"),_(e,"class","Q10d2l6t")},m(t,h){m(t,e,h),p(e,n),p(e,l),p(e,i),p(i,s),p(i,o),p(i,c),p(e,r),p(e,a),p(e,u),f||(d=w(e,"click",x),f=!0)},p(e,l){t=e,1&l&&h!==(h=t[8].value+"")&&E(n,h),1&l&&$!==($=t[8].id+"")&&E(o,$)},d(t){t&&g(e),f=!1,d()}}}function Zl(e){let n,l,i=e[0]&&Kl(e);return{c(){n=v("main"),l=v("div"),i&&i.c(),_(l,"class","values Q10d2l6t"),_(n,"class","Q10d2l6t")},m(t,e){m(t,n,e),p(n,l),i&&i.m(l,null)},p(t,[e]){t[0]?i?i.p(t,e):(i=Kl(t),i.c(),i.m(l,null)):i&&(i.d(1),i=null)},i:t,o:t,d(t){t&&g(n),i&&i.d()}}}function Gl(t,e,n){let{value:l=""}=e,{api:i=""}=e;let{Form:s=null}=e,o=[],c="";function r(t){s.open(t)}L((()=>{l!==c&&(0===l.length?n(0,o=[]):fetch(i+"/get/"+l).then((t=>t.json().then((t=>n(0,o=t))))),c=l)}));return t.$$set=t=>{"value"in t&&n(2,l=t.value),"api"in t&&n(3,i=t.api),"Form"in t&&n(5,s=t.Form)},[o,r,l,i,"",s,t=>r(t.id)]}Ul.component=class extends at{constructor(t){super(),rt(this,t,Rl,Yl,o,{value:2,name:3,Editor:4,buttonText:0})}get name(){return this.$$.ctx[3]}};class ti extends Xn{constructor(){super(...arguments),this.props={api:"",Form:null}}api(t){return this.props.api=t,this}form(t){return this.props.Form=t,this}}ti.component=class extends at{constructor(t){super(),rt(this,t,Gl,Zl,o,{value:2,api:3,name:4,Form:5})}get name(){return this.$$.ctx[4]}};class ei{static create(t,e,n,l,i,s=(t=>"id: "+t.id)){return"string"==typeof l&&(l=new Rn(l)),Object.assign(class extends Yn{},{$idPrefix:e,list:t,icon:n,buttons:[],label:i,fetcher:l,info:s,sections:[]})}}ei.Doc=Yn,ei.Fetcher=Rn,ei.Section=Vn,ei.inputs=class{static string(t,e=null){return new Zn(t,e)}static checkbox(t,e=null){return new el(t,e)}static checkboxes(t,e=null){return new dl(t,e)}static integer(t,e=null){return new il(t,e)}static float(t,e=null){return new cl(t,e)}static radio(t,e=null){return new $l(t,e)}static time(t,e=null){return new Tl(t,e)}static select(t,e=null){return new wl(t,e)}static text(t,e=null){return new El(t,e)}static color(t,e=null){return new Ol(t,e)}static date(t,e=null){return new Nl(t,e)}static datetime(t,e=null){return new Nl(t,e)}static selector(t,e=null){return new Vl(t,e)}static editor(t,e=null){return new Ul(t,e)}static related(t,e=null){return new ti(t,e)}};class ni{constructor(t,e,n,l=(t=>!0)){this.icon=t,this.label=e,this.onClick=n,this.active=l}}const li=t=>({}),ii=t=>({}),si=t=>({}),oi=t=>({});function ci(t){let e,n,l,i,s,o,c,a,f,d,h;const $=t[7].nav,x=r($,t,t[9],oi),w=t[7].default,k=r(w,t,t[9],null),Q=t[7].footer,M=r(Q,t,t[9],ii);return{c(){e=v("main"),n=v("header"),l=v("i"),i=y(),s=v("div"),o=b(t[1]),c=y(),x&&x.c(),a=y(),f=v("section"),k&&k.c(),d=y(),M&&M.c(),_(l,"class",t[0]),_(e,"class","modalify"),C(e,"big",t[2]),C(e,"full",t[3]),C(e,"rounded",t[4])},m(r,u){m(r,e,u),p(e,n),p(n,l),p(n,i),p(n,s),p(s,o),p(n,c),x&&x.m(n,null),p(e,a),p(e,f),k&&k.m(f,null),p(e,d),M&&M.m(e,null),t[8](e),h=!0},p(t,n){(!h||1&n)&&_(l,"class",t[0]),(!h||2&n)&&E(o,t[1]),x&&x.p&&(!h||512&n)&&u(x,$,t,t[9],n,si,oi),k&&k.p&&(!h||512&n)&&u(k,w,t,t[9],n,null,null),M&&M.p&&(!h||512&n)&&u(M,Q,t,t[9],n,li,ii),4&n&&C(e,"big",t[2]),8&n&&C(e,"full",t[3]),16&n&&C(e,"rounded",t[4])},i(t){h||(G(x,t),G(k,t),G(M,t),h=!0)},o(t){tt(x,t),tt(k,t),tt(M,t),h=!1},d(n){n&&g(e),x&&x.d(n),k&&k.d(n),M&&M.d(n),t[8](null)}}}function ri(t){let e,n;return e=new pt({props:{icon:!1,$$slots:{default:[ci]},$$scope:{ctx:t}}}),{c(){st(e.$$.fragment)},m(t,l){ot(e,t,l),n=!0},p(t,[n]){const l={};575&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(G(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){ct(e,t)}}}function ai(t,e,n){let l,{$$slots:i={},$$scope:s}=e,{icon:o="inverse fad fa-atom"}=e,{title:c="Magic"}=e,{big:r=!1}=e,{full:a=!1}=e,{rounded:u=!1}=e;return t.$$set=t=>{"icon"in t&&n(0,o=t.icon),"title"in t&&n(1,c=t.title),"big"in t&&n(2,r=t.big),"full"in t&&n(3,a=t.full),"rounded"in t&&n(4,u=t.rounded),"$$scope"in t&&n(9,s=t.$$scope)},[o,c,r,a,u,l,function(t=800){return console.log("CALLED"),new Promise((e=>{l.classList.add("shake"),setTimeout((()=>{l.classList.remove("shake"),e(this)}),t)}))},i,function(t){P[t?"unshift":"push"]((()=>{l=t,n(5,l)}))},s]}class ui extends at{constructor(t){super(),rt(this,t,ai,ri,o,{icon:0,title:1,big:2,full:3,rounded:4,shake:6})}get shake(){return this.$$.ctx[6]}}var fi,di=(function(t,e){e.__esModule=!0,e.b=1,e.kb=1024,e.mb=e.kb*e.kb,e.gb=e.mb*e.kb,e.tb=e.gb*e.kb,e.pb=e.tb*e.kb,e.eb=e.pb*e.kb,e.zb=e.eb*e.kb,e.yb=e.zb*e.kb,e.units={b:e.b,kb:e.kb,mb:e.mb,gb:e.gb,tb:e.tb,pb:e.pb,eb:e.eb,zb:e.zb,yb:e.yb},e.parseFormat=/^((-|\+)?(\d+(?:\.\d+)?)) *(b|kb|mb|gb|tb|pb|eb|zb|yb)$/i,e.parseThousand=/\B(?=(\d{3})+(?!\d))/g}(fi={exports:{}},fi.exports),fi.exports),hi=Object.defineProperty({formatToObject:function(t){var e=di.parseFormat.exec(t);return{unit:e&&e[4],size:e&&parseFloat(e[1]),format:e&&e[0]}}},"__esModule",{value:!0}),pi=Object.defineProperty({toString:function(t,e){var n=void 0===e?{}:e,l=n.decimals,i=n.separator,s=void 0===i?"":i,o=n.everyThousand,c=void 0===o?"":o,r="B",a=t;return t>=0&&t<di.kb?r="B":t>=di.kb&&t<di.mb?r="KB":t>=di.mb&&t<di.gb?r="MB":t>=di.gb&&t<di.tb?r="GB":t>=di.tb&&t<di.pb?r="TB":t>=di.pb&&t<di.eb?r="PB":t>=di.eb&&t<di.zb?r="EB":t>=di.zb&&t<di.yb?r="ZB":t>=di.yb&&(r="YB"),a=t/di.units[r.toLowerCase()],void 0!==l&&(a=a.toFixed(l)),a=""+a+s+r,""!==c&&(a=a.replace(di.parseThousand,c)),a}},"__esModule",{value:!0}),mi=Object.defineProperty({toNumber:function(t){if(!isNaN(Number(t)))return Number(t);var e=hi.formatToObject(t);return e.unit&&e.size?di.units[e.unit.toLowerCase()]*e.size:null}},"__esModule",{value:!0}),gi=Object.defineProperty({cbytes:function(t,e){return"number"==typeof t?pi.toString(t,e):"string"==typeof t?mi.toNumber(t):void 0}},"__esModule",{value:!0}),$i=Object.defineProperty({sizeToObject:function(t){var e=gi.cbytes(t);return hi.formatToObject(e)}},"__esModule",{value:!0}),vi=Object.defineProperty({objectToFormat:function(t,e){var n=(void 0===e?{separator:""}:e).separator;return t.format&&t.size+n+t.unit}},"__esModule",{value:!0}),bi=gi.cbytes,yi=gi.cbytes,xi=pi.toString,wi=mi.toNumber,ki=vi.objectToFormat,Qi=hi.formatToObject,_i=$i.sizeToObject;function Ei(t){let e,n,l,s,o,c,r,a,u,f,d,h,$,b,x,k,Q,E,M,S,O,z;return{c(){e=v("main"),n=v("div"),l=v("img"),o=y(),c=v("img"),u=y(),f=v("div"),h=y(),$=v("div"),x=y(),k=v("div"),E=y(),M=v("div"),_(l,"alt",""),_(l,"draggable","false"),_(l,"class","back Q13d6rkl"),l.src!==(s=t[0].url)&&_(l,"src",s),_(c,"alt",""),_(c,"style",r="clip: rect("+t[2].y+"px, "+(t[2].x+t[2].width)+"px, "+(t[2].y+t[2].height)+"px, "+t[2].x+"px)"),_(c,"draggable","false"),_(c,"class","front Q13d6rkl"),c.src!==(a=t[0].url)&&_(c,"src",a),_(f,"class","frame Q13d6rkl"),_(f,"style",d="top:"+t[2].y+"px;width:"+t[2].width+"px;height:"+t[2].height+"px;left:"+t[2].x+"px;"),_($,"class","topleft Q13d6rkl"),_($,"style",b="top:"+(t[2].y-5)+"px;left:"+(t[2].x-5)+"px;"),_(k,"class","bottomright Q13d6rkl"),_(k,"style",Q="top:"+(t[2].y+t[2].height-5)+"px;left:"+(t[2].x+t[2].width-5)+"px;"),_(M,"class","focus Q13d6rkl"),_(M,"style",S="top:"+(t[3].y-5)+"px;left:"+(t[3].x-5)+"px;"),_(n,"class","container Q13d6rkl"),_(e,"class","Q13d6rkl")},m(i,s){m(i,e,s),p(e,n),p(n,l),p(n,o),p(n,c),p(n,u),p(n,f),p(n,h),p(n,$),t[18]($),p(n,x),p(n,k),t[21](k),p(n,E),p(n,M),t[24](M),t[25](n),O||(z=[w(l,"load",t[12]),w($,"mousedown",t[16]),w($,"mouseup",t[17]),w(k,"mousedown",t[19]),w(k,"mouseup",t[20]),w(M,"mousedown",t[22]),w(M,"mouseup",t[23]),w(n,"mousemove",t[10])],O=!0)},p(t,e){1&e&&l.src!==(s=t[0].url)&&_(l,"src",s),4&e&&r!==(r="clip: rect("+t[2].y+"px, "+(t[2].x+t[2].width)+"px, "+(t[2].y+t[2].height)+"px, "+t[2].x+"px)")&&_(c,"style",r),1&e&&c.src!==(a=t[0].url)&&_(c,"src",a),4&e&&d!==(d="top:"+t[2].y+"px;width:"+t[2].width+"px;height:"+t[2].height+"px;left:"+t[2].x+"px;")&&_(f,"style",d),4&e&&b!==(b="top:"+(t[2].y-5)+"px;left:"+(t[2].x-5)+"px;")&&_($,"style",b),4&e&&Q!==(Q="top:"+(t[2].y+t[2].height-5)+"px;left:"+(t[2].x+t[2].width-5)+"px;")&&_(k,"style",Q),8&e&&S!==(S="top:"+(t[3].y-5)+"px;left:"+(t[3].x-5)+"px;")&&_(M,"style",S)},d(n){n&&g(e),t[18](null),t[21](null),t[24](null),t[25](null),O=!1,i(z)}}}function Mi(e){let n,l,s,o,c,r;return{c(){n=v("nav"),l=v("button"),l.innerHTML='<i class="fas fa-crosshairs"></i>',s=y(),o=v("button"),o.innerHTML='<i class="fas fa-times"></i>',_(n,"slot","nav")},m(t,i){m(t,n,i),p(n,l),p(n,s),p(n,o),c||(r=[w(l,"click",e[9]),w(o,"click",e[11])],c=!0)},p:t,d(t){t&&g(n),c=!1,i(r)}}}function Si(t){let e,n;return e=new ui({props:{icon:"inverse far fa-image",title:"Edit image focus",$$slots:{nav:[Mi],default:[Ei]},$$scope:{ctx:t}}}),t[26](e),{c(){st(e.$$.fragment)},m(t,l){ot(e,t,l),n=!0},p(t,[n]){const l={};268435965&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(G(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(n){t[26](null),ct(e,n)}}}function Oi(t,e,n){let l,i,s,{close:o}=e,{doc:c}=e,{file:r={}}=e,{reload:a=null}=e;if(null===r.safezone)i={x:10,y:10,width:r.width-20,height:r.height-20};else{let t=r.safezone,e=t.length/4;i={x:parseInt(t.substr(0,e),36),y:parseInt(t.substr(e,e),36),width:parseInt(t.substr(2*e,e),36),height:parseInt(t.substr(3*e,e),36)}}if(null===r.focus)s={x:Math.ceil(r.width/2),y:Math.ceil(r.height/2)};else{let t=r.focus,e=t.length/2;s={x:parseInt(t.substr(0,e),36),y:parseInt(t.substr(e,e),36)}}let u,f,d,h,p=1,m=null;return t.$$set=t=>{"close"in t&&n(13,o=t.close),"doc"in t&&n(14,c=t.doc),"file"in t&&n(0,r=t.file),"reload"in t&&n(15,a=t.reload)},[r,l,i,s,m,u,f,d,h,function(){n(2,i={x:10,y:10,width:r.width*p-20,height:r.height*p-20}),n(3,s={x:Math.ceil(r.width*p/2),y:Math.ceil(r.height*p/2)})},function(t){if(0===t.buttons&&n(4,m=!1),!m)return;let e=t.clientX-h.getBoundingClientRect().x,l=t.clientY-h.getBoundingClientRect().y;switch(m){case"bottomright":n(2,i.width=Math.floor(Math.max(10,e-i.x)),i),n(2,i.height=Math.floor(Math.max(10,l-i.y)),i);break;case"topleft":n(2,i.x=Math.floor(Math.min(r.width*p-10,Math.max(0,e))),i),n(2,i.y=Math.floor(Math.min(r.height*p-10,Math.max(0,l))),i);break;case"focus":n(3,s.x=Math.floor(Math.min(r.width*p,Math.max(0,e))),s),n(3,s.y=Math.floor(Math.min(r.height*p,Math.max(0,l))),s)}n(3,s.x=Math.max(Math.min(s.x,i.x+i.width),i.x),s),n(3,s.y=Math.max(Math.min(s.y,i.y+i.height),i.y),s),i.x+i.width>r.width*p&&n(2,i.width=r.width*p-i.x,i),i.y+i.height>r.height*p&&n(2,i.height=r.height*p-i.y,i)},function(){let t={safezone:Math.floor(i.x/p).toString(36).padStart(3,"0")+Math.floor(i.y/p).toString(36).padStart(3,"0")+Math.floor(i.width/p).toString(36).padStart(3,"0")+Math.floor(i.height/p).toString(36).padStart(3,"0"),focus:Math.floor(s.x/p).toString(36).padStart(3,"0")+Math.floor(s.y/p).toString(36).padStart(3,"0")};n(0,r.safezone=t.safezone,r),n(0,r.focus=t.focus,r),c.class.fetcher.attachment.modify(c.id,r.name,t).then(o).then(a)},function(){p=h.getBoundingClientRect().width/r.width,n(3,s.x*=p,s),n(3,s.y*=p,s),n(2,i.x*=p,i),n(2,i.y*=p,i),n(2,i.width*=p,i),n(2,i.height*=p,i)},o,c,a,()=>n(4,m="topleft"),()=>n(4,m=!1),function(t){P[t?"unshift":"push"]((()=>{f=t,n(6,f)}))},()=>n(4,m="bottomright"),()=>n(4,m=!1),function(t){P[t?"unshift":"push"]((()=>{d=t,n(7,d)}))},()=>n(4,m="focus"),()=>n(4,m=!1),function(t){P[t?"unshift":"push"]((()=>{u=t,n(5,u)}))},function(t){P[t?"unshift":"push"]((()=>{h=t,n(8,h)}))},function(t){P[t?"unshift":"push"]((()=>{l=t,n(1,l)}))}]}bi.cbytes=yi,bi.toString=xi,bi.toNumber=wi,bi.objectToFormat=ki,bi.formatToObject=Qi,bi.sizeToObject=_i;class zi extends at{constructor(t){super(),rt(this,t,Oi,Si,o,{close:13,doc:14,file:0,reload:15})}}var Ci,Ti={image:"fa-file-image",pdf:"fa-file-pdf",word:"fa-file-word",powerpoint:"fa-file-powerpoint",excel:"fa-file-excel",csv:"fa-file-csv",audio:"fa-file-audio",video:"fa-file-video",archive:"fa-file-archive",code:"fa-file-code",text:"fa-file-alt",file:"fa-file"},ji=Object.defineProperty({default:Ti},"__esModule",{value:!0}),Fi=(Ci=ji)&&Ci.__esModule?Ci:{default:Ci};var Li={gif:Fi.default.image,jpeg:Fi.default.image,jpg:Fi.default.image,png:Fi.default.image,pdf:Fi.default.pdf,doc:Fi.default.word,docx:Fi.default.word,ppt:Fi.default.powerpoint,pptx:Fi.default.powerpoint,xls:Fi.default.excel,xlsx:Fi.default.excel,csv:Fi.default.csv,aac:Fi.default.audio,mp3:Fi.default.audio,ogg:Fi.default.audio,avi:Fi.default.video,flv:Fi.default.video,mkv:Fi.default.video,mp4:Fi.default.video,gz:Fi.default.archive,zip:Fi.default.archive,css:Fi.default.code,html:Fi.default.code,js:Fi.default.code,txt:Fi.default.text},Ni=Object.defineProperty({default:Li},"__esModule",{value:!0}),Ai=function(t){return t&&t.__esModule?t:{default:t}}(ji);var Pi={"image/gif":Ai.default.image,"image/jpeg":Ai.default.image,"image/png":Ai.default.image,"application/pdf":Ai.default.pdf,"application/msword":Ai.default.word,"application/vnd.openxmlformats-officedocument.wordprocessingml.document":Ai.default.word,"application/mspowerpoint":Ai.default.powerpoint,"application/vnd.openxmlformats-officedocument.presentationml.presentation":Ai.default.powerpoint,"application/msexcel":Ai.default.excel,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":Ai.default.excel,"text/csv":Ai.default.csv,"audio/aac":Ai.default.audio,"audio/wav":Ai.default.audio,"audio/mpeg":Ai.default.audio,"audio/mp4":Ai.default.audio,"audio/ogg":Ai.default.audio,"video/x-msvideo":Ai.default.video,"video/mpeg":Ai.default.video,"video/mp4":Ai.default.video,"video/ogg":Ai.default.video,"video/quicktime":Ai.default.video,"video/webm":Ai.default.video,"application/gzip":Ai.default.archive,"application/zip":Ai.default.archive,"text/css":Ai.default.code,"text/html":Ai.default.code,"text/javascript":Ai.default.code,"application/javascript":Ai.default.code,"text/plain":Ai.default.text,"text/richtext":Ai.default.text,"text/rtf":Ai.default.text},Bi=Object.defineProperty({default:Pi},"__esModule",{value:!0}),Ii=function(t){return qi.default[t.toLowerCase()]||Di.default.file},qi=Hi(Ni);Hi(Bi);var Di=Hi(ji);function Hi(t){return t&&t.__esModule?t:{default:t}}function Ji(t,e,n){const l=t.slice();return l[24]=e[n][0],l[25]=e[n][1],l[26]=e,l[27]=n,l}function Vi(t){let e,n,l,i,s,o=t[2].width+"",c=t[2].height+"";return{c(){e=v("div"),n=b("dimensions: "),l=b(o),i=b(" x "),s=b(c),_(e,"class","Qhud3le")},m(t,o){m(t,e,o),p(e,n),p(e,l),p(e,i),p(e,s)},p(t,e){4&e&&o!==(o=t[2].width+"")&&E(l,o),4&e&&c!==(c=t[2].height+"")&&E(s,c)},d(t){t&&g(e)}}}function Yi(t){let e,n,l,s,o,c,r,a,u;function f(){t[20].call(n,t[26],t[27])}function d(){t[21].call(s,t[26],t[27])}function h(){return t[22](t[27])}return{c(){e=v("div"),n=v("input"),l=y(),s=v("input"),o=y(),c=v("i"),r=y(),_(n,"class","key Qhud3le"),_(n,"placeholder","key"),_(s,"class","value Qhud3le"),_(s,"placeholder","value"),_(c,"class","fas fa-minus-circle Qhud3le"),_(e,"class","property Qhud3le")},m(i,g){m(i,e,g),p(e,n),M(n,t[24]),p(e,l),p(e,s),M(s,t[25]),p(e,o),p(e,c),p(e,r),a||(u=[w(n,"input",f),w(s,"input",d),w(c,"click",h)],a=!0)},p(e,l){t=e,256&l&&n.value!==t[24]&&M(n,t[24]),256&l&&s.value!==t[25]&&M(s,t[25])},d(t){t&&g(e),a=!1,i(u)}}}function Ri(t){let e,n,l,s,o,c,r,a,u,f,d,h,x,k,Q,S,O,z,C,T,j,F,L,N,A,P=t[2].url+"",B=bi(t[2].size,{separator:"",decimals:1})+"",I=t[2].size.toLocaleString()+"",q=t[2].isImage&&Vi(t),D=t[8],H=[];for(let e=0;e<D.length;e+=1)H[e]=Yi(Ji(t,D,e));return{c(){e=v("main"),n=v("div"),l=v("input"),s=y(),o=v("div"),c=v("input"),r=y(),a=v("div"),u=b("url: "),f=b(P),d=y(),h=v("div"),x=b("file size: "),k=b(B),Q=b(" ("),S=b(I),O=b(")"),z=y(),q&&q.c(),C=y(),T=v("div"),j=b("properties:"),F=v("i"),L=y();for(let t=0;t<H.length;t+=1)H[t].c();_(l,"placeholder","filename"),_(l,"type","text"),_(l,"class","Qhud3le"),_(n,"class","Qhud3le"),_(c,"placeholder","title"),_(c,"type","text"),_(c,"class","Qhud3le"),_(o,"class","Qhud3le"),_(a,"class","url Qhud3le"),_(h,"class","Qhud3le"),_(F,"class","fas fa-plus-circle Qhud3le"),_(T,"class","properties Qhud3le"),_(e,"class","Qhud3le")},m(i,g){m(i,e,g),p(e,n),p(n,l),M(l,t[5]),p(e,s),p(e,o),p(o,c),M(c,t[6]),p(e,r),p(e,a),p(a,u),p(a,f),p(e,d),p(e,h),p(h,x),p(h,k),p(h,Q),p(h,S),p(h,O),p(e,z),q&&q.m(e,null),p(e,C),p(e,T),p(T,j),p(T,F),p(e,L);for(let t=0;t<H.length;t+=1)H[t].m(e,null);N||(A=[w(l,"input",t[16]),w(c,"input",t[17]),w(a,"click",t[18]),w(F,"click",t[19])],N=!0)},p(t,n){if(32&n&&l.value!==t[5]&&M(l,t[5]),64&n&&c.value!==t[6]&&M(c,t[6]),4&n&&P!==(P=t[2].url+"")&&E(f,P),4&n&&B!==(B=bi(t[2].size,{separator:"",decimals:1})+"")&&E(k,B),4&n&&I!==(I=t[2].size.toLocaleString()+"")&&E(S,I),t[2].isImage?q?q.p(t,n):(q=Vi(t),q.c(),q.m(e,C)):q&&(q.d(1),q=null),1280&n){let l;for(D=t[8],l=0;l<D.length;l+=1){const i=Ji(t,D,l);H[l]?H[l].p(i,n):(H[l]=Yi(i),H[l].c(),H[l].m(e,null))}for(;l<H.length;l+=1)H[l].d(1);H.length=D.length}},d(t){t&&g(e),q&&q.d(),$(H,t),N=!1,i(A)}}}function Ui(e){let n,l,i;return{c(){n=v("button"),n.innerHTML='<i class="fas fa-image"></i>'},m(t,s){m(t,n,s),l||(i=w(n,"click",e[15]),l=!0)},p:t,d(t){t&&g(n),l=!1,i()}}}function Wi(t){let e,n,l,o,c,r,a,u=t[2].isImage&&Ui(t);return{c(){e=v("nav"),u&&u.c(),n=y(),l=v("button"),l.innerHTML='<i class="fas fa-trash-alt"></i>',o=y(),c=v("button"),c.innerHTML='<i class="fas fa-times"></i>',_(e,"slot","nav")},m(i,f){m(i,e,f),u&&u.m(e,null),p(e,n),p(e,l),p(e,o),p(e,c),r||(a=[w(l,"click",t[13]),w(c,"click",(function(){s(t[0])&&t[0].apply(this,arguments)}))],r=!0)},p(l,i){(t=l)[2].isImage?u?u.p(t,i):(u=Ui(t),u.c(),u.m(e,n)):u&&(u.d(1),u=null)},d(t){t&&g(e),u&&u.d(),r=!1,i(a)}}}function Ki(e){let n,l,i,s;return{c(){n=v("footer"),l=v("button"),l.textContent="Save changes",_(l,"class","primary"),_(n,"slot","footer")},m(t,o){m(t,n,o),p(n,l),i||(s=w(l,"click",e[12]),i=!0)},p:t,d(t){t&&g(n),i=!1,s()}}}function Xi(t){let e,n,l={icon:t[7],title:"File details",$$slots:{footer:[Ki],nav:[Wi],default:[Ri]},$$scope:{ctx:t}};return e=new ui({props:l}),t[23](e),{c(){st(e.$$.fragment)},m(t,l){ot(e,t,l),n=!0},p(t,[n]){const l={};128&n&&(l.icon=t[7]),268435823&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(G(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(n){t[23](null),ct(e,n)}}}function Zi(t,e,n){let l,i,s,o,r,{collection:a=null}=e,{close:u}=e,{doc:f}=e,{file:h={}}=e,{reload:p=null}=e,m=gt([]);function g(t){m.update((e=>(e.splice(t,1),e)))}function $(){m.update((t=>[...t,["",""]]))}c(t,m,(t=>n(8,i=t))),N((()=>{d(m,i="object"!=typeof h.properties||h.properties instanceof Array?[]:[...Object.entries(h.properties)],i),n(5,o=h.name),n(6,r=h.title)}));return t.$$set=t=>{"collection"in t&&n(14,a=t.collection),"close"in t&&n(0,u=t.close),"doc"in t&&n(1,f=t.doc),"file"in t&&n(2,h=t.file),"reload"in t&&n(3,p=t.reload)},t.$$.update=()=>{4&t.$$.dirty&&n(7,l="inverse far "+Ii(h.name.split(".").pop()))},[u,f,h,p,s,o,r,l,i,m,g,$,function(){m.update((t=>t.map((t=>[t[0].trim(),t[1].trim()])))),m.update((t=>[...Object.entries(Object.fromEntries(t))]));let t={newname:o,title:r,properties:Object.fromEntries(i)};f.class.fetcher.attachment.modify(f.id,h.name,t).then(u).then(p)},function(){confirm("Remove file: "+h.name+"\nAre you sure?")&&f.class.fetcher.attachment.remove(a,f.id,h.name).then(u).then(p)},a,()=>{Be.show(zi,{file:h,doc:f,reload:p})},function(){o=this.value,n(5,o)},function(){r=this.value,n(6,r)},()=>{navigator.clipboard.writeText(h.url),vt.info("URL copied to clipboard")},()=>$(),function(t,e){t[e][0]=this.value,m.set(i)},function(t,e){t[e][1]=this.value,m.set(i)},t=>g(t),function(t){P[t?"unshift":"push"]((()=>{s=t,n(4,s)}))}]}class Gi extends at{constructor(t){super(),rt(this,t,Zi,Xi,o,{collection:14,close:0,doc:1,file:2,reload:3})}}function ts(t){let e,n;return{c(){e=v("i"),_(e,"class",n=f(t[3])+" Q1fxwff1")},m(t,n){m(t,e,n)},p(t,l){8&l&&n!==(n=f(t[3])+" Q1fxwff1")&&_(e,"class",n)},d(t){t&&g(e)}}}function es(t){let e,n,l,i,s,o,c,r=t[0].width+"",a=t[0].height+"";return{c(){e=v("img"),l=y(),i=v("div"),s=b(r),o=b("x"),c=b(a),_(e,"alt",""),e.src!==(n=t[0].thumbnail)&&_(e,"src",n),_(e,"width","100"),_(e,"height","100"),_(e,"draggable","false"),_(i,"class","dimensions Q1fxwff1")},m(t,n){m(t,e,n),m(t,l,n),m(t,i,n),p(i,s),p(i,o),p(i,c)},p(t,l){1&l&&e.src!==(n=t[0].thumbnail)&&_(e,"src",n),1&l&&r!==(r=t[0].width+"")&&E(s,r),1&l&&a!==(a=t[0].height+"")&&E(c,a)},d(t){t&&g(e),t&&g(l),t&&g(i)}}}function ns(e){let n,l,s,o,c,r,a,u,f,d,h=e[0].name+"",$=bi(e[0].size,{separator:"",decimals:0})+"";function x(t,e){return t[0].isImage?es:ts}let k=x(e),Q=k(e);return{c(){n=v("section"),l=v("div"),Q.c(),s=y(),o=v("span"),c=b(h),r=y(),a=v("span"),u=b($),_(l,"class","preview Q1fxwff1"),_(o,"class","name Q1fxwff1"),_(a,"class","data Q1fxwff1"),_(n,"class","file Q1fxwff1"),_(n,"draggable","true"),C(n,"right",e[2]),C(n,"left",e[1])},m(t,i){m(t,n,i),p(n,l),Q.m(l,null),p(n,s),p(n,o),p(o,c),p(n,r),p(n,a),p(a,u),f||(d=[w(n,"click",e[4]),w(n,"dragleave",e[6]),w(n,"drop",e[8]),w(n,"dragstart",e[7]),w(n,"dragover",e[5])],f=!0)},p(t,[e]){k===(k=x(t))&&Q?Q.p(t,e):(Q.d(1),Q=k(t),Q&&(Q.c(),Q.m(l,null))),1&e&&h!==(h=t[0].name+"")&&E(c,h),1&e&&$!==($=bi(t[0].size,{separator:"",decimals:0})+"")&&E(u,$),4&e&&C(n,"right",t[2]),2&e&&C(n,"left",t[1])},i:t,o:t,d(t){t&&g(n),Q.d(),f=!1,i(d)}}}function ls(t,e,n){let l,{file:i={}}=e,{doc:s=null}=e,{index:o=null}=e,{reload:c=null}=e,{collection:r=null}=e,a=!1,u=!1;return t.$$set=t=>{"file"in t&&n(0,i=t.file),"doc"in t&&n(9,s=t.doc),"index"in t&&n(10,o=t.index),"reload"in t&&n(11,c=t.reload),"collection"in t&&n(12,r=t.collection)},t.$$.update=()=>{1&t.$$.dirty&&n(3,l="far "+Ii(i.name.split(".").pop()))},[i,a,u,l,function(){Be.show(Gi,{file:i,doc:s,reload:c,collection:r})},function(t){"attachment"===t.dataTransfer.types[0]&&r===t.dataTransfer.types[1]&&(t.target.clientWidth/2<t.offsetX?(n(2,u=!0),n(1,a=!1)):(n(1,a=!0),n(2,u=!1)),t.stopPropagation(),t.preventDefault())},function(t){n(1,a=!1),n(2,u=!1)},function(t){t.dataTransfer.setData("attachment","1"),t.dataTransfer.setData(r,"1"),t.dataTransfer.setData("file",i.name),t.dataTransfer.setData("collection",r)},function(t){"attachment"===t.dataTransfer.types[0]&&r===t.dataTransfer.types[1]&&(s.class.fetcher.attachment.order(s.id,r,t.dataTransfer.getData("file"),o+(u?1:0)).then(c),n(1,a=!1),n(2,u=!1))},s,o,c,r]}class is extends at{constructor(t){super(),rt(this,t,ls,ns,o,{file:0,doc:9,index:10,reload:11,collection:12})}}function ss(t,e,n){const l=t.slice();return l[15]=e[n],l[17]=n,l}function os(t){let e,n;return e=new is({props:{file:t[15],doc:t[2],collection:t[0],reload:t[3],index:t[17]}}),{c(){st(e.$$.fragment)},m(t,l){ot(e,t,l),n=!0},p(t,n){const l={};64&n&&(l.file=t[15]),4&n&&(l.doc=t[2]),1&n&&(l.collection=t[0]),8&n&&(l.reload=t[3]),e.$set(l)},i(t){n||(G(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){ct(e,t)}}}function cs(t){let e,n,l,s,o,c,r,a,u,f,d,h,x,Q,M,O,z=t[6],T=[];for(let e=0;e<z.length;e+=1)T[e]=os(ss(t,z,e));const j=t=>tt(T[t],1,1,(()=>{T[t]=null}));return{c(){e=v("section"),n=v("input"),l=y(),s=v("div"),o=v("b"),c=b(t[1]),r=v("span"),a=b("("),u=b(t[0]),f=b(")"),d=v("i"),h=y(),x=v("div");for(let t=0;t<T.length;t+=1)T[t].c();n.multiple=!0,_(n,"type","file"),S(n,"display","none"),_(r,"class","Q1x3zdau"),_(d,"class","far fa-folder-open Q1x3zdau"),_(s,"class","block-label Q1x3zdau"),_(x,"class","files Q1x3zdau"),_(e,"class","block Q1x3zdau"),C(e,"over",t[5])},m(i,g){m(i,e,g),p(e,n),t[12](n),p(e,l),p(e,s),p(s,o),p(o,c),p(s,r),p(r,a),p(r,u),p(r,f),p(s,d),p(e,h),p(e,x);for(let t=0;t<T.length;t+=1)T[t].m(x,null);Q=!0,M||(O=[w(n,"change",t[8]),w(d,"click",t[13]),w(e,"dragover",t[9]),w(e,"drop",t[10]),w(e,"dragleave",t[14]),w(e,"dragover",k(rs))],M=!0)},p(t,[n]){if((!Q||2&n)&&E(c,t[1]),(!Q||1&n)&&E(u,t[0]),77&n){let e;for(z=t[6],e=0;e<z.length;e+=1){const l=ss(t,z,e);T[e]?(T[e].p(l,n),G(T[e],1)):(T[e]=os(l),T[e].c(),G(T[e],1),T[e].m(x,null))}for(X(),e=z.length;e<T.length;e+=1)j(e);Z()}32&n&&C(e,"over",t[5])},i(t){if(!Q){for(let t=0;t<z.length;t+=1)G(T[t]);Q=!0}},o(t){T=T.filter(Boolean);for(let t=0;t<T.length;t+=1)tt(T[t]);Q=!1},d(n){n&&g(e),t[12](null),$(T,n),M=!1,i(O)}}}const rs=()=>{};function as(t,e,n){let l,i,{name:s=""}=e,{label:o=""}=e,{doc:r=null}=e,{reload:a=null}=e,u=gt([]);c(t,u,(t=>n(6,l=t)));let{get:f=(()=>{r.class.fetcher.attachment.get(r.id,s).then((t=>d(u,l=t??[],l)))})}=e;f();let h=!1;return t.$$set=t=>{"name"in t&&n(0,s=t.name),"label"in t&&n(1,o=t.label),"doc"in t&&n(2,r=t.doc),"reload"in t&&n(3,a=t.reload),"get"in t&&n(11,f=t.get)},[s,o,r,a,i,h,l,u,function(){let t=[];[...i.files].forEach((e=>{t.push(r.class.fetcher.attachment.upload(s,e,r.id))})),Promise.all(t).then((t=>f())).then((()=>n(4,i.value="",i)))},function(t){"attachment"===t.dataTransfer.types[0]&&t.dataTransfer.types[1]!==s&&n(5,h=!0)},function(t){h&&r.class.fetcher.attachment.add(r.id,s,t.dataTransfer.getData("file"),t.shiftKey?null:t.dataTransfer.getData("collection")).then(a),n(5,h=!1)},f,function(t){P[t?"unshift":"push"]((()=>{i=t,n(4,i)}))},()=>{i.click()},()=>n(5,h=!1)]}class us extends at{constructor(t){super(),rt(this,t,as,cs,o,{name:0,label:1,doc:2,reload:3,get:11})}get name(){return this.$$.ctx[0]}set name(t){this.$set({name:t}),R()}get label(){return this.$$.ctx[1]}set label(t){this.$set({label:t}),R()}get doc(){return this.$$.ctx[2]}set doc(t){this.$set({doc:t}),R()}get reload(){return this.$$.ctx[3]}set reload(t){this.$set({reload:t}),R()}get get(){return this.$$.ctx[11]}set get(t){this.$set({get:t}),R()}}function fs(t,e,n){const l=t.slice();return l[8]=e[n],l[9]=e,l[10]=n,l}function ds(t){let e,n,l=t[10];const i=()=>t[6](e,l),s=()=>t[6](null,l);let o={name:t[8].name,label:t[8].label,doc:t[1],reload:t[5]};return e=new us({props:o}),i(),{c(){st(e.$$.fragment)},m(t,l){ot(e,t,l),n=!0},p(t,n){l!==t[10]&&(s(),l=t[10],i());const o={};4&n&&(o.name=t[8].name),4&n&&(o.label=t[8].label),2&n&&(o.doc=t[1]),e.$set(o)},i(t){n||(G(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){s(),ct(e,t)}}}function hs(t){let e,n,l=t[2],i=[];for(let e=0;e<l.length;e+=1)i[e]=ds(fs(t,l,e));const s=t=>tt(i[t],1,1,(()=>{i[t]=null}));return{c(){e=v("main");for(let t=0;t<i.length;t+=1)i[t].c();_(e,"class","Q1y0tsmp")},m(t,l){m(t,e,l);for(let t=0;t<i.length;t+=1)i[t].m(e,null);n=!0},p(t,n){if(54&n){let o;for(l=t[2],o=0;o<l.length;o+=1){const s=fs(t,l,o);i[o]?(i[o].p(s,n),G(i[o],1)):(i[o]=ds(s),i[o].c(),G(i[o],1),i[o].m(e,null))}for(X(),o=l.length;o<i.length;o+=1)s(o);Z()}},i(t){if(!n){for(let t=0;t<l.length;t+=1)G(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)tt(i[t]);n=!1},d(t){t&&g(e),$(i,t)}}}function ps(t){let e,n,l,i;return{c(){e=v("nav"),n=v("button"),n.innerHTML='<i class="fas fa-times"></i>',_(e,"slot","nav")},m(o,c){m(o,e,c),p(e,n),l||(i=w(n,"click",(function(){s(t[0])&&t[0].apply(this,arguments)})),l=!0)},p(e,n){t=e},d(t){t&&g(e),l=!1,i()}}}function ms(t){let e,n;return e=new ui({props:{icon:"inverse far fa-folder-open",title:"Attachments",big:!0,$$slots:{nav:[ps],default:[hs]},$$scope:{ctx:t}}}),t[7](e),{c(){st(e.$$.fragment)},m(t,l){ot(e,t,l),n=!0},p(t,[n]){const l={};2071&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(G(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(n){t[7](null),ct(e,n)}}}function gs(t,e,n){let l,{close:i=(()=>console.log("close"))}=e,{doc:s}=e,{categories:o=null}=e;let c=[];return t.$$set=t=>{"close"in t&&n(0,i=t.close),"doc"in t&&n(1,s=t.doc),"categories"in t&&n(2,o=t.categories)},[i,s,o,l,c,function(){c.forEach((t=>t.get()))},function(t,e){P[t?"unshift":"push"]((()=>{c[e]=t,n(4,c)}))},function(t){P[t?"unshift":"push"]((()=>{l=t,n(3,l)}))}]}class $s extends at{constructor(t){super(),rt(this,t,gs,ms,o,{close:0,doc:1,categories:2})}}let vs={attachment:function(t){return t=Object.values(t),new ni("far fa-folder-open","attachments",(e=>Be.show($s,{doc:e,categories:t})),(t=>t.exists))},save:function(){return new ni("far fa-save","save",(t=>t.save()))},delete:function(){return new ni("fas fa-times","delete",(t=>t.delete()),(t=>t.exists))}},bs={reload:function(t){return Vt.Action("fas fa-recycle","",(t=>t.reload()))},add:function(t){return Vt.Action("fas fa-plus","",(e=>t.open(null)))}};var ys={avatar:{name:"avatar",label:"avatar","max-count":1,"max-size":524288,"mime-type":"/image\\/.*/"}};let xs,ws,ks={attachments:{field:"attachments",label:"attachments",type:"JsonField",readonly:!0},created:{field:"created",label:"created",type:"DateTimeField",readonly:!0},email:{field:"email",label:"email",type:"StringField",readonly:!1},group:{field:"group",label:"group",type:"EnumField",readonly:!1,options:{admin:"adminisztrátor",moderator:"moderator",visitor:"visitor"}},guid:{field:"guid",label:"guid",type:"StringField",readonly:!0},id:{field:"id",label:"id",type:"IntField",readonly:!0},name:{field:"name",label:"name",type:"StringField",readonly:!1},password:{field:"password",label:"password",type:"StringField",readonly:!0},updated:{field:"updated",label:"updated",type:"DateTimeField",readonly:!1}};xs=Gt.create("Users","fas fa-users",100,[Vt.Sorting("name",!0).asc("name")],"/magic/user",{component:yn.Component,cardify:t=>yn.Cardify(t.id,(()=>ws.open(t.id)),t.name,!0,null,null,[],[yn.Property("created",t.created),yn.Property("updated",t.updated)],[])}),ws=ei.create(xs,"user","far fa-user","/magic/user",(t=>t.name??"new user")),xs.addAction(bs.reload(xs)),xs.addAction(bs.add(ws)),ws.addAction(vs.attachment(ys)),ws.addAction(vs.save()),ws.addAction(vs.delete()),ws.addSection("User properties",!1).add(ei.inputs.string(ks.name),ei.inputs.string(ks.email),ei.inputs.select(ks.group).options(ks.group.options),ei.inputs.string("setpassword","password"));let Qs=[Tt.List("Users","fas fa-users",xs).activate()];window.addEventListener("load",(()=>{yt.update((t=>({...t,menu:Qs,lists:[xs]}))),new en({target:document.body})}))}();
//# sourceMappingURL=index.js.map
